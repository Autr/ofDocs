<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>ofFileUtils.cpp | openframeworks | ofDocs</title><meta data-n-head="ssr" data-hid="description" name="description" content="openFrameworks documentation and examples browser"><meta data-n-head="ssr" data-hid="keyword" name="keyword" content=""><meta data-n-head="ssr" property="og:description" content="openFrameworks documentation and examples browser" vmid="og:description"><meta data-n-head="ssr" property="og:title" content="ofFileUtils.cpp | openframeworks | ofDocs" vmid="og:title"><meta data-n-head="ssr" property="og:image" content="/files/images/ofw-logo.png" vmid="og:image"><link rel="preload" href="/_nuxt/1222c887b819d0202cfa.js" as="script"><link rel="preload" href="/_nuxt/e2974c46edd15e353a99.js" as="script"><link rel="preload" href="/_nuxt/fe12c0cb7395fa1032f4.css" as="style"><link rel="preload" href="/_nuxt/f8d94d1c92ade1d8a6da.js" as="script"><link rel="preload" href="/_nuxt/f3151c6e69ccf58ccdfd.css" as="style"><link rel="preload" href="/_nuxt/c01572c3f985d7f6c287.js" as="script"><link rel="preload" href="/_nuxt/21c4d0f9583096394838.css" as="style"><link rel="preload" href="/_nuxt/adc32956be059d7527f6.js" as="script"><link rel="stylesheet" href="/_nuxt/fe12c0cb7395fa1032f4.css"><link rel="stylesheet" href="/_nuxt/f3151c6e69ccf58ccdfd.css"><link rel="stylesheet" href="/_nuxt/21c4d0f9583096394838.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="app" class="unknown"><div id="menu"><h1 class="of"><div class="inner"><span><a href="/" class="nuxt-link-active"><div class="txt"><span class="docs f7 questrial">ofDocs </span><span class="version">0.11.0</span></div></a></span></div></h1><div id="search"><div class="inner"><div class="field text"><div class="field-inner"><svg viewbox="0 0 36 36" x="0px" y="0px" enable-background="new 0 0 36 36" xml:space="preserve"><path d="M35.525,31.228l-8.88-8.882c1.444-2.238,2.298-4.895,2.298-7.752c0-7.909-6.438-14.343-14.346-14.343						c-7.911,0-14.343,6.434-14.343,14.343c0,7.911,6.433,14.344,14.343,14.344c2.856,0,5.513-0.849,7.752-2.294l8.88,8.88						c0.295,0.297,0.782,0.297,1.076,0l3.22-3.221C35.824,32.008,35.824,31.523,35.525,31.228z M4.81,14.593						c0-5.396,4.391-9.788,9.788-9.788c5.398,0,9.787,4.392,9.787,9.788c0,5.398-4.389,9.789-9.787,9.789						C9.2,24.382,4.81,19.991,4.81,14.593z"></path></svg><!----><div class="text-wrapper"><input id="search_field" name="search_field" placeholder="Search (Alt+F)" autocomplete="off" tabindex="0"></div><!----><!----></div></div></div><div id="results" class="mt1"></div></div><div id="lists" class="menu-inner mt1"><div class="inner"><div class="item documentation"><a href="/documentation/" title="/documentation/"><i class="ico" style="display:none"></i><span>documentation</span><span style="display:none">documentation</span></a><!----></div><div class="item examples"><a href="/examples/" title="/examples/"><i class="ico" style="display:none"></i><span>examples</span><span style="display:none">examples</span></a><!----></div><div class="item openframeworks"><a href="/openframeworks/" title="/openframeworks/" class="nuxt-link-active"><i class="ico" style="display:none"></i><span>openFrameworks</span><span style="display:none">openframeworks</span></a><div class="list"><div class="item 3d"><a href="/openframeworks/3d/" title="/openframeworks/3d/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>3d</span></a><!----></div><div class="item app"><a href="/openframeworks/app/" title="/openframeworks/app/"><i class="ico" style="display:none">web</i><span style="display:none"></span><span>app</span></a><!----></div><div class="item communication"><a href="/openframeworks/communication/" title="/openframeworks/communication/"><i class="ico" style="display:none">language</i><span style="display:none"></span><span>communication</span></a><!----></div><div class="item events"><a href="/openframeworks/events/" title="/openframeworks/events/"><i class="ico" style="display:none">question_answer</i><span style="display:none"></span><span>events</span></a><!----></div><div class="item gl"><a href="/openframeworks/gl/" title="/openframeworks/gl/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>gl</span></a><!----></div><div class="item graphics"><a href="/openframeworks/graphics/" title="/openframeworks/graphics/"><i class="ico" style="display:none">category</i><span style="display:none"></span><span>graphics</span></a><!----></div><div class="item math"><a href="/openframeworks/math/" title="/openframeworks/math/"><i class="ico" style="display:none">border_clear</i><span style="display:none"></span><span>math</span></a><!----></div><div class="item sound"><a href="/openframeworks/sound/" title="/openframeworks/sound/"><i class="ico" style="display:none">volume_up</i><span style="display:none"></span><span>sound</span></a><!----></div><div class="item types"><a href="/openframeworks/types/" title="/openframeworks/types/"><i class="ico" style="display:none">ring_volume</i><span style="display:none"></span><span>types</span></a><!----></div><div class="item utils"><a href="/openframeworks/utils/" title="/openframeworks/utils/" class="nuxt-link-active"><i class="ico" style="display:none">build</i><span style="display:none"></span><span>utils</span></a><div class="list"><div class="item ofConstants.h"><a href="/openframeworks/utils/ofConstants_h" title="/openframeworks/utils/ofConstants.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofConstants.h</span></a><!----></div><div class="item ofFileUtils.cpp"><a href="/openframeworks/utils/ofFileUtils_cpp" title="/openframeworks/utils/ofFileUtils.cpp" class="nuxt-link-exact-active nuxt-link-active"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFileUtils.cpp</span></a><div class="list"></div></div><div class="item ofFileUtils.h"><a href="/openframeworks/utils/ofFileUtils_h" title="/openframeworks/utils/ofFileUtils.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFileUtils.h</span></a><!----></div><div class="item ofFpsCounter.cpp"><a href="/openframeworks/utils/ofFpsCounter_cpp" title="/openframeworks/utils/ofFpsCounter.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFpsCounter.cpp</span></a><!----></div><div class="item ofFpsCounter.h"><a href="/openframeworks/utils/ofFpsCounter_h" title="/openframeworks/utils/ofFpsCounter.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFpsCounter.h</span></a><!----></div><div class="item ofJson.h"><a href="/openframeworks/utils/ofJson_h" title="/openframeworks/utils/ofJson.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofJson.h</span></a><!----></div><div class="item ofLog.cpp"><a href="/openframeworks/utils/ofLog_cpp" title="/openframeworks/utils/ofLog.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofLog.cpp</span></a><!----></div><div class="item ofLog.h"><a href="/openframeworks/utils/ofLog_h" title="/openframeworks/utils/ofLog.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofLog.h</span></a><!----></div><div class="item ofMatrixStack.cpp"><a href="/openframeworks/utils/ofMatrixStack_cpp" title="/openframeworks/utils/ofMatrixStack.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofMatrixStack.cpp</span></a><!----></div><div class="item ofMatrixStack.h"><a href="/openframeworks/utils/ofMatrixStack_h" title="/openframeworks/utils/ofMatrixStack.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofMatrixStack.h</span></a><!----></div><div class="item ofNoise.h"><a href="/openframeworks/utils/ofNoise_h" title="/openframeworks/utils/ofNoise.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofNoise.h</span></a><!----></div><div class="item ofSystemUtils.cpp"><a href="/openframeworks/utils/ofSystemUtils_cpp" title="/openframeworks/utils/ofSystemUtils.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSystemUtils.cpp</span></a><!----></div><div class="item ofSystemUtils.h"><a href="/openframeworks/utils/ofSystemUtils_h" title="/openframeworks/utils/ofSystemUtils.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSystemUtils.h</span></a><!----></div><div class="item ofThread.cpp"><a href="/openframeworks/utils/ofThread_cpp" title="/openframeworks/utils/ofThread.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofThread.cpp</span></a><!----></div><div class="item ofThread.h"><a href="/openframeworks/utils/ofThread_h" title="/openframeworks/utils/ofThread.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofThread.h</span></a><!----></div><div class="item ofThreadChannel.h"><a href="/openframeworks/utils/ofThreadChannel_h" title="/openframeworks/utils/ofThreadChannel.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofThreadChannel.h</span></a><!----></div><div class="item ofTimer.cpp"><a href="/openframeworks/utils/ofTimer_cpp" title="/openframeworks/utils/ofTimer.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofTimer.cpp</span></a><!----></div><div class="item ofTimer.h"><a href="/openframeworks/utils/ofTimer_h" title="/openframeworks/utils/ofTimer.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofTimer.h</span></a><!----></div><div class="item ofURLFileLoader.cpp"><a href="/openframeworks/utils/ofURLFileLoader_cpp" title="/openframeworks/utils/ofURLFileLoader.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofURLFileLoader.cpp</span></a><!----></div><div class="item ofURLFileLoader.h"><a href="/openframeworks/utils/ofURLFileLoader_h" title="/openframeworks/utils/ofURLFileLoader.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofURLFileLoader.h</span></a><!----></div><div class="item ofUtils.cpp"><a href="/openframeworks/utils/ofUtils_cpp" title="/openframeworks/utils/ofUtils.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofUtils.cpp</span></a><!----></div><div class="item ofUtils.h"><a href="/openframeworks/utils/ofUtils_h" title="/openframeworks/utils/ofUtils.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofUtils.h</span></a><!----></div><div class="item ofXml.cpp"><a href="/openframeworks/utils/ofXml_cpp" title="/openframeworks/utils/ofXml.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofXml.cpp</span></a><!----></div><div class="item ofXml.h"><a href="/openframeworks/utils/ofXml_h" title="/openframeworks/utils/ofXml.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofXml.h</span></a><!----></div></div></div><div class="item video"><a href="/openframeworks/video/" title="/openframeworks/video/"><i class="ico" style="display:none">videocam</i><span style="display:none"></span><span>video</span></a><!----></div></div></div><div class="item addons"><a href="/addons/" title="/addons/"><i class="ico" style="display:none">extension</i><span>addons</span><span style="display:none">addons</span></a><!----></div><div class="item guides"><a href="/guides/" title="/guides/"><i class="ico" style="display:none"></i><span>guides</span><span style="display:none">guides</span></a><!----></div></div></div></div><div id="document"><div id="renderer" class="main"><div absolute="/Users/Gilbert/Code/openFrameworks/libs/openFrameworks/utils/ofFileUtils.cpp" route="/openframeworks/utils/ofFileUtils.cpp" dir="../libs/openFrameworks/utils" ext="cpp" type="source" id="331" parent="329" siblings="" translations="[object Object]" class="doc-header"><div class="doc-header-inner"><div class="inner"><div class="mt2 mb2"><span class="breadcrumbs"><span class="crumb"><a href="/" class="pink nuxt-link-active">ofDocs</a><span class="chevron right"></span></span><span class="crumb"><a href="/openframeworks/" class="pink nuxt-link-active">openframeworks </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/openframeworks/utils/" class="pink nuxt-link-active">utils </a><!----><span class="chevron right"></span></span><span class="crumb"><!----><span class="link selector"><span>ofFileUtils.cpp </span><span class="chevron bottom"></span><select><option value="/openframeworks/utils/ofConstants_h">ofConstants.h</option><option value="/openframeworks/utils/ofFileUtils_cpp">ofFileUtils.cpp</option><option value="/openframeworks/utils/ofFileUtils_h">ofFileUtils.h</option><option value="/openframeworks/utils/ofFpsCounter_cpp">ofFpsCounter.cpp</option><option value="/openframeworks/utils/ofFpsCounter_h">ofFpsCounter.h</option><option value="/openframeworks/utils/ofJson_h">ofJson.h</option><option value="/openframeworks/utils/ofLog_cpp">ofLog.cpp</option><option value="/openframeworks/utils/ofLog_h">ofLog.h</option><option value="/openframeworks/utils/ofMatrixStack_cpp">ofMatrixStack.cpp</option><option value="/openframeworks/utils/ofMatrixStack_h">ofMatrixStack.h</option><option value="/openframeworks/utils/ofNoise_h">ofNoise.h</option><option value="/openframeworks/utils/ofSystemUtils_cpp">ofSystemUtils.cpp</option><option value="/openframeworks/utils/ofSystemUtils_h">ofSystemUtils.h</option><option value="/openframeworks/utils/ofThread_cpp">ofThread.cpp</option><option value="/openframeworks/utils/ofThread_h">ofThread.h</option><option value="/openframeworks/utils/ofThreadChannel_h">ofThreadChannel.h</option><option value="/openframeworks/utils/ofTimer_cpp">ofTimer.cpp</option><option value="/openframeworks/utils/ofTimer_h">ofTimer.h</option><option value="/openframeworks/utils/ofURLFileLoader_cpp">ofURLFileLoader.cpp</option><option value="/openframeworks/utils/ofURLFileLoader_h">ofURLFileLoader.h</option><option value="/openframeworks/utils/ofUtils_cpp">ofUtils.cpp</option><option value="/openframeworks/utils/ofUtils_h">ofUtils.h</option><option value="/openframeworks/utils/ofXml_cpp">ofXml.cpp</option><option value="/openframeworks/utils/ofXml_h">ofXml.h</option></select></span><!----></span></span></div></div></div></div><div id="code-page" static="true" class="markdown"><div id="side-menu"><!----><div id="see-also" filename="utils" absolute="/Users/Gilbert/Code/openFrameworks/libs/openFrameworks/utils" dir="../libs/openFrameworks" route="/openframeworks/utils/" ext="" type="folder" children="330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353" icon="build" parent="195" breadcrumbs="195" class="see-also"><h4>See also</h4><div class="also"><a href="/documentation/utils/"><span class="origin">documentation</span><span class="name">utils</span></a></div></div></div><div id="code-render"><div class="inner"><pre><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ofFileUtils.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">ifndef</span> TARGET_WIN32</span>
	<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;pwd.h></span></span>
	<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;sys/stat.h></span></span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ofUtils.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ofLog.h"</span></span>


<span class="token macro property">#<span class="token directive keyword">ifdef</span> TARGET_OSX</span>
	<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;mach-o/dyld.h></span>       </span><span class="token comment" spellcheck="true">/* _NSGetExecutablePath */</span>
	<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;limits.h></span>        </span><span class="token comment" spellcheck="true">/* PATH_MAX */</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// -- ofBuffer</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span><span class="token function">ofBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">currentLine</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span><span class="token function">ofBuffer</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> buffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t size<span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">buffer</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span>buffer<span class="token operator">+</span>size<span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">currentLine</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span><span class="token function">ofBuffer</span><span class="token punctuation">(</span>istream <span class="token operator">&</span> stream<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t ioBlockSize<span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">currentLine</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">set</span><span class="token punctuation">(</span>stream<span class="token punctuation">,</span> ioBlockSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span><span class="token function">set</span><span class="token punctuation">(</span>istream <span class="token operator">&</span> stream<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t ioBlockSize<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>stream<span class="token punctuation">.</span><span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span> <span class="token function">aux_buffer</span><span class="token punctuation">(</span>ioBlockSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>stream<span class="token punctuation">.</span><span class="token function">good</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		stream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token operator">&</span>aux_buffer<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ioBlockSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">append</span><span class="token punctuation">(</span>aux_buffer<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stream<span class="token punctuation">.</span><span class="token function">gcount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">setall</span><span class="token punctuation">(</span><span class="token keyword">char</span> mem<span class="token punctuation">)</span><span class="token punctuation">{</span>
	buffer<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span><span class="token function">writeTo</span><span class="token punctuation">(</span>ostream <span class="token operator">&</span> stream<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>stream<span class="token punctuation">.</span><span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	stream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> stream<span class="token punctuation">.</span><span class="token function">good</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> buffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t size<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>buffer<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> buffer<span class="token operator">+</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&</span> text<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">set</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&</span> buffer<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">append</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> buffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t size<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>buffer<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>buffer<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">,</span> buffer <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">reserve</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t size<span class="token punctuation">)</span><span class="token punctuation">{</span>
	buffer<span class="token punctuation">.</span><span class="token function">reserve</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">allocate</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t size<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">resize</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">resize</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t size<span class="token punctuation">)</span><span class="token punctuation">{</span>
	buffer<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">char</span> <span class="token operator">*</span> ofBuffer<span class="token operator">::</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> ofBuffer<span class="token operator">::</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">char</span> <span class="token operator">*</span> ofBuffer<span class="token operator">::</span><span class="token function">getBinaryBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> ofBuffer<span class="token operator">::</span><span class="token function">getBinaryBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
string ofBuffer<span class="token operator">::</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buffer<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span><span class="token keyword">operator</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer <span class="token operator">&</span> ofBuffer<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&</span> text<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">set</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
std<span class="token operator">::</span>size_t ofBuffer<span class="token operator">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
string ofBuffer<span class="token operator">::</span><span class="token function">getNextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>currentLine<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		currentLine <span class="token operator">=</span> <span class="token function">getLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token operator">++</span>currentLine<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> currentLine<span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
string ofBuffer<span class="token operator">::</span><span class="token function">getFirstLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	currentLine <span class="token operator">=</span> <span class="token function">getLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> currentLine<span class="token punctuation">.</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span><span class="token function">isLastLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> currentLine <span class="token operator">==</span> <span class="token function">getLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">void</span> ofBuffer<span class="token operator">::</span><span class="token function">resetLineReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	currentLine <span class="token operator">=</span> <span class="token function">getLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>iterator ofBuffer<span class="token operator">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>iterator ofBuffer<span class="token operator">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>const_iterator ofBuffer<span class="token operator">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>const_iterator ofBuffer<span class="token operator">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>reverse_iterator ofBuffer<span class="token operator">::</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>reverse_iterator ofBuffer<span class="token operator">::</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>const_reverse_iterator ofBuffer<span class="token operator">::</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>const_reverse_iterator ofBuffer<span class="token operator">::</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token function">Line</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>iterator _begin<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>iterator _end<span class="token punctuation">)</span>
	<span class="token operator">:</span><span class="token function">_current</span><span class="token punctuation">(</span>_begin<span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_begin</span><span class="token punctuation">(</span>_begin<span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_end</span><span class="token punctuation">(</span>_end<span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>_begin <span class="token operator">==</span> _end<span class="token punctuation">)</span><span class="token punctuation">{</span>
		line <span class="token operator">=</span>  <span class="token string">""</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	_current <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span>_begin<span class="token punctuation">,</span> _end<span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>_current <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">>=</span> _begin <span class="token operator">&&</span> <span class="token operator">*</span><span class="token punctuation">(</span>_current <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'\r'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		line <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>_begin<span class="token punctuation">,</span> _current <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		line <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>_begin<span class="token punctuation">,</span> _current<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>_current <span class="token operator">!=</span> _end<span class="token punctuation">)</span><span class="token punctuation">{</span>
		_current<span class="token operator">+</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&</span> ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> line<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">*</span> ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&</span>line<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&</span> ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> line<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>Line <span class="token operator">&</span> ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">=</span> <span class="token function">Line</span><span class="token punctuation">(</span>_current<span class="token punctuation">,</span>_end<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>Line ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Line <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span>Line <span class="token keyword">const</span><span class="token operator">&</span> rhs<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> rhs<span class="token punctuation">.</span>_begin <span class="token operator">!=</span> _begin <span class="token operator">||</span> rhs<span class="token punctuation">.</span>_end <span class="token operator">!=</span> _end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span>Line <span class="token keyword">const</span><span class="token operator">&</span> rhs<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> rhs<span class="token punctuation">.</span>_begin <span class="token operator">==</span> _begin <span class="token operator">&&</span> rhs<span class="token punctuation">.</span>_end <span class="token operator">==</span> _end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span>Line<span class="token operator">::</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> _begin <span class="token operator">==</span> _end<span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token function">RLine</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>reverse_iterator _rbegin<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>reverse_iterator _rend<span class="token punctuation">)</span>
	<span class="token operator">:</span><span class="token function">_current</span><span class="token punctuation">(</span>_rbegin<span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_rbegin</span><span class="token punctuation">(</span>_rbegin<span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_rend</span><span class="token punctuation">(</span>_rend<span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>_rbegin <span class="token operator">==</span> _rend<span class="token punctuation">)</span><span class="token punctuation">{</span>
		line <span class="token operator">=</span>  <span class="token string">""</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	_current <span class="token operator">=</span> std<span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span>_rbegin<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> _rend<span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	line <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>_current<span class="token punctuation">.</span><span class="token function">base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _rbegin<span class="token punctuation">.</span><span class="token function">base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>_current <span class="token operator">&lt;</span> _rend<span class="token number">-1</span> <span class="token operator">&&</span> <span class="token operator">*</span><span class="token punctuation">(</span>_current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'\r'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		_current<span class="token operator">+</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&</span> ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> line<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">*</span> ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&</span>line<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">const</span> std<span class="token operator">::</span>string <span class="token operator">&</span> ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token function">asString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> line<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>RLine <span class="token operator">&</span> ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">=</span> <span class="token function">RLine</span><span class="token punctuation">(</span>_current<span class="token punctuation">,</span>_rend<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>RLine ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	RLine <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span>RLine <span class="token keyword">const</span><span class="token operator">&</span> rhs<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> rhs<span class="token punctuation">.</span>_rbegin <span class="token operator">!=</span> _rbegin <span class="token operator">||</span> rhs<span class="token punctuation">.</span>_rend <span class="token operator">!=</span> _rend<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span>RLine <span class="token keyword">const</span><span class="token operator">&</span> rhs<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> rhs<span class="token punctuation">.</span>_rbegin <span class="token operator">==</span> _rbegin <span class="token operator">&&</span> rhs<span class="token punctuation">.</span>_rend <span class="token operator">==</span> _rend<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> ofBuffer<span class="token operator">::</span>RLine<span class="token operator">::</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> _rbegin <span class="token operator">==</span> _rend<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>Lines<span class="token operator">::</span><span class="token function">Lines</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>iterator begin<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>iterator end<span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">_begin</span><span class="token punctuation">(</span>begin<span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">_end</span><span class="token punctuation">(</span>end<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>Line ofBuffer<span class="token operator">::</span>Lines<span class="token operator">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">Line</span><span class="token punctuation">(</span>_begin<span class="token punctuation">,</span>_end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>Line ofBuffer<span class="token operator">::</span>Lines<span class="token operator">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">Line</span><span class="token punctuation">(</span>_end<span class="token punctuation">,</span>_end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>RLines<span class="token operator">::</span><span class="token function">RLines</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>reverse_iterator rbegin<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span><span class="token operator">::</span>reverse_iterator rend<span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">_rbegin</span><span class="token punctuation">(</span>rbegin<span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">_rend</span><span class="token punctuation">(</span>rend<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>RLine ofBuffer<span class="token operator">::</span>RLines<span class="token operator">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">RLine</span><span class="token punctuation">(</span>_rbegin<span class="token punctuation">,</span>_rend<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>RLine ofBuffer<span class="token operator">::</span>RLines<span class="token operator">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">RLine</span><span class="token punctuation">(</span>_rend<span class="token punctuation">,</span>_rend<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>Lines ofBuffer<span class="token operator">::</span><span class="token function">getLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> ofBuffer<span class="token operator">::</span><span class="token function">Lines</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer<span class="token operator">::</span>RLines ofBuffer<span class="token operator">::</span><span class="token function">getReverseLines</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> ofBuffer<span class="token operator">::</span><span class="token function">RLines</span><span class="token punctuation">(</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ostream <span class="token operator">&</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream <span class="token operator">&</span> ostr<span class="token punctuation">,</span> <span class="token keyword">const</span> ofBuffer <span class="token operator">&</span> buf<span class="token punctuation">)</span><span class="token punctuation">{</span>
	buf<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>ostr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> ostr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
istream <span class="token operator">&</span> <span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span>istream <span class="token operator">&</span> istr<span class="token punctuation">,</span> ofBuffer <span class="token operator">&</span> buf<span class="token punctuation">)</span><span class="token punctuation">{</span>
	buf<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>istr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> istr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
ofBuffer <span class="token function">ofBufferFromFile</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> path<span class="token punctuation">,</span> <span class="token keyword">bool</span> binary<span class="token punctuation">)</span><span class="token punctuation">{</span>
	ofFile <span class="token function">f</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>ReadOnly<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">ofBuffer</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//--------------------------------------------------</span>
<span class="token keyword">bool</span> <span class="token function">ofBufferToFile</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> path<span class="token punctuation">,</span> <span class="token keyword">const</span> ofBuffer<span class="token operator">&</span> buffer<span class="token punctuation">,</span> <span class="token keyword">bool</span> binary<span class="token punctuation">)</span><span class="token punctuation">{</span>
	ofFile <span class="token function">f</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> ofFile<span class="token operator">::</span>WriteOnly<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// -- ofFile</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
ofFile<span class="token operator">::</span><span class="token function">ofFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">mode</span><span class="token punctuation">(</span>Reference<span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">binary</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>

ofFile<span class="token operator">::</span><span class="token function">ofFile</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> path<span class="token punctuation">,</span> Mode mode<span class="token punctuation">,</span> <span class="token keyword">bool</span> binary<span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">mode</span><span class="token punctuation">(</span>mode<span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">binary</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> mode<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//-------------------------------------------------------------------------------------------------------------</span>
ofFile<span class="token operator">::</span><span class="token operator">~</span><span class="token function">ofFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment" spellcheck="true">//close();</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//-------------------------------------------------------------------------------------------------------------</span>
ofFile<span class="token operator">::</span><span class="token function">ofFile</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> mom<span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">basic_ios</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">fstream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">mode</span><span class="token punctuation">(</span>Reference<span class="token punctuation">)</span>
<span class="token punctuation">,</span><span class="token function">binary</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">copyFrom</span><span class="token punctuation">(</span>mom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//-------------------------------------------------------------------------------------------------------------</span>
ofFile <span class="token operator">&</span> ofFile<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> mom<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">copyFrom</span><span class="token punctuation">(</span>mom<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//-------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofFile<span class="token operator">::</span><span class="token function">copyFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> mom<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">&</span>mom <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		Mode new_mode <span class="token operator">=</span> mom<span class="token punctuation">.</span>mode<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>new_mode <span class="token operator">!=</span> Reference <span class="token operator">&&</span> new_mode <span class="token operator">!=</span> ReadOnly<span class="token punctuation">)</span><span class="token punctuation">{</span>
			new_mode <span class="token operator">=</span> ReadOnly<span class="token punctuation">;</span>
			<span class="token function">ofLogWarning</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyFrom(): copying a writable file, opening new copy as read only"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">open</span><span class="token punctuation">(</span>mom<span class="token punctuation">.</span>myFile<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> new_mode<span class="token punctuation">,</span> mom<span class="token punctuation">.</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">openStream</span><span class="token punctuation">(</span>Mode _mode<span class="token punctuation">,</span> <span class="token keyword">bool</span> _binary<span class="token punctuation">)</span><span class="token punctuation">{</span>
	mode <span class="token operator">=</span> _mode<span class="token punctuation">;</span>
	binary <span class="token operator">=</span> _binary<span class="token punctuation">;</span>
	ios_base<span class="token operator">::</span>openmode binary_mode <span class="token operator">=</span> binary <span class="token operator">?</span> ios<span class="token operator">::</span>binary <span class="token operator">:</span> <span class="token punctuation">(</span>ios_base<span class="token operator">::</span>openmode<span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">switch</span><span class="token punctuation">(</span>_mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> WriteOnly<span class="token operator">:</span>
		<span class="token keyword">case</span> ReadWrite<span class="token operator">:</span>
		<span class="token keyword">case</span> Append<span class="token operator">:</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">ofDirectory</span><span class="token punctuation">(</span>ofFilePath<span class="token operator">::</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				ofFilePath<span class="token operator">::</span><span class="token function">createEnclosingDirectory</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> Reference<span class="token operator">:</span>
		<span class="token keyword">case</span> ReadOnly<span class="token operator">:</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">switch</span><span class="token punctuation">(</span>_mode<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">case</span> Reference<span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>

		<span class="token keyword">case</span> ReadOnly<span class="token operator">:</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> <span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				fstream<span class="token operator">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ios<span class="token operator">::</span>in <span class="token operator">|</span> binary_mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>

		<span class="token keyword">case</span> WriteOnly<span class="token operator">:</span>
			fstream<span class="token operator">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ios<span class="token operator">::</span>out <span class="token operator">|</span> binary_mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>

		<span class="token keyword">case</span> ReadWrite<span class="token operator">:</span>
			fstream<span class="token operator">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ios_base<span class="token operator">::</span>in <span class="token operator">|</span> ios_base<span class="token operator">::</span>out <span class="token operator">|</span> binary_mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>

		<span class="token keyword">case</span> Append<span class="token operator">:</span>
			fstream<span class="token operator">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ios<span class="token operator">::</span>out <span class="token operator">|</span> ios<span class="token operator">::</span>app <span class="token operator">|</span> binary_mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> fstream<span class="token operator">::</span><span class="token function">good</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> _path<span class="token punctuation">,</span> Mode _mode<span class="token punctuation">,</span> <span class="token keyword">bool</span> binary<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	myFile <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token function">ofToDataPath</span><span class="token punctuation">(</span>_path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">openStream</span><span class="token punctuation">(</span>_mode<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> _path<span class="token punctuation">,</span> Mode _mode<span class="token punctuation">,</span> <span class="token keyword">bool</span> binary<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	myFile <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>_path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">openStream</span><span class="token punctuation">(</span>_mode<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//-------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">changeMode</span><span class="token punctuation">(</span>Mode _mode<span class="token punctuation">,</span> <span class="token keyword">bool</span> binary<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>_mode <span class="token operator">!=</span> mode<span class="token punctuation">)</span><span class="token punctuation">{</span>
		string _path <span class="token operator">=</span> <span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		myFile <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">openStream</span><span class="token punctuation">(</span>_mode<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//-------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">isWriteMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> mode <span class="token operator">!=</span> ReadOnly<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//-------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofFile<span class="token operator">::</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	myFile <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>mode<span class="token operator">!=</span>Reference<span class="token punctuation">)</span> fstream<span class="token operator">::</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">bool</span> success <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token keyword">auto</span> oldmode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>mode<span class="token punctuation">;</span>
	<span class="token keyword">auto</span> oldpath <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	success <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>WriteOnly<span class="token punctuation">,</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span> oldpath<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">open</span><span class="token punctuation">(</span>oldpath<span class="token punctuation">,</span>oldmode<span class="token punctuation">,</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">return</span> success<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
ofBuffer ofFile<span class="token operator">::</span><span class="token function">readToBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>myFile<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">ofBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token function">ofBuffer</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">writeFromBuffer</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofBuffer <span class="token operator">&</span> buffer<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>myFile<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isWriteMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"writeFromBuffer(): trying to write to read only file \""</span> <span class="token operator">&lt;&lt;</span> myFile<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\""</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
filebuf <span class="token operator">*</span>ofFile<span class="token operator">::</span><span class="token function">getFileBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">rdbuf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFile<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> myFile<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFile<span class="token operator">::</span><span class="token function">getExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">auto</span> dotext <span class="token operator">=</span> myFile<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dotext<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> dotext<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">string</span><span class="token punctuation">(</span>dotext<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>dotext<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> dotext<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFile<span class="token operator">::</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> myFile<span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFile<span class="token operator">::</span><span class="token function">getBaseName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> myFile<span class="token punctuation">.</span><span class="token function">stem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFile<span class="token operator">::</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> ofFilePath<span class="token operator">::</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFile<span class="token operator">::</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> ofFilePath<span class="token operator">::</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">canRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">auto</span> perm <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">status</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">ifdef</span> TARGET_WIN32</span>
	DWORD attr <span class="token operator">=</span> <span class="token function">GetFileAttributes</span><span class="token punctuation">(</span>myFile<span class="token punctuation">.</span><span class="token function">native</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>attr <span class="token operator">==</span> INVALID_FILE_ATTRIBUTES<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">struct</span> stat info<span class="token punctuation">;</span>
	<span class="token function">stat</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// Error check omitted</span>
<span class="token macro property">#<span class="token directive keyword">if</span> OF_USING_STD_FS</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">geteuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_uid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_read<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getegid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_gid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>group_read<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>others_read<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">geteuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_uid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>owner_read<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getegid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_gid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>group_read<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>others_read<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">canWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">auto</span> perm <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">status</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">ifdef</span> TARGET_WIN32</span>
	DWORD attr <span class="token operator">=</span> <span class="token function">GetFileAttributes</span><span class="token punctuation">(</span>myFile<span class="token punctuation">.</span><span class="token function">native</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>attr <span class="token operator">==</span> INVALID_FILE_ATTRIBUTES<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>attr <span class="token operator">&</span> FILE_ATTRIBUTE_READONLY<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">struct</span> stat info<span class="token punctuation">;</span>
	<span class="token function">stat</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// Error check omitted</span>
<span class="token macro property">#<span class="token directive keyword">if</span> OF_USING_STD_FS</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">geteuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_uid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_write<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getegid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_gid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>group_write<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>others_write<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">geteuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_uid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>owner_write<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getegid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_gid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>group_write<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>others_write<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">canExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">auto</span> perm <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">status</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">ifdef</span> TARGET_WIN32</span>
	<span class="token keyword">return</span> <span class="token function">getExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"exe"</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">struct</span> stat info<span class="token punctuation">;</span>
	<span class="token function">stat</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// Error check omitted</span>
<span class="token macro property">#<span class="token directive keyword">if</span> OF_USING_STD_FS</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">geteuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_uid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_exec<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getegid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_gid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>group_exec<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>others_exec<span class="token punctuation">)</span> <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>none<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">geteuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_uid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>owner_exe<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getegid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> info<span class="token punctuation">.</span>st_gid<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>group_exe<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> perm <span class="token operator">&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>others_exe<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_regular_file</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">isLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_symlink</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_directory</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">isDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
<span class="token macro property">#<span class="token directive keyword">ifdef</span> TARGET_WIN32</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
<span class="token macro property">#<span class="token directive keyword">if</span> OF_USING_STD_FS</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_block_file</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">status</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">status</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>block_file<span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">isHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
<span class="token macro property">#<span class="token directive keyword">ifdef</span> TARGET_WIN32</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
	<span class="token keyword">return</span> myFile<span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"."</span> <span class="token operator">&&</span> myFile<span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">".."</span> <span class="token operator">&&</span> myFile<span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofFile<span class="token operator">::</span><span class="token function">setWriteable</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_write <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>add_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_write <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>remove_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Couldn't set write permission on "</span> <span class="token operator">&lt;&lt;</span> myFile <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// deprecated</span>
<span class="token keyword">void</span> ofFile<span class="token operator">::</span><span class="token function">setReadOnly</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">setWriteable</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofFile<span class="token operator">::</span><span class="token function">setReadable</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_read <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>add_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_read <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>remove_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Couldn't set read permission on "</span> <span class="token operator">&lt;&lt;</span> myFile <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofFile<span class="token operator">::</span><span class="token function">setExecutable</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>
<span class="token macro property">#<span class="token directive keyword">if</span> OF_USING_STD_FS</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_exec <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>add_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_exec <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>remove_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_exe <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>add_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">permissions</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>owner_exe <span class="token operator">|</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>perms<span class="token operator">::</span>remove_perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Couldn't set executable permission on "</span> <span class="token operator">&lt;&lt;</span> myFile <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">copyTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> path <span class="token operator">=</span> _path<span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): destination path "</span> <span class="token operator">&lt;&lt;</span> _path <span class="token operator">&lt;&lt;</span> <span class="token string">" is empty"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		ofDirectory tmp<span class="token punctuation">;</span>
		<span class="token comment" spellcheck="true">//don't want to add ofToDataPath to myFile path as it was already done in ofFile::open</span>
		tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>bRelativeToData<span class="token punctuation">,</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): source file "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" does not exist"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment" spellcheck="true">//bRelativeToData is handled here for the destination path - so we pass false to static functions below</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		path <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">if</span><span class="token punctuation">(</span>ofFile<span class="token operator">::</span><span class="token function">doesFileExist</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ofFile tmp<span class="token punctuation">;</span>
			tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				path <span class="token operator">=</span> ofFilePath<span class="token operator">::</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>ofFile<span class="token operator">::</span><span class="token function">doesFileExist</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
				ofFile<span class="token operator">::</span><span class="token function">removeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				<span class="token function">ofLogWarning</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): destination file \""</span> <span class="token operator">&lt;&lt;</span> path <span class="token operator">&lt;&lt;</span> <span class="token string">"\" already exists, set bool overwrite to true if you want to overwrite it"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">try</span><span class="token punctuation">{</span>
		ofDirectory destDir<span class="token punctuation">;</span>
		destDir<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>ofFilePath<span class="token operator">::</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>destDir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ofFilePath<span class="token operator">::</span><span class="token function">createEnclosingDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">copy_file</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span>  <span class="token string">"copyTo(): unable to copy \""</span> <span class="token operator">&lt;&lt;</span> path <span class="token operator">&lt;&lt;</span> <span class="token string">"\":"</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> path <span class="token operator">=</span> _path<span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"moveTo(): destination path is empty"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"moveTo(): source file does not exist"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		path <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>ofFile<span class="token operator">::</span><span class="token function">doesFileExist</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ofFile tmp<span class="token punctuation">;</span>
			tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				path <span class="token operator">=</span> ofFilePath<span class="token operator">::</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>ofFile<span class="token operator">::</span><span class="token function">doesFileExist</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
				ofFile<span class="token operator">::</span><span class="token function">removeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				<span class="token function">ofLogWarning</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): destination file \""</span> <span class="token operator">&lt;&lt;</span> path <span class="token operator">&lt;&lt;</span> <span class="token string">"\" already exists, set bool overwrite to true if you want to overwrite it"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">auto</span> mode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>mode<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>mode <span class="token operator">!=</span> ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">changeMode</span><span class="token punctuation">(</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		ofDirectory destDir<span class="token punctuation">;</span>
		destDir<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>ofFilePath<span class="token operator">::</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>destDir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ofFilePath<span class="token operator">::</span><span class="token function">createEnclosingDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">rename</span><span class="token punctuation">(</span>myFile<span class="token punctuation">,</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
		myFile <span class="token operator">=</span> path<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>mode <span class="token operator">!=</span> ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">changeMode</span><span class="token punctuation">(</span>mode<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"moveTo(): unable to move \""</span> <span class="token operator">&lt;&lt;</span> path <span class="token operator">&lt;&lt;</span> <span class="token string">"\":"</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">renameTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">moveTo</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>bRelativeToData<span class="token punctuation">,</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">bool</span> recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>myFile<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"remove(): file path is empty"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"remove(): file does not exist"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>mode<span class="token operator">!=</span>Reference<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">open</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Reference<span class="token punctuation">,</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">remove_all</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">remove</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"remove(): unable to remove \""</span> <span class="token operator">&lt;&lt;</span> myFile <span class="token operator">&lt;&lt;</span> <span class="token string">"\": "</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
uint64_t ofFile<span class="token operator">::</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">file_size</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFile"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"getSize(): unable to get size of \""</span> <span class="token operator">&lt;&lt;</span> myFile <span class="token operator">&lt;&lt;</span> <span class="token string">"\": "</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">>=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// ofFile Static Methods</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>

<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">copyFromTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> pathSrc<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> pathDst<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span>  <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
	ofFile tmp<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span> bRelativeToData <span class="token punctuation">)</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>pathSrc<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>pathSrc<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>pathDst<span class="token punctuation">,</span>bRelativeToData<span class="token punctuation">,</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//be careful with slashes here - appending a slash when moving a folder will causes mad headaches</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">moveFromTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> pathSrc<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> pathDst<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
	ofFile tmp<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span> bRelativeToData <span class="token punctuation">)</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>pathSrc<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>pathSrc<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>pathDst<span class="token punctuation">,</span> bRelativeToData<span class="token punctuation">,</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">doesFileExist</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _fPath<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
	ofFile tmp<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>_fPath<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>_fPath<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">!</span>_fPath<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> tmp<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFile<span class="token operator">::</span><span class="token function">removeFile</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
	ofFile tmp<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>_path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>_path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// -- ofDirectory</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
ofDirectory<span class="token operator">::</span><span class="token function">ofDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	showHidden <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
ofDirectory<span class="token operator">::</span><span class="token function">ofDirectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
	showHidden <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
	originalDirectory <span class="token operator">=</span> ofFilePath<span class="token operator">::</span><span class="token function">getPathForDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	files<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	myDir <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token function">ofToDataPath</span><span class="token punctuation">(</span>originalDirectory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
	originalDirectory <span class="token operator">=</span> ofFilePath<span class="token operator">::</span><span class="token function">getPathForDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	files<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	myDir <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>originalDirectory<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	myDir <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">bool</span> recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>myDir<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">try</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>
				std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">create_directories</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">create_directory</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"create(): "</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>myDir <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">||</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofDirectory<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> myDir<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofDirectory<span class="token operator">::</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">canonical</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">absolute</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">absolute</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">canRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>myDir<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">canRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">canWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>myDir<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">canWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">canExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>myDir<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">canExecute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">isHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>myDir<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">setWriteable</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>myDir<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setWriteable</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// deprecated</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">setReadOnly</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">setWriteable</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">setReadable</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>myDir<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setReadable</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">setExecutable</span><span class="token punctuation">(</span><span class="token keyword">bool</span> flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>myDir<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setExecutable</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">setShowHidden</span><span class="token punctuation">(</span><span class="token keyword">bool</span> showHidden<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">></span>showHidden <span class="token operator">=</span> showHidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_directory</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">copyTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> path <span class="token operator">=</span> _path<span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>myDir<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): source path is empty"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): source directory does not exist"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_directory</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): source path is not a directory"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		path <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>ofDirectory<span class="token operator">::</span><span class="token function">doesDirectoryExist</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
			ofDirectory<span class="token operator">::</span><span class="token function">removeDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token function">ofLogWarning</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"copyTo(): dest \""</span> <span class="token operator">&lt;&lt;</span> path <span class="token operator">&lt;&lt;</span> <span class="token string">"\" already exists, set bool overwrite to true to overwrite it"</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment" spellcheck="true">//our path is bRelativeToData handled from above - so can't open via the constructor approach </span>
	ofDirectory dir<span class="token punctuation">;</span>
	dir<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	dir<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">// Iterate through the source directory</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span>directory_iterator <span class="token function">file</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">;</span> file <span class="token operator">!=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">directory_iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>file<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">auto</span> currentPath <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">absolute</span><span class="token punctuation">(</span>file<span class="token operator">-</span><span class="token operator">></span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">auto</span> dst <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">/</span> currentPath<span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_directory</span><span class="token punctuation">(</span>currentPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ofDirectory <span class="token function">current</span><span class="token punctuation">(</span>currentPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment" spellcheck="true">// Found directory: Recursion</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>current<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>dst<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			ofFile tmp<span class="token punctuation">;</span>
			tmp<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>file<span class="token operator">-</span><span class="token operator">></span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
			tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>dst<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">copyTo</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>bRelativeToData<span class="token punctuation">,</span>overwrite<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">renameTo</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">moveTo</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> bRelativeToData<span class="token punctuation">,</span> overwrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">bool</span> recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">remove_all</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">canonical</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">remove</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">canonical</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"remove(): unable to remove file/directory: "</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">allowExt</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&</span> extension<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>extension <span class="token operator">==</span> <span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogWarning</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"allowExt(): wildcard extension * is deprecated"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	extensions<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">ofToLower</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
std<span class="token operator">::</span>size_t ofDirectory<span class="token operator">::</span><span class="token function">listDir</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&</span> directory<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">open</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">listDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
std<span class="token operator">::</span>size_t ofDirectory<span class="token operator">::</span><span class="token function">listDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	files<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"listDir(): directory path is empty"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"listDir:() source directory does not exist: \""</span> <span class="token operator">&lt;&lt;</span> myDir <span class="token operator">&lt;&lt;</span> <span class="token string">"\""</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	std<span class="token operator">::</span>filesystem<span class="token operator">::</span>directory_iterator end_iter<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span> <span class="token operator">&&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_directory</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>directory_iterator <span class="token function">dir_iter</span><span class="token punctuation">(</span>myDir<span class="token punctuation">)</span> <span class="token punctuation">;</span> dir_iter <span class="token operator">!=</span> end_iter <span class="token punctuation">;</span> <span class="token operator">++</span>dir_iter<span class="token punctuation">)</span><span class="token punctuation">{</span>
			files<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>dir_iter<span class="token operator">-</span><span class="token operator">></span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"listDir:() source directory does not exist: \""</span> <span class="token operator">&lt;&lt;</span> myDir <span class="token operator">&lt;&lt;</span> <span class="token string">"\""</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>showHidden<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofRemove</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> file<span class="token punctuation">.</span><span class="token function">isHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>extensions<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> <span class="token operator">!</span><span class="token function">ofContains</span><span class="token punctuation">(</span>extensions<span class="token punctuation">,</span> <span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">ofRemove</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&</span><span class="token punctuation">]</span><span class="token punctuation">(</span>ofFile <span class="token operator">&</span> file<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span>extensions<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> extensions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ofToLower</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> extensions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>        

	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ofGetLogLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> OF_LOG_VERBOSE<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">ofLogVerbose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"\t"</span> <span class="token operator">&lt;&lt;</span> <span class="token function">getName</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">ofLogVerbose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"listed "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" files in \""</span> <span class="token operator">&lt;&lt;</span> originalDirectory <span class="token operator">&lt;&lt;</span> <span class="token string">"\""</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofDirectory<span class="token operator">::</span><span class="token function">getOriginalDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> originalDirectory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofDirectory<span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t position<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> files<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofDirectory<span class="token operator">::</span><span class="token function">getPath</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t position<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> originalDirectory <span class="token operator">+</span> <span class="token function">getName</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
ofFile ofDirectory<span class="token operator">::</span><span class="token function">getFile</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t position<span class="token punctuation">,</span> ofFile<span class="token operator">::</span>Mode mode<span class="token punctuation">,</span> <span class="token keyword">bool</span> binary<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	ofFile file <span class="token operator">=</span> files<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">;</span>
	file<span class="token punctuation">.</span><span class="token function">changeMode</span><span class="token punctuation">(</span>mode<span class="token punctuation">,</span> binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> file<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ofFile ofDirectory<span class="token operator">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t position<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getFile</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">const</span> vector<span class="token operator">&lt;</span>ofFile<span class="token operator">></span> <span class="token operator">&</span> ofDirectory<span class="token operator">::</span><span class="token function">getFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>files<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> <span class="token operator">!</span>myDir<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">const_cast</span><span class="token operator">&lt;</span>ofDirectory<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">listDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> files<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">getShowHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> showHidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token function">natural</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile<span class="token operator">&</span> a<span class="token punctuation">,</span> <span class="token keyword">const</span> ofFile<span class="token operator">&</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	string aname <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">getBaseName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bname <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">getBaseName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> aint <span class="token operator">=</span> <span class="token function">ofToInt</span><span class="token punctuation">(</span>aname<span class="token punctuation">)</span><span class="token punctuation">,</span> bint <span class="token operator">=</span> <span class="token function">ofToInt</span><span class="token punctuation">(</span>bname<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ofToString</span><span class="token punctuation">(</span>aint<span class="token punctuation">)</span> <span class="token operator">==</span> aname <span class="token operator">&&</span> <span class="token function">ofToString</span><span class="token punctuation">(</span>bint<span class="token punctuation">)</span> <span class="token operator">==</span> bname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> aint <span class="token operator">&lt;</span> bint<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> a <span class="token operator">&lt;</span> b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token function">byDate</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofFile<span class="token operator">&</span> a<span class="token punctuation">,</span> <span class="token keyword">const</span> ofFile<span class="token operator">&</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">auto</span> ta <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">last_write_time</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> tb <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">last_write_time</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> ta <span class="token operator">&lt;</span> tb<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">sortByDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> <span class="token operator">!</span>myDir<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">listDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">ofSort</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> byDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">void</span> ofDirectory<span class="token operator">::</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>files<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> <span class="token operator">!</span>myDir<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">listDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">ofSort</span><span class="token punctuation">(</span>files<span class="token punctuation">,</span> natural<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
ofDirectory ofDirectory<span class="token operator">::</span><span class="token function">getSorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	ofDirectory <span class="token function">sorted</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	sorted<span class="token punctuation">.</span><span class="token function">listDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	sorted<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> sorted<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
std<span class="token operator">::</span>size_t ofDirectory<span class="token operator">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> files<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">int</span> ofDirectory<span class="token operator">::</span><span class="token function">numFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// ofDirectory Static Methods</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">removeDirectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">,</span> <span class="token keyword">bool</span> deleteIfNotEmpty<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> path <span class="token operator">=</span> _path<span class="token punctuation">;</span>

	ofFile dirToRemove<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		dirToRemove<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		dirToRemove<span class="token punctuation">.</span><span class="token function">openFromCWD</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">return</span> dirToRemove<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>deleteIfNotEmpty<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">createDirectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _dirPath<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> dirPath <span class="token operator">=</span> _dirPath<span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		dirPath <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment" spellcheck="true">// on OSX,std::filesystem::create_directories seems to return false *if* the path has folders that already exist</span>
	<span class="token comment" spellcheck="true">// and true if it doesn't</span>
	<span class="token comment" spellcheck="true">// so to avoid unnecessary warnings on OSX, we check if it exists here:</span>
	
	<span class="token keyword">bool</span> bDoesExistAlready <span class="token operator">=</span> ofDirectory<span class="token operator">::</span><span class="token function">doesDirectoryExist</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bDoesExistAlready<span class="token punctuation">)</span><span class="token punctuation">{</span>
		
		<span class="token keyword">bool</span> success <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>recursive<span class="token punctuation">)</span><span class="token punctuation">{</span>
				success <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">create_directory</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				success <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">create_directories</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"createDirectory(): couldn't create directory \""</span> <span class="token operator">&lt;&lt;</span> dirPath <span class="token operator">&lt;&lt;</span> <span class="token string">"\": "</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> success<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment" spellcheck="true">// no need to create it - it already exists.</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">doesDirectoryExist</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _dirPath<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> dirPath <span class="token operator">=</span> _dirPath<span class="token punctuation">;</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dirPath <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span> <span class="token operator">&&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_directory</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>exception <span class="token operator">&</span> except<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofDirectory"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"doesDirectoryExist(): couldn't find directory \""</span> <span class="token operator">&lt;&lt;</span> dirPath <span class="token operator">&lt;&lt;</span> <span class="token string">"\": "</span> <span class="token operator">&lt;&lt;</span> except<span class="token punctuation">.</span><span class="token function">what</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token function">isDirectoryEmpty</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _dirPath<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> dirPath <span class="token operator">=</span> _dirPath<span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		dirPath <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dirPath<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span> <span class="token operator">&&</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">is_directory</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">directory_iterator</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span> <span class="token operator">==</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">directory_iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofDirectory <span class="token operator">&</span> dir<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> dir<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofDirectory <span class="token operator">&</span> dir<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> dir<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofDirectory <span class="token operator">&</span> dir<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> dir<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofDirectory <span class="token operator">&</span> dir<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> dir<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">const</span> ofDirectory <span class="token operator">&</span> dir<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> dir<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofDirectory<span class="token operator">::</span><span class="token keyword">operator</span><span class="token operator">>=</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofDirectory <span class="token operator">&</span> dir<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> dir<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
vector<span class="token operator">&lt;</span>ofFile<span class="token operator">></span><span class="token operator">::</span>const_iterator ofDirectory<span class="token operator">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
vector<span class="token operator">&lt;</span>ofFile<span class="token operator">></span><span class="token operator">::</span>const_iterator ofDirectory<span class="token operator">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> files<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
vector<span class="token operator">&lt;</span>ofFile<span class="token operator">></span><span class="token operator">::</span>const_reverse_iterator ofDirectory<span class="token operator">::</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
vector<span class="token operator">&lt;</span>ofFile<span class="token operator">></span><span class="token operator">::</span>const_reverse_iterator ofDirectory<span class="token operator">::</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> files<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">// -- ofFilePath</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">addLeadingSlash</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">auto</span> path <span class="token operator">=</span> _path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> sep <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">make_preferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ofToString</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> sep<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			path <span class="token operator">=</span> <span class="token punctuation">(</span>sep <span class="token operator">/</span> path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> path<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">addTrailingSlash</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">auto</span> path <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>_path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">make_preferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> sep <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">make_preferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">ofToString</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> sep<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			path <span class="token operator">=</span> <span class="token punctuation">(</span>path <span class="token operator">/</span> sep<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> path<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getFileExt</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> filename<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">removeExt</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> filename<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> ofFilePath<span class="token operator">::</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBaseName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getPathForDirectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment" spellcheck="true">// if a trailing slash is missing from a path, this will clean it up</span>
	<span class="token comment" spellcheck="true">// if it's a windows-style "\" path it will add a "\"</span>
	<span class="token comment" spellcheck="true">// if it's a unix-style "/" path it will add a "/"</span>
	<span class="token keyword">auto</span> sep <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">make_preferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> <span class="token function">ofToString</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span>sep<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>path <span class="token operator">/</span> sep<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">removeTrailingSlash</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _path<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">auto</span> path <span class="token operator">=</span> _path<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&&</span> <span class="token punctuation">(</span>path<span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'/'</span> <span class="token operator">||</span> path<span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		path <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> path<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _filePath<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
    std<span class="token operator">::</span>string filePath <span class="token operator">=</span> _filePath<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
        filePath <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>_filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getBaseName</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> filePath<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">ofFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span>ofFile<span class="token operator">::</span>Reference<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBaseName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> _filePath<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
    std<span class="token operator">::</span>string filePath <span class="token operator">=</span> _filePath<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		filePath <span class="token operator">=</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">addTrailingSlash</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFilePath<span class="token operator">::</span><span class="token function">createEnclosingDirectory</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> filePath<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRecursive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> ofDirectory<span class="token operator">::</span><span class="token function">createDirectory</span><span class="token punctuation">(</span>ofFilePath<span class="token operator">::</span><span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">,</span> bRelativeToData<span class="token punctuation">,</span> bRecursive<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path<span class="token punctuation">,</span> <span class="token keyword">bool</span> bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>bRelativeToData<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">ofToDataPath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">try</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">canonical</span><span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">absolute</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">absolute</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">bool</span> ofFilePath<span class="token operator">::</span><span class="token function">isAbsolute</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is_absolute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getCurrentWorkingDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">current_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path1<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">&</span> path2<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>path1<span class="token punctuation">)</span> <span class="token operator">/</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">path</span><span class="token punctuation">(</span>path2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getCurrentExePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token macro property">#<span class="token directive keyword">if</span> defined(TARGET_LINUX) || defined(TARGET_ANDROID)</span>
		<span class="token keyword">char</span> buff<span class="token punctuation">[</span>FILENAME_MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>
		ssize_t size <span class="token operator">=</span> <span class="token function">readlink</span><span class="token punctuation">(</span><span class="token string">"/proc/self/exe"</span><span class="token punctuation">,</span> buff<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFilePath"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"getCurrentExePath(): readlink failed with error "</span> <span class="token operator">&lt;&lt;</span> errno<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{</span>
			buff<span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> buff<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token macro property">#<span class="token directive keyword">elif</span> defined(TARGET_OSX)</span>
		<span class="token keyword">char</span> path<span class="token punctuation">[</span>FILENAME_MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>
		uint32_t size <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">_NSGetExecutablePath</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token operator">&</span>size<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFilePath"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"getCurrentExePath(): path buffer too small, need size "</span> <span class="token operator">&lt;&lt;</span>  size<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> path<span class="token punctuation">;</span>
	<span class="token macro property">#<span class="token directive keyword">elif</span> defined(TARGET_WIN32)</span>
		vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span> <span class="token function">executablePath</span><span class="token punctuation">(</span>MAX_PATH<span class="token punctuation">)</span><span class="token punctuation">;</span>
		DWORD result <span class="token operator">=</span> <span class="token operator">::</span><span class="token function">GetModuleFileNameA</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token operator">&</span>executablePath<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>DWORD<span class="token operator">></span><span class="token punctuation">(</span>executablePath<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">ofLogError</span><span class="token punctuation">(</span><span class="token string">"ofFilePath"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"getCurrentExePath(): couldn't get path, GetModuleFileNameA failed"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">string</span><span class="token punctuation">(</span>executablePath<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> executablePath<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token macro property">#<span class="token directive keyword">endif</span></span>
	<span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getCurrentExeDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getEnclosingDirectory</span><span class="token punctuation">(</span><span class="token function">getCurrentExePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------</span>
string ofFilePath<span class="token operator">::</span><span class="token function">getUserHomeDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token macro property">#<span class="token directive keyword">ifdef</span> TARGET_WIN32</span>
		<span class="token comment" spellcheck="true">// getenv will return any Environent Variable on Windows</span>
		<span class="token comment" spellcheck="true">// USERPROFILE is the key on Windows 7 but it might be HOME</span>
		<span class="token comment" spellcheck="true">// in other flavours of windows...need to check XP and NT...</span>
		<span class="token keyword">return</span> <span class="token function">ofGetEnv</span><span class="token punctuation">(</span><span class="token string">"USERPROFILE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token macro property">#<span class="token directive keyword">elif</span> !defined(TARGET_EMSCRIPTEN)</span>
		<span class="token keyword">struct</span> passwd <span class="token operator">*</span> pw <span class="token operator">=</span> <span class="token function">getpwuid</span><span class="token punctuation">(</span><span class="token function">getuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> pw<span class="token operator">-</span><span class="token operator">></span>pw_dir<span class="token punctuation">;</span>
	<span class="token macro property">#<span class="token directive keyword">else</span></span>
		<span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
	<span class="token macro property">#<span class="token directive keyword">endif</span></span>
<span class="token punctuation">}</span>

string ofFilePath<span class="token operator">::</span><span class="token function">makeRelative</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> from<span class="token punctuation">,</span> <span class="token keyword">const</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path <span class="token operator">&</span> to<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">auto</span> pathFrom <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">absolute</span><span class="token punctuation">(</span> from <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> pathTo <span class="token operator">=</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span><span class="token function">absolute</span><span class="token punctuation">(</span> to <span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path ret<span class="token punctuation">;</span>
	std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">::</span>const_iterator <span class="token function">itrFrom</span><span class="token punctuation">(</span> pathFrom<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">itrTo</span><span class="token punctuation">(</span> pathTo<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">// Find common base</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">::</span>const_iterator <span class="token function">toEnd</span><span class="token punctuation">(</span> pathTo<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fromEnd</span><span class="token punctuation">(</span> pathFrom<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span> itrFrom <span class="token operator">!=</span> fromEnd <span class="token operator">&&</span> itrTo <span class="token operator">!=</span> toEnd <span class="token operator">&&</span> <span class="token operator">*</span>itrFrom <span class="token operator">==</span> <span class="token operator">*</span>itrTo<span class="token punctuation">;</span> <span class="token operator">++</span>itrFrom<span class="token punctuation">,</span> <span class="token operator">++</span>itrTo <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">// Navigate backwards in directory to reach previously found base</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span> std<span class="token operator">::</span>filesystem<span class="token operator">::</span>path<span class="token operator">::</span>const_iterator <span class="token function">fromEnd</span><span class="token punctuation">(</span> pathFrom<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> itrFrom <span class="token operator">!=</span> fromEnd<span class="token punctuation">;</span> <span class="token operator">++</span>itrFrom <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token operator">*</span>itrFrom<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"."</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
			ret <span class="token operator">/</span><span class="token operator">=</span> <span class="token string">".."</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment" spellcheck="true">// Now navigate down the directory branch</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token punctuation">;</span> itrTo <span class="token operator">!=</span> pathTo<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token operator">++</span>itrTo <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span> itrTo<span class="token operator">-</span><span class="token operator">></span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			ret <span class="token operator">/</span><span class="token operator">=</span> <span class="token operator">*</span>itrTo<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> ret<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div></div></div></div></div></div><script defer src="/_nuxt/payloads/1583940179515/openframeworks/utils/ofFileUtils_cpp/payload.js"></script><script src="/_nuxt/1222c887b819d0202cfa.js" defer></script><script src="/_nuxt/adc32956be059d7527f6.js" defer></script><script src="/_nuxt/e2974c46edd15e353a99.js" defer></script><script src="/_nuxt/f8d94d1c92ade1d8a6da.js" defer></script><script src="/_nuxt/c01572c3f985d7f6c287.js" defer></script>
  </body>
</html>
