<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>ofNoise.h | openframeworks | ofDocs</title><meta data-n-head="ssr" data-hid="description" name="description" content="openFrameworks documentation and examples browser"><meta data-n-head="ssr" data-hid="keyword" name="keyword" content=""><meta data-n-head="ssr" property="og:description" content="openFrameworks documentation and examples browser" vmid="og:description"><meta data-n-head="ssr" property="og:title" content="ofNoise.h | openframeworks | ofDocs" vmid="og:title"><meta data-n-head="ssr" property="og:image" content="/files/images/ofw-logo.png" vmid="og:image"><link rel="preload" href="/_nuxt/3213b67383225fc2f59b.js" as="script"><link rel="preload" href="/_nuxt/5fe5bba000836bc4a25f.js" as="script"><link rel="preload" href="/_nuxt/fe12c0cb7395fa1032f4.css" as="style"><link rel="preload" href="/_nuxt/f8d94d1c92ade1d8a6da.js" as="script"><link rel="preload" href="/_nuxt/a24b354526a25539cceb.css" as="style"><link rel="preload" href="/_nuxt/9a7e20c23e9625feab77.js" as="script"><link rel="preload" href="/_nuxt/21c4d0f9583096394838.css" as="style"><link rel="preload" href="/_nuxt/d1291586b31fa28ca9d5.js" as="script"><link rel="stylesheet" href="/_nuxt/fe12c0cb7395fa1032f4.css"><link rel="stylesheet" href="/_nuxt/a24b354526a25539cceb.css"><link rel="stylesheet" href="/_nuxt/21c4d0f9583096394838.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="app" class="unknown"><div id="menu"><h1 class="of"><div class="inner"><span><a href="/" class="nuxt-link-active"><div class="txt"><span class="docs f7 questrial">ofDocs </span><span class="version">0.11.0</span></div></a></span></div></h1><div id="search"><div class="inner"><div class="field text"><div class="field-inner"><svg viewbox="0 0 36 36" x="0px" y="0px" enable-background="new 0 0 36 36" xml:space="preserve"><path d="M35.525,31.228l-8.88-8.882c1.444-2.238,2.298-4.895,2.298-7.752c0-7.909-6.438-14.343-14.346-14.343						c-7.911,0-14.343,6.434-14.343,14.343c0,7.911,6.433,14.344,14.343,14.344c2.856,0,5.513-0.849,7.752-2.294l8.88,8.88						c0.295,0.297,0.782,0.297,1.076,0l3.22-3.221C35.824,32.008,35.824,31.523,35.525,31.228z M4.81,14.593						c0-5.396,4.391-9.788,9.788-9.788c5.398,0,9.787,4.392,9.787,9.788c0,5.398-4.389,9.789-9.787,9.789						C9.2,24.382,4.81,19.991,4.81,14.593z"></path></svg><!----><div class="text-wrapper"><input id="search_field" name="search_field" placeholder="Search (Alt+F)" autocomplete="off" tabindex="0"></div><!----><!----></div></div></div><div id="results" class="mt1"></div></div><div id="lists" class="menu-inner mt1"><div class="inner"><div class="item documentation"><a href="/documentation/" title="/documentation/"><i class="ico" style="display:none"></i><span>documentation</span><span style="display:none">documentation</span></a><!----></div><div class="item examples"><a href="/examples/" title="/examples/"><i class="ico" style="display:none"></i><span>examples</span><span style="display:none">examples</span></a><!----></div><div class="item openframeworks"><a href="/openframeworks/" title="/openframeworks/" class="nuxt-link-active"><i class="ico" style="display:none"></i><span>openFrameworks</span><span style="display:none">openframeworks</span></a><div class="list"><div class="item 3d"><a href="/openframeworks/3d/" title="/openframeworks/3d/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>3d</span></a><!----></div><div class="item app"><a href="/openframeworks/app/" title="/openframeworks/app/"><i class="ico" style="display:none">web</i><span style="display:none"></span><span>app</span></a><!----></div><div class="item communication"><a href="/openframeworks/communication/" title="/openframeworks/communication/"><i class="ico" style="display:none">language</i><span style="display:none"></span><span>communication</span></a><!----></div><div class="item events"><a href="/openframeworks/events/" title="/openframeworks/events/"><i class="ico" style="display:none">question_answer</i><span style="display:none"></span><span>events</span></a><!----></div><div class="item gl"><a href="/openframeworks/gl/" title="/openframeworks/gl/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>gl</span></a><!----></div><div class="item graphics"><a href="/openframeworks/graphics/" title="/openframeworks/graphics/"><i class="ico" style="display:none">category</i><span style="display:none"></span><span>graphics</span></a><!----></div><div class="item math"><a href="/openframeworks/math/" title="/openframeworks/math/"><i class="ico" style="display:none">border_clear</i><span style="display:none"></span><span>math</span></a><!----></div><div class="item sound"><a href="/openframeworks/sound/" title="/openframeworks/sound/"><i class="ico" style="display:none">volume_up</i><span style="display:none"></span><span>sound</span></a><!----></div><div class="item types"><a href="/openframeworks/types/" title="/openframeworks/types/"><i class="ico" style="display:none">ring_volume</i><span style="display:none"></span><span>types</span></a><!----></div><div class="item utils"><a href="/openframeworks/utils/" title="/openframeworks/utils/" class="nuxt-link-active"><i class="ico" style="display:none">build</i><span style="display:none"></span><span>utils</span></a><div class="list"><div class="item ofConstants.h"><a href="/openframeworks/utils/ofConstants_h" title="/openframeworks/utils/ofConstants.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofConstants.h</span></a><!----></div><div class="item ofFileUtils.cpp"><a href="/openframeworks/utils/ofFileUtils_cpp" title="/openframeworks/utils/ofFileUtils.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFileUtils.cpp</span></a><!----></div><div class="item ofFileUtils.h"><a href="/openframeworks/utils/ofFileUtils_h" title="/openframeworks/utils/ofFileUtils.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFileUtils.h</span></a><!----></div><div class="item ofFpsCounter.cpp"><a href="/openframeworks/utils/ofFpsCounter_cpp" title="/openframeworks/utils/ofFpsCounter.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFpsCounter.cpp</span></a><!----></div><div class="item ofFpsCounter.h"><a href="/openframeworks/utils/ofFpsCounter_h" title="/openframeworks/utils/ofFpsCounter.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFpsCounter.h</span></a><!----></div><div class="item ofJson.h"><a href="/openframeworks/utils/ofJson_h" title="/openframeworks/utils/ofJson.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofJson.h</span></a><!----></div><div class="item ofLog.cpp"><a href="/openframeworks/utils/ofLog_cpp" title="/openframeworks/utils/ofLog.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofLog.cpp</span></a><!----></div><div class="item ofLog.h"><a href="/openframeworks/utils/ofLog_h" title="/openframeworks/utils/ofLog.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofLog.h</span></a><!----></div><div class="item ofMatrixStack.cpp"><a href="/openframeworks/utils/ofMatrixStack_cpp" title="/openframeworks/utils/ofMatrixStack.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofMatrixStack.cpp</span></a><!----></div><div class="item ofMatrixStack.h"><a href="/openframeworks/utils/ofMatrixStack_h" title="/openframeworks/utils/ofMatrixStack.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofMatrixStack.h</span></a><!----></div><div class="item ofNoise.h"><a href="/openframeworks/utils/ofNoise_h" title="/openframeworks/utils/ofNoise.h" class="nuxt-link-exact-active nuxt-link-active"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofNoise.h</span></a><div class="list"></div></div><div class="item ofSystemUtils.cpp"><a href="/openframeworks/utils/ofSystemUtils_cpp" title="/openframeworks/utils/ofSystemUtils.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSystemUtils.cpp</span></a><!----></div><div class="item ofSystemUtils.h"><a href="/openframeworks/utils/ofSystemUtils_h" title="/openframeworks/utils/ofSystemUtils.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSystemUtils.h</span></a><!----></div><div class="item ofThread.cpp"><a href="/openframeworks/utils/ofThread_cpp" title="/openframeworks/utils/ofThread.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofThread.cpp</span></a><!----></div><div class="item ofThread.h"><a href="/openframeworks/utils/ofThread_h" title="/openframeworks/utils/ofThread.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofThread.h</span></a><!----></div><div class="item ofThreadChannel.h"><a href="/openframeworks/utils/ofThreadChannel_h" title="/openframeworks/utils/ofThreadChannel.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofThreadChannel.h</span></a><!----></div><div class="item ofTimer.cpp"><a href="/openframeworks/utils/ofTimer_cpp" title="/openframeworks/utils/ofTimer.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofTimer.cpp</span></a><!----></div><div class="item ofTimer.h"><a href="/openframeworks/utils/ofTimer_h" title="/openframeworks/utils/ofTimer.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofTimer.h</span></a><!----></div><div class="item ofURLFileLoader.cpp"><a href="/openframeworks/utils/ofURLFileLoader_cpp" title="/openframeworks/utils/ofURLFileLoader.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofURLFileLoader.cpp</span></a><!----></div><div class="item ofURLFileLoader.h"><a href="/openframeworks/utils/ofURLFileLoader_h" title="/openframeworks/utils/ofURLFileLoader.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofURLFileLoader.h</span></a><!----></div><div class="item ofUtils.cpp"><a href="/openframeworks/utils/ofUtils_cpp" title="/openframeworks/utils/ofUtils.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofUtils.cpp</span></a><!----></div><div class="item ofUtils.h"><a href="/openframeworks/utils/ofUtils_h" title="/openframeworks/utils/ofUtils.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofUtils.h</span></a><!----></div><div class="item ofXml.cpp"><a href="/openframeworks/utils/ofXml_cpp" title="/openframeworks/utils/ofXml.cpp"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofXml.cpp</span></a><!----></div><div class="item ofXml.h"><a href="/openframeworks/utils/ofXml_h" title="/openframeworks/utils/ofXml.h"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofXml.h</span></a><!----></div></div></div><div class="item video"><a href="/openframeworks/video/" title="/openframeworks/video/"><i class="ico" style="display:none">videocam</i><span style="display:none"></span><span>video</span></a><!----></div></div></div><div class="item addons"><a href="/addons/" title="/addons/"><i class="ico" style="display:none">extension</i><span>addons</span><span style="display:none">addons</span></a><!----></div><div class="item guides"><a href="/guides/" title="/guides/"><i class="ico" style="display:none"></i><span>guides</span><span style="display:none">guides</span></a><!----></div></div></div></div><div id="document"><div id="renderer" class="main"><div absolute="/Users/gilbertsinnott/Code/openFrameworks/libs/openFrameworks/utils/ofNoise.h" route="/openframeworks/utils/ofNoise.h" dir="../libs/openFrameworks/utils" ext="h" type="source" id="340" parent="329" siblings="" translations="[object Object]" class="doc-header"><div class="doc-header-inner"><div class="inner"><div class="mt2 mb2"><span class="breadcrumbs"><span class="crumb"><a href="/" class="pink nuxt-link-active">ofDocs</a><span class="chevron right"></span></span><span class="crumb"><a href="/openframeworks/" class="pink nuxt-link-active">openframeworks </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/openframeworks/utils/" class="pink nuxt-link-active">utils </a><!----><span class="chevron right"></span></span><span class="crumb"><!----><span class="link selector"><span>ofNoise.h </span><span class="chevron bottom"></span><select><option value="/openframeworks/utils/ofConstants_h">ofConstants.h</option><option value="/openframeworks/utils/ofFileUtils_cpp">ofFileUtils.cpp</option><option value="/openframeworks/utils/ofFileUtils_h">ofFileUtils.h</option><option value="/openframeworks/utils/ofFpsCounter_cpp">ofFpsCounter.cpp</option><option value="/openframeworks/utils/ofFpsCounter_h">ofFpsCounter.h</option><option value="/openframeworks/utils/ofJson_h">ofJson.h</option><option value="/openframeworks/utils/ofLog_cpp">ofLog.cpp</option><option value="/openframeworks/utils/ofLog_h">ofLog.h</option><option value="/openframeworks/utils/ofMatrixStack_cpp">ofMatrixStack.cpp</option><option value="/openframeworks/utils/ofMatrixStack_h">ofMatrixStack.h</option><option value="/openframeworks/utils/ofNoise_h">ofNoise.h</option><option value="/openframeworks/utils/ofSystemUtils_cpp">ofSystemUtils.cpp</option><option value="/openframeworks/utils/ofSystemUtils_h">ofSystemUtils.h</option><option value="/openframeworks/utils/ofThread_cpp">ofThread.cpp</option><option value="/openframeworks/utils/ofThread_h">ofThread.h</option><option value="/openframeworks/utils/ofThreadChannel_h">ofThreadChannel.h</option><option value="/openframeworks/utils/ofTimer_cpp">ofTimer.cpp</option><option value="/openframeworks/utils/ofTimer_h">ofTimer.h</option><option value="/openframeworks/utils/ofURLFileLoader_cpp">ofURLFileLoader.cpp</option><option value="/openframeworks/utils/ofURLFileLoader_h">ofURLFileLoader.h</option><option value="/openframeworks/utils/ofUtils_cpp">ofUtils.cpp</option><option value="/openframeworks/utils/ofUtils_h">ofUtils.h</option><option value="/openframeworks/utils/ofXml_cpp">ofXml.cpp</option><option value="/openframeworks/utils/ofXml_h">ofXml.h</option></select></span><!----></span></span></div></div></div></div><div id="code-page" static="true" class="markdown"><div id="side-menu"><!----><div id="see-also" filename="utils" absolute="/Users/gilbertsinnott/Code/openFrameworks/libs/openFrameworks/utils" dir="../libs/openFrameworks" route="/openframeworks/utils/" ext="" type="folder" children="330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353" icon="build" parent="195" breadcrumbs="195" class="see-also"><h4>See also</h4><div class="also"><a href="/documentation/utils/"><span class="origin">documentation</span><span class="name">utils</span></a></div></div></div><div id="code-render"><div class="inner"><pre><code><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>


<span class="token comment" spellcheck="true">/*
 * Mesa 3-D graphics library
 * Version:  6.5
 *
 * Copyright (C) 2006  Brian Paul   All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * BRIAN PAUL BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */</span>

<span class="token comment" spellcheck="true">/*
 * SimplexNoise1234
 * Copyright (c) 2003-2005, Stefan Gustavson
 *
 * Contact: stegu@itn.liu.se
 */</span>

<span class="token comment" spellcheck="true">/** \file
    \brief C implementation of Perlin Simplex Noise over 1,2,3, and 4 dimensions.
    \author Stefan Gustavson (stegu@itn.liu.se)
*/</span>

<span class="token comment" spellcheck="true">/*
 * This implementation is "Simplex Noise" as presented by
 * Ken Perlin at a relatively obscure and not often cited course
 * session "Real-Time Shading" at Siggraph 2001 (before real
 * time shading actually took on), under the title "hardware noise".
 * The 3D function is numerically equivalent to his Java reference
 * code available in the PDF course notes, although I re-implemented
 * it from scratch to get more readable code. The 1D, 2D and 4D cases
 * were implemented from scratch by me from Ken Perlin's text.
 *
 * This file has no dependencies on any other file, not even its own
 * header file. The header file is made for use by external code only.
 */</span>

<span class="token macro property">#<span class="token directive keyword">define</span> OFNOISE_FASTFLOOR(x) ( ((x)>0) ? ((int)x) : (((int)x)-1) )</span>

<span class="token comment" spellcheck="true">/*
 * ---------------------------------------------------------------------
 * inline data
 */</span>

<span class="token comment" spellcheck="true">/*
 * Permutation table. This is just a random jumble of all numbers 0-255,
 * repeated twice to avoid wrapping the index at 255 for each lookup.
 * This needs to be exactly the same for all instances on all platforms,
 * so it's easiest to just keep it as inline explicit data.
 * This also removes the need for any initialisation of this class.
 *
 * Note that making this an int[] instead of a char[] might make the
 * code run faster on platforms with a high penalty for unaligned single
 * byte addressing. Intel x86 is generally single-byte-friendly, but
 * some other CPUs are faster with 4-aligned reads.
 * However, a char[] is smaller, which avoids cache trashing, and that
 * is probably the most important aspect on most architectures.
 * This array is accessed a *lot* by the noise functions.
 * A vector-valued noise over 3D accesses it 96 times, and a
 * float-valued 4D noise 64 times. We want this to fit in the cache!
 */</span>
<span class="token keyword">namespace</span><span class="token punctuation">{</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> perm<span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">151</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">137</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token number">131</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">201</span><span class="token punctuation">,</span><span class="token number">95</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">,</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">194</span><span class="token punctuation">,</span><span class="token number">233</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">225</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">69</span><span class="token punctuation">,</span><span class="token number">142</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">240</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span>
  <span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">148</span><span class="token punctuation">,</span><span class="token number">247</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">234</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">197</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">,</span><span class="token number">94</span><span class="token punctuation">,</span><span class="token number">252</span><span class="token punctuation">,</span><span class="token number">219</span><span class="token punctuation">,</span><span class="token number">203</span><span class="token punctuation">,</span><span class="token number">117</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">57</span><span class="token punctuation">,</span><span class="token number">177</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span>
  <span class="token number">88</span><span class="token punctuation">,</span><span class="token number">237</span><span class="token punctuation">,</span><span class="token number">149</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span><span class="token number">174</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">136</span><span class="token punctuation">,</span><span class="token number">171</span><span class="token punctuation">,</span><span class="token number">168</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">,</span><span class="token number">74</span><span class="token punctuation">,</span><span class="token number">165</span><span class="token punctuation">,</span><span class="token number">71</span><span class="token punctuation">,</span><span class="token number">134</span><span class="token punctuation">,</span><span class="token number">139</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">166</span><span class="token punctuation">,</span>
  <span class="token number">77</span><span class="token punctuation">,</span><span class="token number">146</span><span class="token punctuation">,</span><span class="token number">158</span><span class="token punctuation">,</span><span class="token number">231</span><span class="token punctuation">,</span><span class="token number">83</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">229</span><span class="token punctuation">,</span><span class="token number">122</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">211</span><span class="token punctuation">,</span><span class="token number">133</span><span class="token punctuation">,</span><span class="token number">230</span><span class="token punctuation">,</span><span class="token number">220</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">,</span><span class="token number">41</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">245</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">244</span><span class="token punctuation">,</span>
  <span class="token number">102</span><span class="token punctuation">,</span><span class="token number">143</span><span class="token punctuation">,</span><span class="token number">54</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">63</span><span class="token punctuation">,</span><span class="token number">161</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">216</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">73</span><span class="token punctuation">,</span><span class="token number">209</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">132</span><span class="token punctuation">,</span><span class="token number">187</span><span class="token punctuation">,</span><span class="token number">208</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">169</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">196</span><span class="token punctuation">,</span>
  <span class="token number">135</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">,</span><span class="token number">116</span><span class="token punctuation">,</span><span class="token number">188</span><span class="token punctuation">,</span><span class="token number">159</span><span class="token punctuation">,</span><span class="token number">86</span><span class="token punctuation">,</span><span class="token number">164</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token punctuation">,</span><span class="token number">198</span><span class="token punctuation">,</span><span class="token number">173</span><span class="token punctuation">,</span><span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">217</span><span class="token punctuation">,</span><span class="token number">226</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">124</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">202</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">147</span><span class="token punctuation">,</span><span class="token number">118</span><span class="token punctuation">,</span><span class="token number">126</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">82</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">212</span><span class="token punctuation">,</span><span class="token number">207</span><span class="token punctuation">,</span><span class="token number">206</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">227</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">58</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">182</span><span class="token punctuation">,</span><span class="token number">189</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token number">223</span><span class="token punctuation">,</span><span class="token number">183</span><span class="token punctuation">,</span><span class="token number">170</span><span class="token punctuation">,</span><span class="token number">213</span><span class="token punctuation">,</span><span class="token number">119</span><span class="token punctuation">,</span><span class="token number">248</span><span class="token punctuation">,</span><span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">154</span><span class="token punctuation">,</span><span class="token number">163</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span><span class="token number">221</span><span class="token punctuation">,</span><span class="token number">153</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token number">155</span><span class="token punctuation">,</span><span class="token number">167</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span><span class="token number">172</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span>
  <span class="token number">129</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">39</span><span class="token punctuation">,</span><span class="token number">253</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">108</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">79</span><span class="token punctuation">,</span><span class="token number">113</span><span class="token punctuation">,</span><span class="token number">224</span><span class="token punctuation">,</span><span class="token number">232</span><span class="token punctuation">,</span><span class="token number">178</span><span class="token punctuation">,</span><span class="token number">185</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token punctuation">,</span><span class="token number">218</span><span class="token punctuation">,</span><span class="token number">246</span><span class="token punctuation">,</span><span class="token number">97</span><span class="token punctuation">,</span><span class="token number">228</span><span class="token punctuation">,</span>
  <span class="token number">251</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">242</span><span class="token punctuation">,</span><span class="token number">193</span><span class="token punctuation">,</span><span class="token number">238</span><span class="token punctuation">,</span><span class="token number">210</span><span class="token punctuation">,</span><span class="token number">144</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">191</span><span class="token punctuation">,</span><span class="token number">179</span><span class="token punctuation">,</span><span class="token number">162</span><span class="token punctuation">,</span><span class="token number">241</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">145</span><span class="token punctuation">,</span><span class="token number">235</span><span class="token punctuation">,</span><span class="token number">249</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">239</span><span class="token punctuation">,</span><span class="token number">107</span><span class="token punctuation">,</span>
  <span class="token number">49</span><span class="token punctuation">,</span><span class="token number">192</span><span class="token punctuation">,</span><span class="token number">214</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span><span class="token number">181</span><span class="token punctuation">,</span><span class="token number">199</span><span class="token punctuation">,</span><span class="token number">106</span><span class="token punctuation">,</span><span class="token number">157</span><span class="token punctuation">,</span><span class="token number">184</span><span class="token punctuation">,</span> <span class="token number">84</span><span class="token punctuation">,</span><span class="token number">204</span><span class="token punctuation">,</span><span class="token number">176</span><span class="token punctuation">,</span><span class="token number">115</span><span class="token punctuation">,</span><span class="token number">121</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">254</span><span class="token punctuation">,</span>
  <span class="token number">138</span><span class="token punctuation">,</span><span class="token number">236</span><span class="token punctuation">,</span><span class="token number">205</span><span class="token punctuation">,</span><span class="token number">93</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">114</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">72</span><span class="token punctuation">,</span><span class="token number">243</span><span class="token punctuation">,</span><span class="token number">141</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">195</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">215</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span><span class="token number">156</span><span class="token punctuation">,</span><span class="token number">180</span><span class="token punctuation">,</span>
  <span class="token number">151</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">137</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span>
  <span class="token number">131</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">201</span><span class="token punctuation">,</span><span class="token number">95</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">,</span><span class="token number">53</span><span class="token punctuation">,</span><span class="token number">194</span><span class="token punctuation">,</span><span class="token number">233</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">225</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">69</span><span class="token punctuation">,</span><span class="token number">142</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">240</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span>
  <span class="token number">190</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">148</span><span class="token punctuation">,</span><span class="token number">247</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">234</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token number">197</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">,</span><span class="token number">94</span><span class="token punctuation">,</span><span class="token number">252</span><span class="token punctuation">,</span><span class="token number">219</span><span class="token punctuation">,</span><span class="token number">203</span><span class="token punctuation">,</span><span class="token number">117</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">57</span><span class="token punctuation">,</span><span class="token number">177</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span>
  <span class="token number">88</span><span class="token punctuation">,</span><span class="token number">237</span><span class="token punctuation">,</span><span class="token number">149</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span><span class="token number">174</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">125</span><span class="token punctuation">,</span><span class="token number">136</span><span class="token punctuation">,</span><span class="token number">171</span><span class="token punctuation">,</span><span class="token number">168</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">,</span><span class="token number">74</span><span class="token punctuation">,</span><span class="token number">165</span><span class="token punctuation">,</span><span class="token number">71</span><span class="token punctuation">,</span><span class="token number">134</span><span class="token punctuation">,</span><span class="token number">139</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">166</span><span class="token punctuation">,</span>
  <span class="token number">77</span><span class="token punctuation">,</span><span class="token number">146</span><span class="token punctuation">,</span><span class="token number">158</span><span class="token punctuation">,</span><span class="token number">231</span><span class="token punctuation">,</span><span class="token number">83</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">229</span><span class="token punctuation">,</span><span class="token number">122</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">211</span><span class="token punctuation">,</span><span class="token number">133</span><span class="token punctuation">,</span><span class="token number">230</span><span class="token punctuation">,</span><span class="token number">220</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">,</span><span class="token number">41</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">245</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">244</span><span class="token punctuation">,</span>
  <span class="token number">102</span><span class="token punctuation">,</span><span class="token number">143</span><span class="token punctuation">,</span><span class="token number">54</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">63</span><span class="token punctuation">,</span><span class="token number">161</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">216</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">73</span><span class="token punctuation">,</span><span class="token number">209</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">132</span><span class="token punctuation">,</span><span class="token number">187</span><span class="token punctuation">,</span><span class="token number">208</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">169</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">196</span><span class="token punctuation">,</span>
  <span class="token number">135</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">,</span><span class="token number">116</span><span class="token punctuation">,</span><span class="token number">188</span><span class="token punctuation">,</span><span class="token number">159</span><span class="token punctuation">,</span><span class="token number">86</span><span class="token punctuation">,</span><span class="token number">164</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">109</span><span class="token punctuation">,</span><span class="token number">198</span><span class="token punctuation">,</span><span class="token number">173</span><span class="token punctuation">,</span><span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">217</span><span class="token punctuation">,</span><span class="token number">226</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">124</span><span class="token punctuation">,</span><span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">202</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">147</span><span class="token punctuation">,</span><span class="token number">118</span><span class="token punctuation">,</span><span class="token number">126</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">82</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">212</span><span class="token punctuation">,</span><span class="token number">207</span><span class="token punctuation">,</span><span class="token number">206</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">227</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">58</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">182</span><span class="token punctuation">,</span><span class="token number">189</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token number">223</span><span class="token punctuation">,</span><span class="token number">183</span><span class="token punctuation">,</span><span class="token number">170</span><span class="token punctuation">,</span><span class="token number">213</span><span class="token punctuation">,</span><span class="token number">119</span><span class="token punctuation">,</span><span class="token number">248</span><span class="token punctuation">,</span><span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">154</span><span class="token punctuation">,</span><span class="token number">163</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span><span class="token number">221</span><span class="token punctuation">,</span><span class="token number">153</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token number">155</span><span class="token punctuation">,</span><span class="token number">167</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span><span class="token number">172</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span>
  <span class="token number">129</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">39</span><span class="token punctuation">,</span><span class="token number">253</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">108</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">79</span><span class="token punctuation">,</span><span class="token number">113</span><span class="token punctuation">,</span><span class="token number">224</span><span class="token punctuation">,</span><span class="token number">232</span><span class="token punctuation">,</span><span class="token number">178</span><span class="token punctuation">,</span><span class="token number">185</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token punctuation">,</span><span class="token number">218</span><span class="token punctuation">,</span><span class="token number">246</span><span class="token punctuation">,</span><span class="token number">97</span><span class="token punctuation">,</span><span class="token number">228</span><span class="token punctuation">,</span>
  <span class="token number">251</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">242</span><span class="token punctuation">,</span><span class="token number">193</span><span class="token punctuation">,</span><span class="token number">238</span><span class="token punctuation">,</span><span class="token number">210</span><span class="token punctuation">,</span><span class="token number">144</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">191</span><span class="token punctuation">,</span><span class="token number">179</span><span class="token punctuation">,</span><span class="token number">162</span><span class="token punctuation">,</span><span class="token number">241</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">145</span><span class="token punctuation">,</span><span class="token number">235</span><span class="token punctuation">,</span><span class="token number">249</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">239</span><span class="token punctuation">,</span><span class="token number">107</span><span class="token punctuation">,</span>
  <span class="token number">49</span><span class="token punctuation">,</span><span class="token number">192</span><span class="token punctuation">,</span><span class="token number">214</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span><span class="token number">181</span><span class="token punctuation">,</span><span class="token number">199</span><span class="token punctuation">,</span><span class="token number">106</span><span class="token punctuation">,</span><span class="token number">157</span><span class="token punctuation">,</span><span class="token number">184</span><span class="token punctuation">,</span> <span class="token number">84</span><span class="token punctuation">,</span><span class="token number">204</span><span class="token punctuation">,</span><span class="token number">176</span><span class="token punctuation">,</span><span class="token number">115</span><span class="token punctuation">,</span><span class="token number">121</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">254</span><span class="token punctuation">,</span>
  <span class="token number">138</span><span class="token punctuation">,</span><span class="token number">236</span><span class="token punctuation">,</span><span class="token number">205</span><span class="token punctuation">,</span><span class="token number">93</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">114</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">72</span><span class="token punctuation">,</span><span class="token number">243</span><span class="token punctuation">,</span><span class="token number">141</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">195</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">215</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span><span class="token number">156</span><span class="token punctuation">,</span><span class="token number">180</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
 * ---------------------------------------------------------------------
 */</span>

<span class="token comment" spellcheck="true">/*
 * Helper functions to compute gradients-dot-residualvectors (1D to 4D)
 * Note that these generate gradients of more than unit length. To make
 * a close match with the value range of classic Perlin noise, the final
 * noise values need to be rescaled to fit nicely within [-1,1].
 * (The simplex noise functions as such also have different scaling.)
 * Note also that these noise functions are the most practical and useful
 * signed version of Perlin noise. To return values according to the
 * RenderMan specification from the SL noise() and pnoise() functions,
 * the noise values need to be scaled and offset to [0,1], like this:
 * float SLnoise = (SimplexNoise1234::noise(x,y,z) + 1.0) * 0.5;
 */</span>

<span class="token keyword">inline</span> <span class="token keyword">float</span>  <span class="token function">grad1</span><span class="token punctuation">(</span> <span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token keyword">float</span> x <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> hash <span class="token operator">&</span> <span class="token number">15</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> grad <span class="token operator">=</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token punctuation">(</span>h <span class="token operator">&</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">/* Gradient value 1.0, 2.0, ..., 8.0 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">8</span><span class="token punctuation">)</span> grad <span class="token operator">=</span> <span class="token operator">-</span>grad<span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">/* Set a random sign for the gradient */</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span> grad <span class="token operator">*</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment" spellcheck="true">/* Multiply the gradient with the distance */</span>
<span class="token punctuation">}</span>

<span class="token keyword">inline</span> <span class="token keyword">float</span>  <span class="token function">grad2</span><span class="token punctuation">(</span> <span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> hash <span class="token operator">&</span> <span class="token number">7</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">/* Convert low 3 bits of hash code */</span>
	<span class="token keyword">float</span> u <span class="token operator">=</span> h<span class="token operator">&lt;</span><span class="token number">4</span> <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/* into 8 simple gradient directions, */</span>
	<span class="token keyword">float</span> v <span class="token operator">=</span> h<span class="token operator">&lt;</span><span class="token number">4</span> <span class="token operator">?</span> y <span class="token operator">:</span> x<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/* and compute the dot product with (x,y). */</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">-</span>u <span class="token operator">:</span> u<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">-</span><span class="token number">2.0f</span><span class="token operator">*</span>v <span class="token operator">:</span> <span class="token number">2.0f</span><span class="token operator">*</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">inline</span> <span class="token keyword">float</span>  <span class="token function">grad3</span><span class="token punctuation">(</span> <span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y <span class="token punctuation">,</span> <span class="token keyword">float</span> z <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> hash <span class="token operator">&</span> <span class="token number">15</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">/* Convert low 4 bits of hash code into 12 simple */</span>
	<span class="token keyword">float</span> u <span class="token operator">=</span> h<span class="token operator">&lt;</span><span class="token number">8</span> <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* gradient directions, and compute dot product. */</span>
	<span class="token keyword">float</span> v <span class="token operator">=</span> h<span class="token operator">&lt;</span><span class="token number">4</span> <span class="token operator">?</span> y <span class="token operator">:</span> h<span class="token operator">==</span><span class="token number">12</span><span class="token operator">||</span>h<span class="token operator">==</span><span class="token number">14</span> <span class="token operator">?</span> x <span class="token operator">:</span> z<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Fix repeats at h = 12 to 15 */</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">-</span>u <span class="token operator">:</span> u<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">-</span>v <span class="token operator">:</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">inline</span> <span class="token keyword">float</span>  <span class="token function">grad4</span><span class="token punctuation">(</span> <span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span> z<span class="token punctuation">,</span> <span class="token keyword">float</span> t <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> hash <span class="token operator">&</span> <span class="token number">31</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">/* Convert low 5 bits of hash code into 32 simple */</span>
	<span class="token keyword">float</span> u <span class="token operator">=</span> h<span class="token operator">&lt;</span><span class="token number">24</span> <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* gradient directions, and compute dot product. */</span>
	<span class="token keyword">float</span> v <span class="token operator">=</span> h<span class="token operator">&lt;</span><span class="token number">16</span> <span class="token operator">?</span> y <span class="token operator">:</span> z<span class="token punctuation">;</span>
	<span class="token keyword">float</span> w <span class="token operator">=</span> h<span class="token operator">&lt;</span><span class="token number">8</span> <span class="token operator">?</span> z <span class="token operator">:</span> t<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">-</span>u <span class="token operator">:</span> u<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">-</span>v <span class="token operator">:</span> v<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token operator">&</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">-</span>w <span class="token operator">:</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">/* A lookup table to traverse the simplex around a given point in 4D. */</span>
  <span class="token comment" spellcheck="true">/* Details can be found where this table is used, in the 4D noise method. */</span>
  <span class="token comment" spellcheck="true">/* TODO: This should not be required, backport it from Bill's GLSL code! */</span>
<span class="token keyword">namespace</span><span class="token punctuation">{</span>
  <span class="token keyword">unsigned</span> <span class="token keyword">char</span> simplex<span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">/* 1D simplex noise */</span>
<span class="token keyword">inline</span> <span class="token keyword">float</span> <span class="token function">_slang_library_noise1</span> <span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> i0 <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> i1 <span class="token operator">=</span> i0 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">float</span> x0 <span class="token operator">=</span> x <span class="token operator">-</span> i0<span class="token punctuation">;</span>
  <span class="token keyword">float</span> x1 <span class="token operator">=</span> x0 <span class="token operator">-</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
  <span class="token keyword">float</span> t1 <span class="token operator">=</span> <span class="token number">1.0f</span> <span class="token operator">-</span> x1<span class="token operator">*</span>x1<span class="token punctuation">;</span>
  <span class="token keyword">float</span> n0<span class="token punctuation">,</span> n1<span class="token punctuation">;</span>

  <span class="token keyword">float</span> t0 <span class="token operator">=</span> <span class="token number">1.0f</span> <span class="token operator">-</span> x0<span class="token operator">*</span>x0<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">/*  if(t0 &lt; 0.0f) t0 = 0.0f; // this never happens for the 1D case */</span>
  t0 <span class="token operator">*</span><span class="token operator">=</span> t0<span class="token punctuation">;</span>
  n0 <span class="token operator">=</span> t0 <span class="token operator">*</span> t0 <span class="token operator">*</span> <span class="token function">grad1</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>i0 <span class="token operator">&</span> <span class="token number">0xff</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x0<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/*  if(t1 &lt; 0.0f) t1 = 0.0f; // this never happens for the 1D case */</span>
  t1 <span class="token operator">*</span><span class="token operator">=</span> t1<span class="token punctuation">;</span>
  n1 <span class="token operator">=</span> t1 <span class="token operator">*</span> t1 <span class="token operator">*</span> <span class="token function">grad1</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>i1 <span class="token operator">&</span> <span class="token number">0xff</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">/* The maximum value of this noise is 8*(3/4)^4 = 2.53125 */</span>
  <span class="token comment" spellcheck="true">/* A factor of 0.395 would scale to fit exactly within [-1,1], but */</span>
  <span class="token comment" spellcheck="true">/* we want to match PRMan's 1D noise, so we scale it down some more. */</span>
  <span class="token keyword">return</span> <span class="token number">0.25f</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n0 <span class="token operator">+</span> n1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/* 2D simplex noise */</span>
<span class="token keyword">inline</span> <span class="token keyword">float</span> <span class="token function">_slang_library_noise2</span> <span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">constexpr</span> <span class="token keyword">float</span> F2 <span class="token operator">=</span> <span class="token number">0.366025403f</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* F2 = 0.5*(sqrt(3.0)-1.0) */</span>
	<span class="token keyword">constexpr</span> <span class="token keyword">float</span> G2 <span class="token operator">=</span> <span class="token number">0.211324865f</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* G2 = (3.0-Math.sqrt(3.0))/6.0 */</span>

	<span class="token keyword">float</span> n0<span class="token punctuation">,</span> n1<span class="token punctuation">,</span> n2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Noise contributions from the three corners */</span>

    <span class="token comment" spellcheck="true">/* Skew the input space to determine which simplex cell we're in */</span>
	<span class="token keyword">float</span> s <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token operator">*</span>F2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Hairy factor for 2D */</span>
	<span class="token keyword">float</span> xs <span class="token operator">=</span> x <span class="token operator">+</span> s<span class="token punctuation">;</span>
	<span class="token keyword">float</span> ys <span class="token operator">=</span> y <span class="token operator">+</span> s<span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>xs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>ys<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">float</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token operator">+</span>j<span class="token punctuation">)</span><span class="token operator">*</span>G2<span class="token punctuation">;</span>
	<span class="token keyword">float</span> X0 <span class="token operator">=</span> i<span class="token operator">-</span>t<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Unskew the cell origin back to (x,y) space */</span>
	<span class="token keyword">float</span> Y0 <span class="token operator">=</span> j<span class="token operator">-</span>t<span class="token punctuation">;</span>
	<span class="token keyword">float</span> x0 <span class="token operator">=</span> x<span class="token operator">-</span>X0<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* The x,y distances from the cell origin */</span>
	<span class="token keyword">float</span> y0 <span class="token operator">=</span> y<span class="token operator">-</span>Y0<span class="token punctuation">;</span>

	<span class="token keyword">float</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">;</span>
    <span class="token keyword">int</span> ii<span class="token punctuation">,</span> jj<span class="token punctuation">;</span>
	<span class="token keyword">float</span> t0<span class="token punctuation">,</span> t1<span class="token punctuation">,</span> t2<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* For the 2D case, the simplex shape is an equilateral triangle. */</span>
    <span class="token comment" spellcheck="true">/* Determine which simplex we are in. */</span>
    <span class="token keyword">int</span> i1<span class="token punctuation">,</span> j1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for second (middle) corner of simplex in (i,j) coords */</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>x0<span class="token operator">></span>y0<span class="token punctuation">)</span> <span class="token punctuation">{</span>i1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/* lower triangle, XY order: (0,0)->(1,0)->(1,1) */</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>i1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span>      <span class="token comment" spellcheck="true">/* upper triangle, YX order: (0,0)->(0,1)->(1,1) */</span>

    <span class="token comment" spellcheck="true">/* A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and */</span>
    <span class="token comment" spellcheck="true">/* a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where */</span>
    <span class="token comment" spellcheck="true">/* c = (3-sqrt(3))/6 */</span>

    x1 <span class="token operator">=</span> x0 <span class="token operator">-</span> i1 <span class="token operator">+</span> G2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for middle corner in (x,y) unskewed coords */</span>
    y1 <span class="token operator">=</span> y0 <span class="token operator">-</span> j1 <span class="token operator">+</span> G2<span class="token punctuation">;</span>
    x2 <span class="token operator">=</span> x0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">2.0f</span> <span class="token operator">*</span> G2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for last corner in (x,y) unskewed coords */</span>
    y2 <span class="token operator">=</span> y0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">2.0f</span> <span class="token operator">*</span> G2<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* Wrap the integer indices at 256, to avoid indexing perm[] out of bounds */</span>
    ii <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>
    jj <span class="token operator">=</span> j <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* Calculate the contribution from the three corners */</span>
    t0 <span class="token operator">=</span> <span class="token number">0.5f</span> <span class="token operator">-</span> x0<span class="token operator">*</span>x0<span class="token operator">-</span>y0<span class="token operator">*</span>y0<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t0 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n0 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t0 <span class="token operator">*</span><span class="token operator">=</span> t0<span class="token punctuation">;</span>
      n0 <span class="token operator">=</span> t0 <span class="token operator">*</span> t0 <span class="token operator">*</span> <span class="token function">grad2</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x0<span class="token punctuation">,</span> y0<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>

    t1 <span class="token operator">=</span> <span class="token number">0.5f</span> <span class="token operator">-</span> x1<span class="token operator">*</span>x1<span class="token operator">-</span>y1<span class="token operator">*</span>y1<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t1 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n1 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t1 <span class="token operator">*</span><span class="token operator">=</span> t1<span class="token punctuation">;</span>
      n1 <span class="token operator">=</span> t1 <span class="token operator">*</span> t1 <span class="token operator">*</span> <span class="token function">grad2</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>i1<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>j1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    t2 <span class="token operator">=</span> <span class="token number">0.5f</span> <span class="token operator">-</span> x2<span class="token operator">*</span>x2<span class="token operator">-</span>y2<span class="token operator">*</span>y2<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t2 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n2 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t2 <span class="token operator">*</span><span class="token operator">=</span> t2<span class="token punctuation">;</span>
      n2 <span class="token operator">=</span> t2 <span class="token operator">*</span> t2 <span class="token operator">*</span> <span class="token function">grad2</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/* Add contributions from each corner to get the final noise value. */</span>
    <span class="token comment" spellcheck="true">/* The result is scaled to return values in the interval [-1,1]. */</span>
    <span class="token keyword">return</span> <span class="token number">40.0f</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n0 <span class="token operator">+</span> n1 <span class="token operator">+</span> n2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* TODO: The scale factor is preliminary! */</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/* 3D simplex noise */</span>
<span class="token keyword">inline</span> <span class="token keyword">float</span> <span class="token function">_slang_library_noise3</span> <span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span> z<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment" spellcheck="true">/* Simple skewing factors for the 3D case */</span>
	<span class="token keyword">constexpr</span> <span class="token keyword">float</span> F3 <span class="token operator">=</span> <span class="token number">0.333333333f</span><span class="token punctuation">;</span>
	<span class="token keyword">constexpr</span> <span class="token keyword">float</span> G3 <span class="token operator">=</span> <span class="token number">0.166666667f</span><span class="token punctuation">;</span>

	<span class="token keyword">float</span> n0<span class="token punctuation">,</span> n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> n3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Noise contributions from the four corners */</span>

    <span class="token comment" spellcheck="true">/* Skew the input space to determine which simplex cell we're in */</span>
	<span class="token keyword">float</span> s <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">+</span>y<span class="token operator">+</span>z<span class="token punctuation">)</span><span class="token operator">*</span>F3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Very nice and simple skew factor for 3D */</span>
	<span class="token keyword">float</span> xs <span class="token operator">=</span> x<span class="token operator">+</span>s<span class="token punctuation">;</span>
	<span class="token keyword">float</span> ys <span class="token operator">=</span> y<span class="token operator">+</span>s<span class="token punctuation">;</span>
	<span class="token keyword">float</span> zs <span class="token operator">=</span> z<span class="token operator">+</span>s<span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>xs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>ys<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>zs<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">float</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token operator">+</span>j<span class="token operator">+</span>k<span class="token punctuation">)</span><span class="token operator">*</span>G3<span class="token punctuation">;</span>
	<span class="token keyword">float</span> X0 <span class="token operator">=</span> i<span class="token operator">-</span>t<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Unskew the cell origin back to (x,y,z) space */</span>
	<span class="token keyword">float</span> Y0 <span class="token operator">=</span> j<span class="token operator">-</span>t<span class="token punctuation">;</span>
	<span class="token keyword">float</span> Z0 <span class="token operator">=</span> k<span class="token operator">-</span>t<span class="token punctuation">;</span>
	<span class="token keyword">float</span> x0 <span class="token operator">=</span> x<span class="token operator">-</span>X0<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* The x,y,z distances from the cell origin */</span>
	<span class="token keyword">float</span> y0 <span class="token operator">=</span> y<span class="token operator">-</span>Y0<span class="token punctuation">;</span>
	<span class="token keyword">float</span> z0 <span class="token operator">=</span> z<span class="token operator">-</span>Z0<span class="token punctuation">;</span>

	<span class="token keyword">float</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> z1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> z2<span class="token punctuation">,</span> x3<span class="token punctuation">,</span> y3<span class="token punctuation">,</span> z3<span class="token punctuation">;</span>
    <span class="token keyword">int</span> ii<span class="token punctuation">,</span> jj<span class="token punctuation">,</span> kk<span class="token punctuation">;</span>
	<span class="token keyword">float</span> t0<span class="token punctuation">,</span> t1<span class="token punctuation">,</span> t2<span class="token punctuation">,</span> t3<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* For the 3D case, the simplex shape is a slightly irregular tetrahedron. */</span>
    <span class="token comment" spellcheck="true">/* Determine which simplex we are in. */</span>
    <span class="token keyword">int</span> i1<span class="token punctuation">,</span> j1<span class="token punctuation">,</span> k1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for second corner of simplex in (i,j,k) coords */</span>
    <span class="token keyword">int</span> i2<span class="token punctuation">,</span> j2<span class="token punctuation">,</span> k2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for third corner of simplex in (i,j,k) coords */</span>

<span class="token comment" spellcheck="true">/* This code would benefit from a backport from the GLSL version! */</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>x0<span class="token operator">>=</span>y0<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>y0<span class="token operator">>=</span>z0<span class="token punctuation">)</span>
        <span class="token punctuation">{</span> i1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> k2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/* X Y Z order */</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x0<span class="token operator">>=</span>z0<span class="token punctuation">)</span> <span class="token punctuation">{</span> i1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/* X Z Y order */</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span> i1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/* Z X Y order */</span>
      <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* x0&lt;y0 */</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>y0<span class="token operator">&lt;</span>z0<span class="token punctuation">)</span> <span class="token punctuation">{</span> i1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> k2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/* Z Y X order */</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x0<span class="token operator">&lt;</span>z0<span class="token punctuation">)</span> <span class="token punctuation">{</span> i1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> k1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> k2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/* Y Z X order */</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span> i1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j1<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> k1<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j2<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> k2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">/* Y X Z order */</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/* A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z), */</span>
    <span class="token comment" spellcheck="true">/* a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and */</span>
    <span class="token comment" spellcheck="true">/* a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where */</span>
    <span class="token comment" spellcheck="true">/* c = 1/6. */</span>

    x1 <span class="token operator">=</span> x0 <span class="token operator">-</span> i1 <span class="token operator">+</span> G3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for second corner in (x,y,z) coords */</span>
    y1 <span class="token operator">=</span> y0 <span class="token operator">-</span> j1 <span class="token operator">+</span> G3<span class="token punctuation">;</span>
    z1 <span class="token operator">=</span> z0 <span class="token operator">-</span> k1 <span class="token operator">+</span> G3<span class="token punctuation">;</span>
    x2 <span class="token operator">=</span> x0 <span class="token operator">-</span> i2 <span class="token operator">+</span> <span class="token number">2.0f</span><span class="token operator">*</span>G3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for third corner in (x,y,z) coords */</span>
    y2 <span class="token operator">=</span> y0 <span class="token operator">-</span> j2 <span class="token operator">+</span> <span class="token number">2.0f</span><span class="token operator">*</span>G3<span class="token punctuation">;</span>
    z2 <span class="token operator">=</span> z0 <span class="token operator">-</span> k2 <span class="token operator">+</span> <span class="token number">2.0f</span><span class="token operator">*</span>G3<span class="token punctuation">;</span>
    x3 <span class="token operator">=</span> x0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token operator">*</span>G3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for last corner in (x,y,z) coords */</span>
    y3 <span class="token operator">=</span> y0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token operator">*</span>G3<span class="token punctuation">;</span>
    z3 <span class="token operator">=</span> z0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token operator">*</span>G3<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* Wrap the integer indices at 256, to avoid indexing perm[] out of bounds */</span>
    ii <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>
    jj <span class="token operator">=</span> j <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>
    kk <span class="token operator">=</span> k <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* Calculate the contribution from the four corners */</span>
    t0 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x0<span class="token operator">*</span>x0 <span class="token operator">-</span> y0<span class="token operator">*</span>y0 <span class="token operator">-</span> z0<span class="token operator">*</span>z0<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t0 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n0 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t0 <span class="token operator">*</span><span class="token operator">=</span> t0<span class="token punctuation">;</span>
      n0 <span class="token operator">=</span> t0 <span class="token operator">*</span> t0 <span class="token operator">*</span> <span class="token function">grad3</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x0<span class="token punctuation">,</span> y0<span class="token punctuation">,</span> z0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    t1 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x1<span class="token operator">*</span>x1 <span class="token operator">-</span> y1<span class="token operator">*</span>y1 <span class="token operator">-</span> z1<span class="token operator">*</span>z1<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t1 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n1 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t1 <span class="token operator">*</span><span class="token operator">=</span> t1<span class="token punctuation">;</span>
      n1 <span class="token operator">=</span> t1 <span class="token operator">*</span> t1 <span class="token operator">*</span> <span class="token function">grad3</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>i1<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>j1<span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span>k1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> z1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    t2 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x2<span class="token operator">*</span>x2 <span class="token operator">-</span> y2<span class="token operator">*</span>y2 <span class="token operator">-</span> z2<span class="token operator">*</span>z2<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t2 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n2 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t2 <span class="token operator">*</span><span class="token operator">=</span> t2<span class="token punctuation">;</span>
      n2 <span class="token operator">=</span> t2 <span class="token operator">*</span> t2 <span class="token operator">*</span> <span class="token function">grad3</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>i2<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>j2<span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span>k2<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> z2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    t3 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x3<span class="token operator">*</span>x3 <span class="token operator">-</span> y3<span class="token operator">*</span>y3 <span class="token operator">-</span> z3<span class="token operator">*</span>z3<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t3<span class="token operator">&lt;</span><span class="token number">0.0f</span><span class="token punctuation">)</span> n3 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t3 <span class="token operator">*</span><span class="token operator">=</span> t3<span class="token punctuation">;</span>
      n3 <span class="token operator">=</span> t3 <span class="token operator">*</span> t3 <span class="token operator">*</span> <span class="token function">grad3</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x3<span class="token punctuation">,</span> y3<span class="token punctuation">,</span> z3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/* Add contributions from each corner to get the final noise value. */</span>
    <span class="token comment" spellcheck="true">/* The result is scaled to stay just inside [-1,1] */</span>
    <span class="token keyword">return</span> <span class="token number">32.0f</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n0 <span class="token operator">+</span> n1 <span class="token operator">+</span> n2 <span class="token operator">+</span> n3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* TODO: The scale factor is preliminary! */</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/* 4D simplex noise */</span>
<span class="token keyword">inline</span> <span class="token keyword">float</span> <span class="token function">_slang_library_noise4</span> <span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span> z<span class="token punctuation">,</span> <span class="token keyword">float</span> w<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment" spellcheck="true">/* The skewing and unskewing factors are hairy again for the 4D case */</span>
	<span class="token keyword">constexpr</span> <span class="token keyword">float</span> F4 <span class="token operator">=</span> <span class="token number">0.309016994f</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* F4 = (Math.sqrt(5.0)-1.0)/4.0 */</span>
	<span class="token keyword">constexpr</span> <span class="token keyword">float</span> G4 <span class="token operator">=</span> <span class="token number">0.138196601f</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* G4 = (5.0-Math.sqrt(5.0))/20.0 */</span>

	<span class="token keyword">float</span> n0<span class="token punctuation">,</span> n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> n3<span class="token punctuation">,</span> n4<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Noise contributions from the five corners */</span>

    <span class="token comment" spellcheck="true">/* Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in */</span>
	<span class="token keyword">float</span> s <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y <span class="token operator">+</span> z <span class="token operator">+</span> w<span class="token punctuation">)</span> <span class="token operator">*</span> F4<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Factor for 4D skewing */</span>
	<span class="token keyword">float</span> xs <span class="token operator">=</span> x <span class="token operator">+</span> s<span class="token punctuation">;</span>
	<span class="token keyword">float</span> ys <span class="token operator">=</span> y <span class="token operator">+</span> s<span class="token punctuation">;</span>
	<span class="token keyword">float</span> zs <span class="token operator">=</span> z <span class="token operator">+</span> s<span class="token punctuation">;</span>
	<span class="token keyword">float</span> ws <span class="token operator">=</span> w <span class="token operator">+</span> s<span class="token punctuation">;</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>xs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>ys<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>zs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token function">OFNOISE_FASTFLOOR</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">float</span> t <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> j <span class="token operator">+</span> k <span class="token operator">+</span> l<span class="token punctuation">)</span> <span class="token operator">*</span> G4<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Factor for 4D unskewing */</span>
	<span class="token keyword">float</span> X0 <span class="token operator">=</span> i <span class="token operator">-</span> t<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Unskew the cell origin back to (x,y,z,w) space */</span>
	<span class="token keyword">float</span> Y0 <span class="token operator">=</span> j <span class="token operator">-</span> t<span class="token punctuation">;</span>
	<span class="token keyword">float</span> Z0 <span class="token operator">=</span> k <span class="token operator">-</span> t<span class="token punctuation">;</span>
	<span class="token keyword">float</span> W0 <span class="token operator">=</span> l <span class="token operator">-</span> t<span class="token punctuation">;</span>

	<span class="token keyword">float</span> x0 <span class="token operator">=</span> x <span class="token operator">-</span> X0<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/* The x,y,z,w distances from the cell origin */</span>
	<span class="token keyword">float</span> y0 <span class="token operator">=</span> y <span class="token operator">-</span> Y0<span class="token punctuation">;</span>
	<span class="token keyword">float</span> z0 <span class="token operator">=</span> z <span class="token operator">-</span> Z0<span class="token punctuation">;</span>
	<span class="token keyword">float</span> w0 <span class="token operator">=</span> w <span class="token operator">-</span> W0<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* For the 4D case, the simplex is a 4D shape I won't even try to describe. */</span>
    <span class="token comment" spellcheck="true">/* To find out which of the 24 possible simplices we're in, we need to */</span>
    <span class="token comment" spellcheck="true">/* determine the magnitude ordering of x0, y0, z0 and w0. */</span>
    <span class="token comment" spellcheck="true">/* The method below is a good way of finding the ordering of x,y,z,w and */</span>
    <span class="token comment" spellcheck="true">/* then find the correct traversal order for the simplex we're in. */</span>
    <span class="token comment" spellcheck="true">/* First, six pair-wise comparisons are performed between each possible pair */</span>
    <span class="token comment" spellcheck="true">/* of the four coordinates, and the results are used to add up binary bits */</span>
    <span class="token comment" spellcheck="true">/* for an integer index. */</span>
    <span class="token keyword">int</span> c1 <span class="token operator">=</span> <span class="token punctuation">(</span>x0 <span class="token operator">></span> y0<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">32</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c2 <span class="token operator">=</span> <span class="token punctuation">(</span>x0 <span class="token operator">></span> z0<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">16</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c3 <span class="token operator">=</span> <span class="token punctuation">(</span>y0 <span class="token operator">></span> z0<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">8</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c4 <span class="token operator">=</span> <span class="token punctuation">(</span>x0 <span class="token operator">></span> w0<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c5 <span class="token operator">=</span> <span class="token punctuation">(</span>y0 <span class="token operator">></span> w0<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c6 <span class="token operator">=</span> <span class="token punctuation">(</span>z0 <span class="token operator">></span> w0<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> c1 <span class="token operator">+</span> c2 <span class="token operator">+</span> c3 <span class="token operator">+</span> c4 <span class="token operator">+</span> c5 <span class="token operator">+</span> c6<span class="token punctuation">;</span>

    <span class="token keyword">int</span> i1<span class="token punctuation">,</span> j1<span class="token punctuation">,</span> k1<span class="token punctuation">,</span> l1<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* The integer offsets for the second simplex corner */</span>
    <span class="token keyword">int</span> i2<span class="token punctuation">,</span> j2<span class="token punctuation">,</span> k2<span class="token punctuation">,</span> l2<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* The integer offsets for the third simplex corner */</span>
    <span class="token keyword">int</span> i3<span class="token punctuation">,</span> j3<span class="token punctuation">,</span> k3<span class="token punctuation">,</span> l3<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* The integer offsets for the fourth simplex corner */</span>

	<span class="token keyword">float</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> z1<span class="token punctuation">,</span> w1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> z2<span class="token punctuation">,</span> w2<span class="token punctuation">,</span> x3<span class="token punctuation">,</span> y3<span class="token punctuation">,</span> z3<span class="token punctuation">,</span> w3<span class="token punctuation">,</span> x4<span class="token punctuation">,</span> y4<span class="token punctuation">,</span> z4<span class="token punctuation">,</span> w4<span class="token punctuation">;</span>
    <span class="token keyword">int</span> ii<span class="token punctuation">,</span> jj<span class="token punctuation">,</span> kk<span class="token punctuation">,</span> ll<span class="token punctuation">;</span>
	<span class="token keyword">float</span> t0<span class="token punctuation">,</span> t1<span class="token punctuation">,</span> t2<span class="token punctuation">,</span> t3<span class="token punctuation">,</span> t4<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order. */</span>
    <span class="token comment" spellcheck="true">/* Many values of c will never occur, since e.g. x>y>z>w makes x&lt;z, y&lt;w and x&lt;w */</span>
    <span class="token comment" spellcheck="true">/* impossible. Only the 24 indices which have non-zero entries make any sense. */</span>
    <span class="token comment" spellcheck="true">/* We use a thresholding to set the coordinates in turn from the largest magnitude. */</span>
    <span class="token comment" spellcheck="true">/* The number 3 in the "simplex" array is at the position of the largest coordinate. */</span>
    i1 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">3</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    j1 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">3</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    k1 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">3</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    l1 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">3</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">/* The number 2 in the "simplex" array is at the second largest coordinate. */</span>
    i2 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    j2 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    k2 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    l2 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">2</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">/* The number 1 in the "simplex" array is at the second smallest coordinate. */</span>
    i3 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    j3 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    k3 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    l3 <span class="token operator">=</span> simplex<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>=</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">/* The fifth corner has all coordinate offsets = 1, so no need to look that up. */</span>

    x1 <span class="token operator">=</span> x0 <span class="token operator">-</span> i1 <span class="token operator">+</span> G4<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for second corner in (x,y,z,w) coords */</span>
    y1 <span class="token operator">=</span> y0 <span class="token operator">-</span> j1 <span class="token operator">+</span> G4<span class="token punctuation">;</span>
    z1 <span class="token operator">=</span> z0 <span class="token operator">-</span> k1 <span class="token operator">+</span> G4<span class="token punctuation">;</span>
    w1 <span class="token operator">=</span> w0 <span class="token operator">-</span> l1 <span class="token operator">+</span> G4<span class="token punctuation">;</span>
    x2 <span class="token operator">=</span> x0 <span class="token operator">-</span> i2 <span class="token operator">+</span> <span class="token number">2.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for third corner in (x,y,z,w) coords */</span>
    y2 <span class="token operator">=</span> y0 <span class="token operator">-</span> j2 <span class="token operator">+</span> <span class="token number">2.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    z2 <span class="token operator">=</span> z0 <span class="token operator">-</span> k2 <span class="token operator">+</span> <span class="token number">2.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    w2 <span class="token operator">=</span> w0 <span class="token operator">-</span> l2 <span class="token operator">+</span> <span class="token number">2.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    x3 <span class="token operator">=</span> x0 <span class="token operator">-</span> i3 <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for fourth corner in (x,y,z,w) coords */</span>
    y3 <span class="token operator">=</span> y0 <span class="token operator">-</span> j3 <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    z3 <span class="token operator">=</span> z0 <span class="token operator">-</span> k3 <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    w3 <span class="token operator">=</span> w0 <span class="token operator">-</span> l3 <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    x4 <span class="token operator">=</span> x0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">4.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* Offsets for last corner in (x,y,z,w) coords */</span>
    y4 <span class="token operator">=</span> y0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">4.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    z4 <span class="token operator">=</span> z0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">4.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>
    w4 <span class="token operator">=</span> w0 <span class="token operator">-</span> <span class="token number">1.0f</span> <span class="token operator">+</span> <span class="token number">4.0f</span><span class="token operator">*</span>G4<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* Wrap the integer indices at 256, to avoid indexing perm[] out of bounds */</span>
    ii <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>
    jj <span class="token operator">=</span> j <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>
    kk <span class="token operator">=</span> k <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>
    ll <span class="token operator">=</span> l <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/* Calculate the contribution from the five corners */</span>
    t0 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x0<span class="token operator">*</span>x0 <span class="token operator">-</span> y0<span class="token operator">*</span>y0 <span class="token operator">-</span> z0<span class="token operator">*</span>z0 <span class="token operator">-</span> w0<span class="token operator">*</span>w0<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t0 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n0 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t0 <span class="token operator">*</span><span class="token operator">=</span> t0<span class="token punctuation">;</span>
      n0 <span class="token operator">=</span> t0 <span class="token operator">*</span> t0 <span class="token operator">*</span> <span class="token function">grad4</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span>perm<span class="token punctuation">[</span>ll<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x0<span class="token punctuation">,</span> y0<span class="token punctuation">,</span> z0<span class="token punctuation">,</span> w0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

   t1 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x1<span class="token operator">*</span>x1 <span class="token operator">-</span> y1<span class="token operator">*</span>y1 <span class="token operator">-</span> z1<span class="token operator">*</span>z1 <span class="token operator">-</span> w1<span class="token operator">*</span>w1<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t1 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n1 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t1 <span class="token operator">*</span><span class="token operator">=</span> t1<span class="token punctuation">;</span>
      n1 <span class="token operator">=</span> t1 <span class="token operator">*</span> t1 <span class="token operator">*</span> <span class="token function">grad4</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>i1<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>j1<span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span>k1<span class="token operator">+</span>perm<span class="token punctuation">[</span>ll<span class="token operator">+</span>l1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> z1<span class="token punctuation">,</span> w1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

   t2 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x2<span class="token operator">*</span>x2 <span class="token operator">-</span> y2<span class="token operator">*</span>y2 <span class="token operator">-</span> z2<span class="token operator">*</span>z2 <span class="token operator">-</span> w2<span class="token operator">*</span>w2<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t2 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n2 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t2 <span class="token operator">*</span><span class="token operator">=</span> t2<span class="token punctuation">;</span>
      n2 <span class="token operator">=</span> t2 <span class="token operator">*</span> t2 <span class="token operator">*</span> <span class="token function">grad4</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>i2<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>j2<span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span>k2<span class="token operator">+</span>perm<span class="token punctuation">[</span>ll<span class="token operator">+</span>l2<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> z2<span class="token punctuation">,</span> w2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

   t3 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x3<span class="token operator">*</span>x3 <span class="token operator">-</span> y3<span class="token operator">*</span>y3 <span class="token operator">-</span> z3<span class="token operator">*</span>z3 <span class="token operator">-</span> w3<span class="token operator">*</span>w3<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t3 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n3 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t3 <span class="token operator">*</span><span class="token operator">=</span> t3<span class="token punctuation">;</span>
      n3 <span class="token operator">=</span> t3 <span class="token operator">*</span> t3 <span class="token operator">*</span> <span class="token function">grad4</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span>i3<span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span>j3<span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span>k3<span class="token operator">+</span>perm<span class="token punctuation">[</span>ll<span class="token operator">+</span>l3<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x3<span class="token punctuation">,</span> y3<span class="token punctuation">,</span> z3<span class="token punctuation">,</span> w3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

   t4 <span class="token operator">=</span> <span class="token number">0.6f</span> <span class="token operator">-</span> x4<span class="token operator">*</span>x4 <span class="token operator">-</span> y4<span class="token operator">*</span>y4 <span class="token operator">-</span> z4<span class="token operator">*</span>z4 <span class="token operator">-</span> w4<span class="token operator">*</span>w4<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t4 <span class="token operator">&lt;</span> <span class="token number">0.0f</span><span class="token punctuation">)</span> n4 <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      t4 <span class="token operator">*</span><span class="token operator">=</span> t4<span class="token punctuation">;</span>
      n4 <span class="token operator">=</span> t4 <span class="token operator">*</span> t4 <span class="token operator">*</span> <span class="token function">grad4</span><span class="token punctuation">(</span>perm<span class="token punctuation">[</span>ii<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>perm<span class="token punctuation">[</span>jj<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>perm<span class="token punctuation">[</span>kk<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>perm<span class="token punctuation">[</span>ll<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> x4<span class="token punctuation">,</span> y4<span class="token punctuation">,</span> z4<span class="token punctuation">,</span> w4<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/* Sum up and scale the result to cover the range [-1,1] */</span>
    <span class="token keyword">return</span> <span class="token number">27.0f</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n0 <span class="token operator">+</span> n1 <span class="token operator">+</span> n2 <span class="token operator">+</span> n3 <span class="token operator">+</span> n4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* TODO: The scale factor is preliminary! */</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div></div></div></div></div></div><script defer src="/_nuxt/payloads/1584626286009/openframeworks/utils/ofNoise_h/payload.js"></script><script src="/_nuxt/3213b67383225fc2f59b.js" defer></script><script src="/_nuxt/d1291586b31fa28ca9d5.js" defer></script><script src="/_nuxt/5fe5bba000836bc4a25f.js" defer></script><script src="/_nuxt/f8d94d1c92ade1d8a6da.js" defer></script><script src="/_nuxt/9a7e20c23e9625feab77.js" defer></script>
  </body>
</html>
