<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>ofSoundBuffer.h | openframeworks | ofDocs</title><meta data-n-head="ssr" data-hid="description" name="description" content="openFrameworks documentation and examples browser"><meta data-n-head="ssr" data-hid="keyword" name="keyword" content=""><meta data-n-head="ssr" property="og:description" content="openFrameworks documentation and examples browser" vmid="og:description"><meta data-n-head="ssr" property="og:title" content="ofSoundBuffer.h | openframeworks | ofDocs" vmid="og:title"><meta data-n-head="ssr" property="og:image" content="/files/images/ofw-logo.png" vmid="og:image"><link rel="preload" href="/_nuxt/5f71eaca0bd2f1a0f939.js" as="script"><link rel="preload" href="/_nuxt/906a3ca0fb13ed3c6651.js" as="script"><link rel="preload" href="/_nuxt/fe12c0cb7395fa1032f4.css" as="style"><link rel="preload" href="/_nuxt/b673915e8a08acf593e8.js" as="script"><link rel="preload" href="/_nuxt/46e8fcacdadb233d9fb6.css" as="style"><link rel="preload" href="/_nuxt/bf355f21967a23c26c07.js" as="script"><link rel="preload" href="/_nuxt/35a90d914f539af1362f.js" as="script"><link rel="stylesheet" href="/_nuxt/fe12c0cb7395fa1032f4.css"><link rel="stylesheet" href="/_nuxt/46e8fcacdadb233d9fb6.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="app"><div id="menu"><div class="menu-inner"><div id="settings"></div><h1 class="of"><div class="inner"><span><a href="/" class="nuxt-link-active"><svg version="1.1" viewbox="0 0 110 58" width="110px" height="58px" enable-background="0 0 110 58" xml:space="preserve" class="logo"><g><path d="M58,29 C58,13 45,0 29,0 C13,0 0,13 0,29 C0,45 13,58 29,58 C45,58 58,45 58,29 Z"></path><rect x="59" y="0" width="25" height="58"></rect><rect x="85" y="26" width="15" height="15"></rect><path d="M85,0 L110,0 L85,25 L85,0 Z"></path></g></svg><div class="txt"><span class="docs f7 questrial">Docs </span><span class="version">0.11.0</span></div></a></span></div></h1><div id="search"><div class="inner"><div class="field text"><div class="field-inner"><svg viewbox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve"><path d="M35.525,31.228l-8.88-8.882c1.444-2.238,2.298-4.895,2.298-7.752c0-7.909-6.438-14.343-14.346-14.343							c-7.911,0-14.343,6.434-14.343,14.343c0,7.911,6.433,14.344,14.343,14.344c2.856,0,5.513-0.849,7.752-2.294l8.88,8.88							c0.295,0.297,0.782,0.297,1.076,0l3.22-3.221C35.824,32.008,35.824,31.523,35.525,31.228z M4.81,14.593							c0-5.396,4.391-9.788,9.788-9.788c5.398,0,9.787,4.392,9.787,9.788c0,5.398-4.389,9.789-9.787,9.789							C9.2,24.382,4.81,19.991,4.81,14.593z"></path></svg><!----><div class="text-wrapper"><input id="search_field" name="search_field" placeholder="Search (Alt+F)" autocomplete="off" tabindex="0"></div><!----><!----></div></div></div><!----></div><div id="lists" class="menu-inner mt1 mb2"><div class="inner"></div></div></div><div class="menu-bottom"><div class="inner"><button class="button"><!----><span><span class="ico">nights_stay</span></span></button></div></div></div><div id="document"><div id="renderer" class="main source"><div absolute="/Users/Gilbert/Code/openFrameworks/libs/openFrameworks/sound/ofSoundBuffer.h" route="/openframeworks/sound/ofSoundBuffer.h" dir="../libs/openFrameworks/sound" ext="h" type="source" id="279" parent="269" siblings="" translations="[object Object]" class="doc-header"><div class="doc-header-inner"><div class="inner"><span class="breadcrumbs"><span class="crumb"><a href="/" class="pink nuxt-link-active">ofDocs</a><span class="chevron right"></span></span><span class="crumb"><a href="/openframeworks/" class="pink nuxt-link-active">openframeworks </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/openframeworks/sound/" class="pink nuxt-link-active">sound </a><!----><span class="chevron right"></span></span><span class="crumb"><!----><span class="link selector"><span class="name">ofSoundBuffer.h</span><span class="chevron bottom"></span><select><option value="/openframeworks/sound/ofFmodSoundPlayer_cpp">ofFmodSoundPlayer.cpp</option><option value="/openframeworks/sound/ofFmodSoundPlayer_h">ofFmodSoundPlayer.h</option><option value="/openframeworks/sound/ofOpenALSoundPlayer_cpp">ofOpenALSoundPlayer.cpp</option><option value="/openframeworks/sound/ofOpenALSoundPlayer_h">ofOpenALSoundPlayer.h</option><option value="/openframeworks/sound/ofRtAudioSoundStream_cpp">ofRtAudioSoundStream.cpp</option><option value="/openframeworks/sound/ofRtAudioSoundStream_h">ofRtAudioSoundStream.h</option><option value="/openframeworks/sound/ofSoundBaseTypes_cpp">ofSoundBaseTypes.cpp</option><option value="/openframeworks/sound/ofSoundBaseTypes_h">ofSoundBaseTypes.h</option><option value="/openframeworks/sound/ofSoundBuffer_cpp">ofSoundBuffer.cpp</option><option value="/openframeworks/sound/ofSoundBuffer_h">ofSoundBuffer.h</option><option value="/openframeworks/sound/ofSoundPlayer_cpp">ofSoundPlayer.cpp</option><option value="/openframeworks/sound/ofSoundPlayer_h">ofSoundPlayer.h</option><option value="/openframeworks/sound/ofSoundStream_cpp">ofSoundStream.cpp</option><option value="/openframeworks/sound/ofSoundStream_h">ofSoundStream.h</option><option value="/openframeworks/sound/ofSoundUtils_h">ofSoundUtils.h</option></select></span><!----></span></span></div></div></div><div id="code-page" static="true"><div id="side-menu"><div id="code-sources"><h4 class="f3 dropdown-toggle">Sources</h4><div class="srcsiblings dropdown-area"><a href="/openframeworks/sound/ofFmodSoundPlayer_cpp" class="block"><span class="src">src </span><span class="name">ofFmodSoundPlayer.cpp </span></a><a href="/openframeworks/sound/ofFmodSoundPlayer_h" class="block"><span class="src">src </span><span class="name">ofFmodSoundPlayer.h </span></a><a href="/openframeworks/sound/ofOpenALSoundPlayer_cpp" class="block"><span class="src">src </span><span class="name">ofOpenALSoundPlayer.cpp </span></a><a href="/openframeworks/sound/ofOpenALSoundPlayer_h" class="block"><span class="src">src </span><span class="name">ofOpenALSoundPlayer.h </span></a><a href="/openframeworks/sound/ofRtAudioSoundStream_cpp" class="block"><span class="src">src </span><span class="name">ofRtAudioSoundStream.cpp </span></a><a href="/openframeworks/sound/ofRtAudioSoundStream_h" class="block"><span class="src">src </span><span class="name">ofRtAudioSoundStream.h </span></a><a href="/openframeworks/sound/ofSoundBaseTypes_cpp" class="block"><span class="src">src </span><span class="name">ofSoundBaseTypes.cpp </span></a><a href="/openframeworks/sound/ofSoundBaseTypes_h" class="block"><span class="src">src </span><span class="name">ofSoundBaseTypes.h </span></a><a href="/openframeworks/sound/ofSoundBuffer_cpp" class="block"><span class="src">src </span><span class="name">ofSoundBuffer.cpp </span></a><a href="/openframeworks/sound/ofSoundBuffer_h" class="block nuxt-link-exact-active nuxt-link-active current"><span class="src">src </span><span class="name">ofSoundBuffer.h </span></a><a href="/openframeworks/sound/ofSoundPlayer_cpp" class="block"><span class="src">src </span><span class="name">ofSoundPlayer.cpp </span></a><a href="/openframeworks/sound/ofSoundPlayer_h" class="block"><span class="src">src </span><span class="name">ofSoundPlayer.h </span></a><a href="/openframeworks/sound/ofSoundStream_cpp" class="block"><span class="src">src </span><span class="name">ofSoundStream.cpp </span></a><a href="/openframeworks/sound/ofSoundStream_h" class="block"><span class="src">src </span><span class="name">ofSoundStream.h </span></a><a href="/openframeworks/sound/ofSoundUtils_h" class="block"><span class="src">src </span><span class="name">ofSoundUtils.h </span></a></div></div><div id="comments" class="dropdown-area"><h4 class="f3 dropdown-toggle">Comments</h4><div class="dropdown-area"></div></div><div filename="sound" absolute="/Users/Gilbert/Code/openFrameworks/libs/openFrameworks/sound" dir="../libs/openFrameworks" route="/openframeworks/sound/" ext="" type="folder" id="269" children="270,271,272,273,274,275,276,277,278,279,280,281,282,283,284" icon="volume_up" parent="164" breadcrumbs="164" class="see-also"><h4 class="f3">See also</h4><div class="also"><a href="/documentation/sound/"><span class="origin">documentation</span><span class="name">sound</span></a></div><div class="also"><a href="/examples/sound/soundPlayerFFTExample/"><span class="origin">examples</span><span class="name">soundPlayerFFTExample</span></a></div><div class="also"><a href="/examples/sound/soundPlayerExample/"><span class="origin">examples</span><span class="name">soundPlayerExample</span></a></div><div class="also"><a href="/examples/sound/soundBufferExample/"><span class="origin">examples</span><span class="name">soundBufferExample</span></a></div><div class="also"><a href="/examples/sound/"><span class="origin">examples</span><span class="name">sound</span></a></div><div class="also"><a href="/examples/ios/soundPlayerExample/"><span class="origin">examples</span><span class="name">soundPlayerExample</span></a></div></div></div><div id="code-render"><div class="inner"><pre><code><span class="token comment" spellcheck="true">/*
 * ofSoundBuffer.h
 *
 *  Created on: 25/07/2012
 *      Author: arturo
 */</span>

<span class="token macro property">#<span class="token directive keyword">ifndef</span> OFSOUNDBUFFER_H_</span>
<span class="token macro property">#<span class="token directive keyword">define</span> OFSOUNDBUFFER_H_</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ofConstants.h"</span></span>


<span class="token comment" spellcheck="true">/*! 
 
 @brief Buffer for audio samples and associated metadata.
 
 ofSoundBuffer stores audio as an array of interleaved floating point samples, with a given sample rate for playback.

 #### How sound recording works
 
 Physically speaking, what we call _sound_ is simply changes in air pressure perceived by a listener. These changes in sound pressure are converted 
 by a microphone into changes in voltage that can be recorded, making a _sound recording_. A sound recording is therefore a recording of changes in air 
 pressure at a particular point in space (ie where the microphone was positioned). When it is played back through a speaker, the speaker reproduces the 
 same pattern of changes in air pressure as were recorded by the microphone, but this time at a different point in space (ie where the speaker is positioned).

 In digital audio these changes in air pressure are recorded as a set of discrete numbers (_samples_), each number representing a snapshot of the air pressure
 at a particular point in time. For high quality audio there are typically 44,100 snapshots recorded every second. This is called the _sample rate_ and is 
 expressed in _Hz_ (44100Hz) or _kHz_ (44.1kHz).
 
 Because humans have two ears, rather than one, sound is usually recorded in stereo. The simplest stereo sound recording is two _channels_ of sound 
 recorded by two microphones at two different points in space. More channels can also be recorded (eg with 5.1 surround sound systems or Ambisonics).
 
 
 #### Frames, channels and samples
 
 Data in an ofSoundBuffer is stored _interleaved_ as an array of floats. Interleaved audio is analogous to how different color channels are stored side by side 
 in an ofImage or ofPixels object. 
 
 The functions and function arguments in ofSoundBuffer that deal with this interleaved data are based on 3 key terms:

 _channels_ refers to the number of channels or individual streams of interleaved audio samples in the buffer. A mono recording has 1 channel, a stereo 
 recording has 2 channels.
 
 _samples_ refers to the actual raw data. One _sample_ is a single floating point number between -1 and 1, which represents a snapshot of sound pressure at 
 a single moment in time. A 0.1 second long buffer at 44100Hz contains 4410 _samples_ if it has 1 channel, 8820 _samples_ if it has 2 channels, 13230 
 _samples_ if it has 3 channels, and so on.
 
 _frames_ refers to the number of multi-channel sets of interleaved sample data there are in the buffer. A 0.1 second long buffer at 44100Hz always has 
 4410 _frames_, regardless of how many channels it has. To get the number of _samples_ in a buffer you multiply the number of _channels_ by the number of _frames_.
  

 If I have an ofSoundBuffer with 8 _frames_ of mono (1 _channel_) audio, the underlying array contains 8 _samples_ (ie it is 8 floats long),
 and the samples are arranged like this:
 
		 L L L L L L L L 
 
 where `L` represents a single sample.
 
 
 If I have an ofSoundBuffer with 8 _frames_ of stereo (2 _channel_) audio, then the underlying array contains 16 _samples_ ((getNumFrames()*getNumChannels(), 
 ie 8*2) arranged in an _interleaved_ pattern:
 
         L R L R L R L R L R L R L R L R

 where `L` represents a single sample for the left channel, and `R` represents a single sample for the right channel. Grouping the frames together for clarity:
 
		 LR LR LR LR LR LR LR LR
 
 
 If I have an ofSoundBuffer with 8 frames of 5.1 surround (6 _channel_) audio, then the underlying array of floats contains 48 _samples_ (getNumFrames()*getNumChannels(), 
 ie 8*6) and is usually arranged in an _interleaved_ pattern like this:
 
         L C R Ls Rs Lfe L C R Ls Rs Lfe L C R Ls Rs Lfe L C R Ls Rs Lfe L C R Ls Rs Lfe L C R Ls Rs Lfe L C R Ls Rs Lfe L C R Ls Rs Lfe 
 
 where `L` represents a single sample for the left channel, `C` for centre, `R` for right, `Ls` for left surround, `Rs` for right surround and `Lfe` for the subwoofer. 
 Grouping the frames together for clarity:

		 LCRLsRsLfe LCRLsRsLfe LCRLsRsLfe LCRLsRsLfe LCRLsRsLfe LCRLsRsLfe LCRLsRsLfe LCRLsRsLfe 

 */</span>


<span class="token keyword">class</span> <span class="token class-name">ofSoundBuffer</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">ofSoundBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ofSoundBuffer</span><span class="token punctuation">(</span><span class="token keyword">short</span> <span class="token operator">*</span> shortBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numFrames<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numChannels<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> sampleRate<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">enum</span> InterpolationAlgorithm<span class="token punctuation">{</span>
		Linear<span class="token punctuation">,</span>
		Hermite
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> InterpolationAlgorithm defaultAlgorithm<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//defaults to Linear for mobile, Hermite for desktop</span>

	<span class="token keyword">void</span> <span class="token function">allocate</span><span class="token punctuation">(</span>size_t numSamples<span class="token punctuation">,</span> size_t numChannels<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// sample rate of the audio in this buffer</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token function">getSampleRate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> samplerate<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">setSampleRate</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> rate<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// resample by changing the playback speed, keeping the same sampleRate</span>
	<span class="token keyword">void</span> <span class="token function">resample</span><span class="token punctuation">(</span><span class="token keyword">float</span> speed<span class="token punctuation">,</span> InterpolationAlgorithm algorithm<span class="token operator">=</span>defaultAlgorithm<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// the number of channels per frame</span>
	std<span class="token operator">::</span>size_t <span class="token function">getNumChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> channels<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token comment" spellcheck="true">/// set the number of channels. does not change the underlying data, ie causes getNumFrames() to return a different result.</span>
	<span class="token keyword">void</span> <span class="token function">setNumChannels</span><span class="token punctuation">(</span><span class="token keyword">int</span> channels<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// the number of frames, ie the number of sets of (getNumChannels()) samples</span>
	std<span class="token operator">::</span>size_t <span class="token function">getNumFrames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">getNumChannels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
	
	<span class="token comment" spellcheck="true">/// return the tickCount that was assigned by ofSoundStream (if this buffer originated from an ofSoundStream).</span>
	uint64_t <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> tickCount<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">setTickCount</span><span class="token punctuation">(</span>uint64_t tick<span class="token punctuation">)</span><span class="token punctuation">{</span> tickCount <span class="token operator">=</span> tick<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	
	<span class="token comment" spellcheck="true">/// return the duration of audio in this buffer in milliseconds (==(getNumFrames()/getSampleRate())*1000)</span>
	uint64_t <span class="token function">getDurationMS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	uint64_t <span class="token function">getDurationMicros</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	uint64_t <span class="token function">getDurationNanos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// return the ID of the device which generated this buffer</span>
	<span class="token keyword">int</span> <span class="token function">getDeviceID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> soundStreamDeviceID<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">setDeviceID</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span> soundStreamDeviceID <span class="token operator">=</span> id<span class="token punctuation">;</span> <span class="token punctuation">}</span>

	<span class="token comment" spellcheck="true">/// access the sample at the given position in the buffer.</span>
	<span class="token comment" spellcheck="true">/// to retrieve the sample for channel channelIndex of frame frameIndex, do the following:</span>
	<span class="token comment" spellcheck="true">/// ofSoundBuffer myBuffer;</span>
	<span class="token comment" spellcheck="true">/// ...</span>
	<span class="token comment" spellcheck="true">/// float sample = myBuffer[(frameIndex*myBuffer.getNumChannels()) + channelIndex];</span>
	<span class="token keyword">float</span> <span class="token operator">&</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t samplePos<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">float</span> <span class="token operator">&</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t samplePos<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// access the sample at frameIndex on a soecific channel</span>
	<span class="token keyword">float</span> <span class="token operator">&</span> <span class="token function">getSample</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t frameIndex<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">float</span> <span class="token operator">&</span> <span class="token function">getSample</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t frameIndex<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t channel<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// return a new buffer containing the contents of this buffer multiplied by value.</span>
	ofSoundBuffer <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">float</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// multiply everything in this buffer by value, in-place.</span>
	ofSoundBuffer <span class="token operator">&</span> <span class="token keyword">operator</span><span class="token operator">*</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">float</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// assuming a 2-channel buffer, apply a stereo pan by multiplying channel 0 by left and channel 1 by right.</span>
	<span class="token keyword">void</span> <span class="token function">stereoPan</span><span class="token punctuation">(</span><span class="token keyword">float</span> left<span class="token punctuation">,</span> <span class="token keyword">float</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// copy length samples from shortBuffer and interpret as interleaved with the given number of channels at the given samplerate</span>
	<span class="token keyword">void</span> <span class="token function">copyFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">short</span> <span class="token operator">*</span> shortBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numFrames<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numChannels<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> sampleRate<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">void</span> <span class="token function">copyFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">float</span> <span class="token operator">*</span> floatBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numFrames<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numChannels<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> sampleRate<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">void</span> <span class="token function">copyFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">short</span><span class="token operator">></span> <span class="token operator">&</span> shortBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numChannels<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> sampleRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">void</span> <span class="token function">copyFrom</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span> <span class="token operator">&</span> floatBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numChannels<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> sampleRate<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">void</span> <span class="token function">toShortPCM</span><span class="token punctuation">(</span>std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">short</span><span class="token operator">></span> <span class="token operator">&</span> dst<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">toShortPCM</span><span class="token punctuation">(</span><span class="token keyword">short</span> <span class="token operator">*</span> dst<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// resize outBuffer to outNumFrames with outNumChannels, and then copy outNumFrames of data from us to outBuffer.</span>
	<span class="token comment" spellcheck="true">/// fromFrame is a frame offset. if we don't have enough source data, loop with fromFrame=0 until we have filled outBuffer.</span>
	<span class="token comment" spellcheck="true">/// if outBuffer has fewer channels than our buffer, just copy the first outNumChannels of our data and skip the rest.</span>
	<span class="token comment" spellcheck="true">/// if outBuffer has more channels than our buffer, loop through our channels repeatedly until done. </span>
	<span class="token keyword">void</span> <span class="token function">copyTo</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumFrames<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumChannels<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame<span class="token punctuation">,</span> <span class="token keyword">bool</span> loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// as copyTo but mixes source audio with audio in `outBuffer` by adding samples together (+), instead of overwriting.</span>
	<span class="token keyword">void</span> <span class="token function">addTo</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumFrames<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumChannels<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame<span class="token punctuation">,</span> <span class="token keyword">bool</span> loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// as copyTo above but reads outNumFrames and outNumChannels from outBuffer</span>
	<span class="token keyword">void</span> <span class="token function">copyTo</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t frameFrame <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// as addTo above but reads outNumFrames and outNumChannels from outBuffer</span>
	<span class="token keyword">void</span> <span class="token function">addTo</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// copy sample data to out, where out is already allocated to match outNumFrames and outNumChannels (ie outNumFrames*outNumChannels samples).</span>
	<span class="token comment" spellcheck="true">/// fromFrame is a frame offset. if we don't have enough source data, loop with fromFrame=0 until we have filled the out buffer.</span>
	<span class="token comment" spellcheck="true">/// if out has fewer channels than our buffer, just copy the first outNumChannels of our data and skip the rest.</span>
	<span class="token comment" spellcheck="true">/// if out has more channels than our buffer, loop through our channels repeatedly until done.</span>
	<span class="token keyword">void</span> <span class="token function">copyTo</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumFrames<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumChannels<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame<span class="token punctuation">,</span> <span class="token keyword">bool</span> loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// as copyTo but mixes source audio with audio in `out` by adding samples together (+), instead of overwriting</span>
	<span class="token keyword">void</span> <span class="token function">addTo</span><span class="token punctuation">(</span><span class="token keyword">float</span> <span class="token operator">*</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumFrames<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t outNumChannels<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame<span class="token punctuation">,</span> <span class="token keyword">bool</span> loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// resample our data to outBuffer at the given target speed, starting at fromFrame and copying numFrames of data. resize outBuffer to fit.</span>
	<span class="token comment" spellcheck="true">/// speed is relative to current speed (ie 1.0f == no change). lower speeds will give a larger outBuffer, higher speeds a smaller outBuffer.</span>
	<span class="token keyword">void</span> <span class="token function">resampleTo</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numFrames<span class="token punctuation">,</span> <span class="token keyword">float</span> speed<span class="token punctuation">,</span> <span class="token keyword">bool</span> loop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> InterpolationAlgorithm algorithm <span class="token operator">=</span> defaultAlgorithm<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// copy the requested channel of our data to outBuffer. resize outBuffer to fit.</span>
	<span class="token keyword">void</span> <span class="token function">getChannel</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> outBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t sourceChannel<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// copy data from inBuffer to the given channel. resize ourselves to match inBuffer's getNumFrames().</span>
	<span class="token keyword">void</span> <span class="token function">setChannel</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofSoundBuffer <span class="token operator">&</span> inBuffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">float</span> <span class="token function">getRMSAmplitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> <span class="token function">getRMSAmplitudeChannel</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t channel<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token keyword">void</span> <span class="token function">linearResampleTo</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> buffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numFrames<span class="token punctuation">,</span> <span class="token keyword">float</span> speed<span class="token punctuation">,</span> <span class="token keyword">bool</span> loop<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">hermiteResampleTo</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> buffer<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t fromFrame<span class="token punctuation">,</span> std<span class="token operator">::</span>size_t numFrames<span class="token punctuation">,</span> <span class="token keyword">float</span> speed<span class="token punctuation">,</span> <span class="token keyword">bool</span> loop<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// fills the buffer with random noise between -amplitude and amplitude. useful for debugging.</span>
	<span class="token keyword">void</span> <span class="token function">fillWithNoise</span><span class="token punctuation">(</span><span class="token keyword">float</span> amplitude <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// fills the buffer with a sine wave. useful for debugging.</span>
	<span class="token keyword">float</span> <span class="token function">fillWithTone</span><span class="token punctuation">(</span><span class="token keyword">float</span> pitchHz <span class="token operator">=</span> <span class="token number">440.0f</span><span class="token punctuation">,</span> <span class="token keyword">float</span> phase <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// amplifies samples so that the maximum amplitude is equal to 'level'</span>
	<span class="token keyword">void</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token keyword">float</span> level <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// removes initial / ending silence from the buffer</span>
	<span class="token keyword">bool</span> <span class="token function">trimSilence</span><span class="token punctuation">(</span><span class="token keyword">float</span> threshold <span class="token operator">=</span> <span class="token number">0.0001f</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> trimStart <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> trimEnd <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// return the total number of samples in this buffer (==getNumFrames()*getNumChannels())</span>
	std<span class="token operator">::</span>size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> buffer<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token comment" spellcheck="true">/// resize this buffer to exactly this many samples. it's up to you make sure samples matches the channel count.</span>
	<span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>std<span class="token operator">::</span>size_t numSamples<span class="token punctuation">,</span> <span class="token keyword">float</span> val <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// remove all samples, preserving channel count and sample rate.</span>
	<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// swap the contents of this buffer with otherBuffer</span>
	<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> otherBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/// set everything in this buffer to value, preserving size, channel count and sample rate.</span>
	<span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">float</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// return the underlying buffer. careful!</span>
	std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span> <span class="token operator">&</span> <span class="token function">getBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span> <span class="token operator">&</span> <span class="token function">getBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>

	<span class="token comment" spellcheck="true">// checks that size() and number of channels are consistent, logs a warning if not. returns consistency check result.</span>
	<span class="token keyword">bool</span> <span class="token function">checkSizeAndChannelsConsistency</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&</span> function<span class="token operator">=</span><span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">></span> buffer<span class="token punctuation">;</span>
	std<span class="token operator">::</span>size_t channels<span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> samplerate<span class="token punctuation">;</span>

	uint64_t tickCount<span class="token punctuation">;</span>
	<span class="token keyword">int</span> soundStreamDeviceID<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> std<span class="token punctuation">{</span>
	<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>ofSoundBuffer <span class="token operator">&</span> src<span class="token punctuation">,</span> ofSoundBuffer <span class="token operator">&</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token macro property">#<span class="token directive keyword">endif</span> </span><span class="token comment" spellcheck="true">/* OFSOUNDBUFFER_H_ */</span>
</code></pre></div></div></div></div></div></div></div></div><script defer src="/_nuxt/payloads/1586012716389/openframeworks/sound/ofSoundBuffer_h/payload.js"></script><script src="/_nuxt/5f71eaca0bd2f1a0f939.js" defer></script><script src="/_nuxt/35a90d914f539af1362f.js" defer></script><script src="/_nuxt/906a3ca0fb13ed3c6651.js" defer></script><script src="/_nuxt/b673915e8a08acf593e8.js" defer></script><script src="/_nuxt/bf355f21967a23c26c07.js" defer></script>
  </body>
</html>
