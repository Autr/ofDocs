{"data":[{"page":{"entry":{"name":"ofAppAndroidWindow.cpp","filename":"ofAppAndroidWindow.cpp","absolute":"/Users/Gilbert/Code/openFrameworks/addons/ofxAndroid/src/ofAppAndroidWindow.cpp","path":"/addons/ofxAndroid/src/ofAppAndroidWindow_cpp","route":"/addons/ofxAndroid/src/ofAppAndroidWindow.cpp","dir":"../addons/ofxAndroid/src","ext":"cpp","type":"source","id":41,"parent":39,"breadcrumbs":[39,40,36],"siblings":[],"translations":{}},"document":"<span class=\"token comment\" spellcheck=\"true\">/*\n * ofAppAndroidWindow.cpp\n *\n *  Created on: 24/05/2010\n *      Author: arturo\n */</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppAndroidWindow.h\"</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;jni.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;queue></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofGraphics.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppRunner.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofUtils.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAndroidApp.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAndroidUtils.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAccelerometer.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;android/log.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofFileUtils.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofGLProgrammableRenderer.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofGLRenderer.h\"</span></span>\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> stopped<span class=\"token operator\">=</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> surfaceDestroyed<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>  sWindowWidth  <span class=\"token operator\">=</span> <span class=\"token number\">480</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>  sWindowHeight <span class=\"token operator\">=</span> <span class=\"token number\">800</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> bSetupScreen <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">static</span> JavaVM <span class=\"token operator\">*</span>ofJavaVM<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">static</span> ofAppAndroidWindow <span class=\"token operator\">*</span> window<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">static</span> ofOrientation orientation <span class=\"token operator\">=</span> OF_ORIENTATION_DEFAULT<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">static</span> queue<span class=\"token operator\">&lt;</span>ofTouchEventArgs<span class=\"token operator\">></span> touchEventArgsQueue<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> std<span class=\"token operator\">::</span>mutex mtx<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> threadedTouchEvents <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> appSetup <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> accumulateTouchEvents <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">ofExitCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//----- define in main.cpp---//</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">ofAndroidApplicationInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">ofAndroidActivityInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//static ofAppAndroidWindow window;</span>\n\nJavaVM <span class=\"token operator\">*</span> <span class=\"token function\">ofGetJavaVMPtr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> ofJavaVM<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nJNIEnv <span class=\"token operator\">*</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tJNIEnv <span class=\"token operator\">*</span>env<span class=\"token punctuation\">;</span>\n\tJavaVM <span class=\"token operator\">*</span> vm <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJavaVMPtr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>vm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"couldn't get java virtual machine\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">int</span> getEnvStat <span class=\"token operator\">=</span> vm<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>env<span class=\"token punctuation\">,</span> JNI_VERSION_1_4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>getEnvStat <span class=\"token operator\">==</span> JNI_EDETACHED<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vm<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">AttachCurrentThread</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>env<span class=\"token punctuation\">,</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>getEnvStat <span class=\"token operator\">!=</span> JNI_OK<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njclass <span class=\"token class-name\">ofGetJavaOFAndroid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">FindClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cc/openframeworks/OFAndroid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njclass <span class=\"token class-name\">ofGetOFLifeCycle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">FindClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cc/openframeworks/OFAndroidLifeCycle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njobject <span class=\"token function\">ofGetOFActivityObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tJNIEnv <span class=\"token operator\">*</span> env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\n\tjclass <span class=\"token class-name\">OFLifeCycle</span> <span class=\"token operator\">=</span> <span class=\"token function\">ofGetOFLifeCycle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>OFLifeCycle<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\n\tjfieldID ofActivityID <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStaticFieldID</span><span class=\"token punctuation\">(</span>OFLifeCycle<span class=\"token punctuation\">,</span><span class=\"token string\">\"m_activity\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Lcc/openframeworks/OFActivity;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ofActivityID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"couldn't get field ID for ofActivity\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStaticObjectField</span><span class=\"token punctuation\">(</span>OFLifeCycle<span class=\"token punctuation\">,</span>ofActivityID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n\n\nofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">ofAppAndroidWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">:</span><span class=\"token function\">currentRenderer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">ofGLRenderer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">,</span><span class=\"token function\">glesVersion</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\twindow <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token operator\">~</span><span class=\"token function\">ofAppAndroidWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// TODO Auto-generated destructor stub</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">bool</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">isSurfaceDestroyed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> surfaceDestroyed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofGLESWindowSettings <span class=\"token operator\">&amp;</span> settings<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">setup</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofxAndroidWindowSettings <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span>settings <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofxAndroidWindowSettings <span class=\"token operator\">&amp;</span> settings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tglesVersion <span class=\"token operator\">=</span> settings<span class=\"token punctuation\">.</span>glesVersion<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setup gles\"</span> <span class=\"token operator\">&lt;&lt;</span> glesVersion<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>glesVersion<span class=\"token operator\">&lt;</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tcurrentRenderer <span class=\"token operator\">=</span> make_shared<span class=\"token operator\">&lt;</span>ofGLRenderer<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\tcurrentRenderer <span class=\"token operator\">=</span> make_shared<span class=\"token operator\">&lt;</span>ofGLProgrammableRenderer<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjclass <span class=\"token class-name\">javaClass</span> <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">FindClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cc/openframeworks/OFAndroid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setupOpenGL(): couldn't find OFAndroid java class\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID method <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStaticMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setupGL\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(IZ)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>method<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setupOpenGL(): couldn't find OFAndroid setupGL method\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallStaticVoidMethod</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span>method<span class=\"token punctuation\">,</span>glesVersion<span class=\"token punctuation\">,</span>settings<span class=\"token punctuation\">.</span>preserveContextOnPause<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span>\n\nglm<span class=\"token operator\">::</span>vec2 ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">getWindowSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> glm<span class=\"token operator\">::</span><span class=\"token function\">vec2</span><span class=\"token punctuation\">(</span>sWindowWidth<span class=\"token punctuation\">,</span>sWindowHeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span>\tofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> sWindowWidth<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span>\tofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> sWindowHeight<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">enableSetupScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tbSetupScreen <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">disableSetupScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tbSetupScreen <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">setOrientation</span><span class=\"token punctuation\">(</span>ofOrientation _orientation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//if(orientation==_orientation) return;</span>\n\torientation <span class=\"token operator\">=</span> _orientation<span class=\"token punctuation\">;</span>\n\tjclass <span class=\"token class-name\">javaClass</span> <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">FindClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cc/openframeworks/OFAndroid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setOrientation(): couldn't find OFAndroid java class\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID setScreenOrientation <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStaticMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setScreenOrientation\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(I)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>setScreenOrientation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setOrientation(): couldn't find OFAndroid setScreenOrientation method\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>orientation<span class=\"token operator\">==</span>OF_ORIENTATION_UNKNOWN<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallStaticVoidMethod</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span>setScreenOrientation<span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallStaticVoidMethod</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span>setScreenOrientation<span class=\"token punctuation\">,</span><span class=\"token function\">ofOrientationToDegrees</span><span class=\"token punctuation\">(</span>orientation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nofOrientation ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">getOrientation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> orientation<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">setFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> fullscreen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tjclass <span class=\"token class-name\">javaClass</span> <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">FindClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cc/openframeworks/OFAndroid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setFullscreen(): couldn't find OFAndroid java class\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID setFullscreen <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStaticMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setFullscreen\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(Z)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>setFullscreen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setFullScreen(): couldn't find OFAndroid setFullscreen method\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallStaticVoidMethod</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span>setFullscreen<span class=\"token punctuation\">,</span>fullscreen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">toggleFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">setThreadedEvents</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> threadedEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tthreadedTouchEvents <span class=\"token operator\">=</span> threadedEvents<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">void</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">setAccumulateTouchEvents</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> accumEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\taccumulateTouchEvents <span class=\"token operator\">=</span> accumEvents<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\nofCoreEvents <span class=\"token operator\">&amp;</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> coreEvents<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nshared_ptr<span class=\"token operator\">&lt;</span>ofBaseRenderer<span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> currentRenderer<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span> ofAppAndroidWindow<span class=\"token operator\">::</span><span class=\"token function\">getGlesVersion</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> glesVersion<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">extern</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">{</span>\n\njint <span class=\"token function\">JNI_OnLoad</span><span class=\"token punctuation\">(</span>JavaVM<span class=\"token operator\">*</span> vm<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span><span class=\"token operator\">*</span> reserved<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tJNIEnv <span class=\"token operator\">*</span>env<span class=\"token punctuation\">;</span>\n\tofJavaVM <span class=\"token operator\">=</span> vm<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"JNI_OnLoad called\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vm<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span>env<span class=\"token punctuation\">,</span> JNI_VERSION_1_4<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> JNI_OK<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"failed to get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> JNI_VERSION_1_4<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_setAppDataDir</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz<span class=\"token punctuation\">,</span> jstring data_dir<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\tjboolean iscopy<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>mfile <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStringUTFChars</span><span class=\"token punctuation\">(</span>data_dir<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>iscopy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">__android_log_print</span><span class=\"token punctuation\">(</span>ANDROID_LOG_INFO<span class=\"token punctuation\">,</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"setting app dir name to: \\\"\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">string</span><span class=\"token punctuation\">(</span>mfile<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ofSetDataPathRoot</span><span class=\"token punctuation\">(</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>mfile<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">ReleaseStringUTFChars</span><span class=\"token punctuation\">(</span>data_dir<span class=\"token punctuation\">,</span> mfile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">Java_cc_openframeworks_OFAndroid_init</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">clazz</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofAndroidApplicationInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">Java_cc_openframeworks_OFAndroid_onCreate</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">clazz</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofAndroidActivityInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onRestart</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onStart</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"onStart\"</span><span class=\"token punctuation\">;</span>\n\tstopped <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onStop</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"onStop\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span> <span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>stop <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tstopped <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onResume</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"onResume\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>resume<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onPause</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"onPause\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>pause<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onDestroy</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tappSetup <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyExit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofExitCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onSurfaceDestroyed</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tsurfaceDestroyed <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"onSurfaceDestroyed\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unloadGL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onSurfaceCreated</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>appSetup<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"onSurfaceCreated\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>surfaceDestroyed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unloadGL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reloadGL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">pushStyle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setupGraphicDefaults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">popStyle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">int</span> glesVersion <span class=\"token operator\">=</span> window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getGlesVersion</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> glesVersion <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">static_cast</span><span class=\"token operator\">&lt;</span>ofGLRenderer<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">static_cast</span><span class=\"token operator\">&lt;</span>ofGLProgrammableRenderer<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setup</span><span class=\"token punctuation\">(</span>glesVersion<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tsurfaceDestroyed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_setup</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint w<span class=\"token punctuation\">,</span> jint h  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setup \"</span> <span class=\"token operator\">&lt;&lt;</span> w <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"x\"</span> <span class=\"token operator\">&lt;&lt;</span> h<span class=\"token punctuation\">;</span>\n\tstopped <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    sWindowWidth  <span class=\"token operator\">=</span> w<span class=\"token punctuation\">;</span>\n    sWindowHeight <span class=\"token operator\">=</span> h<span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">startRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bSetupScreen<span class=\"token punctuation\">)</span> window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setupScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifySetup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">finishRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tappSetup <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_resize</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint w<span class=\"token punctuation\">,</span> jint h <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    sWindowWidth  <span class=\"token operator\">=</span> w<span class=\"token punctuation\">;</span>\n    sWindowHeight <span class=\"token operator\">=</span> h<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ofLogNotice</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppAndroidWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"resize \"</span> <span class=\"token operator\">&lt;&lt;</span> w <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"x\"</span> <span class=\"token operator\">&lt;&lt;</span> h<span class=\"token punctuation\">;</span>\n    window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyWindowResized</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span>h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/* Call to finalize the graphics state */</span>\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_exit</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span> <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//window->events().notifyExit();</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/* Call to render the next GL frame */</span>\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_render</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span> <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>stopped <span class=\"token operator\">||</span> surfaceDestroyed<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>threadedTouchEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tqueue<span class=\"token operator\">&lt;</span>ofTouchEventArgs<span class=\"token operator\">></span> events <span class=\"token operator\">=</span> touchEventArgsQueue<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>touchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> touchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">case</span> ofTouchEventArgs<span class=\"token operator\">::</span>down<span class=\"token operator\">:</span>\n\t\t\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMousePressed</span><span class=\"token punctuation\">(</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDown<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">case</span> ofTouchEventArgs<span class=\"token operator\">::</span>up<span class=\"token operator\">:</span>\n\t\t\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseReleased</span><span class=\"token punctuation\">(</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchUp<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">case</span> ofTouchEventArgs<span class=\"token operator\">::</span>move<span class=\"token operator\">:</span>\n\t\t\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseMoved</span><span class=\"token punctuation\">(</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseDragged</span><span class=\"token punctuation\">(</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchMoved<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">case</span> ofTouchEventArgs<span class=\"token operator\">::</span>doubleTap<span class=\"token operator\">:</span>\n\t\t\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDoubleTap<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">case</span> ofTouchEventArgs<span class=\"token operator\">::</span>cancel<span class=\"token operator\">:</span>\n\t\t\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchCancelled<span class=\"token punctuation\">,</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\tevents<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">startRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bSetupScreen<span class=\"token punctuation\">)</span> window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setupScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyDraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">finishRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onTouchDown</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint id<span class=\"token punctuation\">,</span>jfloat x<span class=\"token punctuation\">,</span>jfloat y<span class=\"token punctuation\">,</span>jfloat pressure<span class=\"token punctuation\">,</span>jfloat majoraxis<span class=\"token punctuation\">,</span>jfloat minoraxis<span class=\"token punctuation\">,</span>jfloat angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofTouchEventArgs touch<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>pressure <span class=\"token operator\">=</span> pressure<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>majoraxis <span class=\"token operator\">=</span> majoraxis<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>minoraxis <span class=\"token operator\">=</span> minoraxis<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>angle <span class=\"token operator\">=</span> angle<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> ofTouchEventArgs<span class=\"token operator\">::</span>down<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>threadedTouchEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMousePressed</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDown<span class=\"token punctuation\">,</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\ttouchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onTouchUp</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint id<span class=\"token punctuation\">,</span>jfloat x<span class=\"token punctuation\">,</span>jfloat y<span class=\"token punctuation\">,</span>jfloat pressure<span class=\"token punctuation\">,</span>jfloat majoraxis<span class=\"token punctuation\">,</span>jfloat minoraxis<span class=\"token punctuation\">,</span>jfloat angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofTouchEventArgs touch<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>pressure <span class=\"token operator\">=</span> pressure<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>majoraxis <span class=\"token operator\">=</span> majoraxis<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>minoraxis <span class=\"token operator\">=</span> minoraxis<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>angle <span class=\"token operator\">=</span> angle<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> ofTouchEventArgs<span class=\"token operator\">::</span>up<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>threadedTouchEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseReleased</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchUp<span class=\"token punctuation\">,</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\ttouchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onTouchCancelled</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint id<span class=\"token punctuation\">,</span>jfloat x<span class=\"token punctuation\">,</span>jfloat y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofTouchEventArgs touch<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>pressure <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> ofTouchEventArgs<span class=\"token operator\">::</span>cancel<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>threadedTouchEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchCancelled<span class=\"token punctuation\">,</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\ttouchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onTouchMoved</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint id<span class=\"token punctuation\">,</span>jfloat x<span class=\"token punctuation\">,</span>jfloat y<span class=\"token punctuation\">,</span>jfloat pressure<span class=\"token punctuation\">,</span>jfloat majoraxis<span class=\"token punctuation\">,</span>jfloat minoraxis<span class=\"token punctuation\">,</span>jfloat angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofTouchEventArgs touch<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>pressure <span class=\"token operator\">=</span> pressure<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>majoraxis <span class=\"token operator\">=</span> majoraxis<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>minoraxis <span class=\"token operator\">=</span> minoraxis<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>angle <span class=\"token operator\">=</span> angle<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> ofTouchEventArgs<span class=\"token operator\">::</span>move<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>threadedTouchEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseMoved</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseDragged</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchMoved<span class=\"token punctuation\">,</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>accumulateTouchEvents <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>touchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> touchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>type<span class=\"token operator\">==</span>ofTouchEventArgs<span class=\"token operator\">::</span>move<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\ttouchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> touch<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t\ttouchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onTouchDoubleTap</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint id<span class=\"token punctuation\">,</span>jfloat x<span class=\"token punctuation\">,</span>jfloat y<span class=\"token punctuation\">,</span>jfloat pressure<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofTouchEventArgs touch<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>pressure <span class=\"token operator\">=</span> pressure<span class=\"token punctuation\">;</span>\n\ttouch<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> ofTouchEventArgs<span class=\"token operator\">::</span>doubleTap<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>threadedTouchEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMousePressed</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDoubleTap<span class=\"token punctuation\">,</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\ttouchEventArgsQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>touch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmtx<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onSwipe</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint id<span class=\"token punctuation\">,</span> jint swipeDir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofxAndroidSwipeEventArgs swipe<span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>ofxAndroidSwipeDir<span class=\"token punctuation\">)</span>swipeDir<span class=\"token punctuation\">,</span>id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">,</span>swipe<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njboolean\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onScale</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jobject detector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofxAndroidScaleEventArgs <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>detector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>scale<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">,</span>scale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njboolean\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onScaleBegin</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jobject detector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofxAndroidScaleEventArgs <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>detector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>scaleBegin<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">,</span>scale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onScaleEnd</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jobject detector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofxAndroidScaleEventArgs <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>detector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>scaleEnd<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">,</span>scale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njboolean\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onKeyDown</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz<span class=\"token punctuation\">,</span> jint  keyCode<span class=\"token punctuation\">,</span> jint unicode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    ofKeyEventArgs key<span class=\"token punctuation\">;</span>\n\tkey<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> ofKeyEventArgs<span class=\"token operator\">::</span>Pressed<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>key <span class=\"token operator\">=</span> unicode<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>keycode <span class=\"token operator\">=</span> keyCode<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>scancode <span class=\"token operator\">=</span> keyCode<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>codepoint <span class=\"token operator\">=</span> unicode<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyKeyEvent</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njboolean\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onKeyUp</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz<span class=\"token punctuation\">,</span> jint  keyCode<span class=\"token punctuation\">,</span> jint unicode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    ofKeyEventArgs key<span class=\"token punctuation\">;</span>\n\tkey<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> ofKeyEventArgs<span class=\"token operator\">::</span>Released<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>key <span class=\"token operator\">=</span> unicode<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>keycode <span class=\"token operator\">=</span> keyCode<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>scancode <span class=\"token operator\">=</span> keyCode<span class=\"token punctuation\">;</span>\n    key<span class=\"token punctuation\">.</span>codepoint <span class=\"token operator\">=</span> unicode<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyKeyEvent</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njboolean\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onBackPressed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>backPressed<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njboolean\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onMenuItemSelected</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz<span class=\"token punctuation\">,</span> jstring menu_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tjboolean iscopy<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span> menu_id_str <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStringUTFChars</span><span class=\"token punctuation\">(</span>menu_id<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>iscopy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>menu_id_str<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tstring <span class=\"token function\">id_str</span><span class=\"token punctuation\">(</span>menu_id_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>menuItemSelected<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">,</span>id_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\njboolean\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_onMenuItemChecked</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz<span class=\"token punctuation\">,</span> jstring menu_id<span class=\"token punctuation\">,</span> jboolean checked<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tjboolean iscopy<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>menu_id_str <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetStringUTFChars</span><span class=\"token punctuation\">(</span>menu_id<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>iscopy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>menu_id_str<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tstring <span class=\"token function\">id_str</span><span class=\"token punctuation\">(</span>menu_id_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>menuItemChecked<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">,</span>id_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_okPressed</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>okPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_cancelPressed</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>cancelPressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_networkConnected</span><span class=\"token punctuation\">(</span> JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jobject  thiz<span class=\"token punctuation\">,</span> jboolean connected<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">bool</span> bConnected <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span><span class=\"token punctuation\">)</span>connected<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>networkConnected<span class=\"token punctuation\">,</span>bConnected<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span>\n<span class=\"token function\">Java_cc_openframeworks_OFAndroid_deviceOrientationChanged</span><span class=\"token punctuation\">(</span>JNIEnv<span class=\"token operator\">*</span>  env<span class=\"token punctuation\">,</span> jclass  <span class=\"token class-name\">thiz</span><span class=\"token punctuation\">,</span> jint orientation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tofOrientation _orientation <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>ofOrientation<span class=\"token punctuation\">)</span> orientation<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>deviceOrientationChanged<span class=\"token punctuation\">,</span>_orientation <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","type":"source"}}],"fetch":[]}