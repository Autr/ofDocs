{"data":[{"page":{"entry":{"name":"ofxKinect.h","filename":"ofxKinect.h","absolute":"/Users/Gilbert/Code/openFrameworks/addons/ofxKinect/src/ofxKinect.h","path":"/addons/ofxKinect/src/ofxKinect_h","route":"/addons/ofxKinect/src/ofxKinect.h","dir":"../addons/ofxKinect/src","ext":"h","type":"source","id":91,"parent":88,"breadcrumbs":[88,86,5],"siblings":[],"translations":{}},"document":"<span class=\"token comment\" spellcheck=\"true\">/*==============================================================================\n\n    Copyright (c) 2010, 2011 ofxKinect Team\n\n    Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the \"Software\"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n    THE SOFTWARE.\n    \n    ----------------------------------------------------------------------------\n    \n    This project uses libfreenect, copyrighted by the Open Kinect Project using\n    the Apache License v2. See the file \"APACHE20\" in libs/libfreenect.\n    \n    See http://www.openkinect.org &amp; https://github.com/OpenKinect/libfreenect \n    for documentation\n    \n==============================================================================*/</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofMain.h\"</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"libfreenect.h\"</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">if</span> defined(_MSC_VER) || defined(_WIN32) || defined(WIN32) || defined(__MINGW32__)</span>\n    <span class=\"token comment\" spellcheck=\"true\">// do windows stuff</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n    <span class=\"token comment\" spellcheck=\"true\">// mac and linux need this</span>\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;libusb.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxBase3DVideo.h\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ofxKinectContext</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\class ofxKinect</span>\n<span class=\"token comment\" spellcheck=\"true\">///</span>\n<span class=\"token comment\" spellcheck=\"true\">/// wrapper for a freenect kinect device</span>\n<span class=\"token comment\" spellcheck=\"true\">///</span>\n<span class=\"token comment\" spellcheck=\"true\">/// references:</span>\n<span class=\"token comment\" spellcheck=\"true\">/// - http://openkinect.org/wiki/Main_Page</span>\n<span class=\"token comment\" spellcheck=\"true\">/// - https://github.com/OpenKinect/libfreenect/blob/master/include/libfreenect.h</span>\n<span class=\"token comment\" spellcheck=\"true\">///</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ofxKinect</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> ofxBase3DVideo<span class=\"token punctuation\">,</span> <span class=\"token keyword\">protected</span> ofThread <span class=\"token punctuation\">{</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\n\t<span class=\"token function\">ofxKinect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token operator\">~</span><span class=\"token function\">ofxKinect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Main</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// initialize resources, must be called before open()</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// infrared controls whether the video image is rgb or IR</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// set video to false to disable video image grabbing (saves bandwidth)</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// set texture to false if you don't need to use the internal textures</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// naturally, if you disable the video image the video pixels and</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// RGB color will be 0</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> infrared<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> video<span class=\"token operator\">=</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> texture<span class=\"token operator\">=</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// clear resources, do not call this while ofxKinect is running!</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// calibrates the depth image to align with the rgb image, disabled by default</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// call this before open(), has no effect while the connection is running</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// note: this calculation uses some cpu, leave off if not needed</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">setRegistration</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> bUseRegistration<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// open the connection and start grabbing images</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// set the deviceIndex to choose a kinect, see numAvailableDevices()</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// if you don't set the index (ie index=-1), the first available kinect will be used</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// note: this has changed so that a deviceIndex of 0 will also open the same device, regardless of the order in which it was plugged in</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> deviceIndex<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// open using a kinect unique serial number</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// NOTE: currently, libfreenect returns a serial number with all 0s for</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// kinect models > 1414, so this will only work with the original xbox kinect</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span>string serial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// close the connection and stop grabbing images</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// is the connection currently open?</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isConnected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isInitialized</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// is the current frame new?</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isFrameNew</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isFrameNewVideo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isFrameNewDepth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">setPixelFormat</span><span class=\"token punctuation\">(</span>ofPixelFormat pixelFormat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tofPixelFormat <span class=\"token function\">getPixelFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// updates the pixel buffers and textures</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// make sure to call this to update to the latest incoming frames</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Depth Data</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the calulated distance for a depth point</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getDistanceAt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getDistanceAt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofPoint <span class=\"token operator\">&amp;</span> p<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// calculates the coordinate in the world for the depth point (perspective calculation)</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// center of image is (0.0)</span>\n\tofVec3f <span class=\"token function\">getWorldCoordinateAt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> cx<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> cy<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\tofVec3f <span class=\"token function\">getWorldCoordinateAt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> cx<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> cy<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> wz<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Intrinsic IR Sensor Parameters</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// these values are used when depth registration is enabled to align the</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// depth image to the rgb image, see http://www.ros.org/wiki/kinect_calibration/technical</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// they could also be useful for real world accurate point clouds ... weee!</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the distance between the IR sensor and IR emitter in cm</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getSensorEmitterDistance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the distance between the IR sensor and the RGB camera in cm</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getSensorCameraDistance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the size of a single pixel on the zero plane in mm</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getZeroPlanePixelSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the focal length of the IR sensor in mm</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getZeroPlaneDistance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section RGB Data</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the RGB value for a depth point</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// see setRegistration() for calibrated depth->RGB points</span>\n\tofColor <span class=\"token function\">getColorAt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\tofColor <span class=\"token function\">getColorAt</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofPoint <span class=\"token operator\">&amp;</span> p<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Pixel Data</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the video pixels reference</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// see setRegistration() for a calibrated depth->RGB image</span>\n\tofPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> ofPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the pixels of the most recent depth frame</span>\n\tofPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getDepthPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>       \t<span class=\"token comment\" spellcheck=\"true\">///&lt; grayscale values</span>\n\t<span class=\"token keyword\">const</span> ofPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getDepthPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>       \t<span class=\"token comment\" spellcheck=\"true\">///&lt; grayscale values</span>\n\tofShortPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getRawDepthPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; raw 11 bit values</span>\n\t<span class=\"token keyword\">const</span> ofShortPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getRawDepthPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; raw 11 bit values</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the distance in millimeters to a given point as a float array</span>\n\tofFloatPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getDistancePixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> ofFloatPixels <span class=\"token operator\">&amp;</span> <span class=\"token function\">getDistancePixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the video (ir or rgb) texture</span>\n\tofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> ofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">OF_DEPRECATED_MSG</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Use getTexture() instead\"</span><span class=\"token punctuation\">,</span> ofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getTextureReference</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">OF_DEPRECATED_MSG</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Use getTexture() instead\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getTextureReference</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the grayscale depth texture</span>\n\tofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getDepthTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> ofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getDepthTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">OF_DEPRECATED_MSG</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Use getDepthTexture() instead\"</span><span class=\"token punctuation\">,</span> ofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getDepthTextureReference</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">OF_DEPRECATED_MSG</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Use getDepthTexture() instead\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ofTexture<span class=\"token operator\">&amp;</span> <span class=\"token function\">getDepthTextureReference</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Grayscale Depth Value</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// set the near value of the pixels in the grayscale depth image to white</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// bEnabled = true:  pixels closer to the camera are brighter (default)</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// bEnabled = false: pixels closer to the camera are darker</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">enableDepthNearValueWhite</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> bEnabled<span class=\"token operator\">=</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isDepthNearValueWhite</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// set the clipping planes for the depth calculations in millimeters</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// these are used for the depth value (12bit) -> grayscale (1 byte) conversion</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// ie setting a short range will give you greater sensitivity from 0-255</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// default is 50cm - 4m</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// note: you won't get any data &lt; 50cm and distances > 4m start to get noisy</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">setDepthClipping</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> nearClip<span class=\"token operator\">=</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> farClip<span class=\"token operator\">=</span><span class=\"token number\">4000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getNearClipping</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getFarClipping</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Query Capabilities</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// check for device capabilites ...</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// motor, led, or accelerometer control isn't currently supported </span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// by libfreenect with newer Kinect models (> 1414)</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">hasAccelControl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">hasCamTiltControl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">hasLedControl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Accelerometer Data</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the XYZ accelerometer values</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// ... yes, the kinect has an accelerometer</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// raw axis values</span>\n\tofPoint <span class=\"token function\">getRawAccel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// axis-based gravity adjusted accelerometer values</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// from libfreeenect:</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// as laid out via the accelerometer data sheet, which is available at</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// http://www.kionix.com/Product%20Sheets/KXSD9%20Product%20Brief.pdf</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\tofPoint <span class=\"token function\">getMksAccel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\" spellcheck=\"true\">/// get the current pitch (x axis) &amp; roll (z axis) of the kinect in degrees</span>\n    <span class=\"token comment\" spellcheck=\"true\">///</span>\n    <span class=\"token comment\" spellcheck=\"true\">/// useful to correct the 3d scene based on the camera inclination</span>\n    <span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getAccelPitch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getAccelRoll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Camera Tilt Motor</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// set tilt angle of the camera in degrees</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// 0 is flat, the range is -30 to 30</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">setCameraTiltAngle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> angleInDegrees<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the current angle</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getCurrentCameraTiltAngle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the target angle (if the camera is currently moving)</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getTargetCameraTiltAngle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n        \n<span class=\"token comment\" spellcheck=\"true\">/// \\section LED</span>\n    \n\t<span class=\"token keyword\">enum</span> LedMode <span class=\"token punctuation\">{</span>\n\t\tLED_DEFAULT <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\" spellcheck=\"true\">// yellow when not running, green when running</span>\n\t\tLED_OFF <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\t\tLED_GREEN <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\t\tLED_RED <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n\t\tLED_YELLOW <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n\t\tLED_BLINK_GREEN <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n\t\tLED_BLINK_YELLOW_RED <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t\n    <span class=\"token comment\" spellcheck=\"true\">/// set the current led color and/or blink mode,</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// only applied while the kinect is open</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">setLed</span><span class=\"token punctuation\">(</span>ofxKinect<span class=\"token operator\">::</span>LedMode mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Draw</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// enable/disable frame loading into textures on update()</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">setUseTexture</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> bUse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isUsingTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// draw the video texture</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> y<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> w<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> h<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> y<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofPoint<span class=\"token operator\">&amp;</span> point<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofRectangle<span class=\"token operator\">&amp;</span> rect<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// draw the grayscale depth texture</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">drawDepth</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> y<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> w<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> h<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">drawDepth</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span> y<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">drawDepth</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofPoint<span class=\"token operator\">&amp;</span> point<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">drawDepth</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofRectangle<span class=\"token operator\">&amp;</span> rect<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Util</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the device id</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns -1 if not connected</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">getDeviceId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the unique serial number</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns an empty string \"\" if not connected</span>\n\t<span class=\"token comment\" spellcheck=\"true\">///</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// NOTE: currently, libfreenect returns a serial number with all 0s for</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// kinect models > 1414, so this will only work with the original xbox kinect</span>\n\tstring <span class=\"token function\">getSerial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// static kinect image size</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> width <span class=\"token operator\">=</span> <span class=\"token number\">640</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> height <span class=\"token operator\">=</span> <span class=\"token number\">480</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> <span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Static global kinect context functions</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// print the device list</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">listDevices</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the total number of devices</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">numTotalDevices</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the number of available devices (not connected)</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">numAvailableDevices</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the number of currently connected devices</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">numConnectedDevices</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// is a device already connected?</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> <span class=\"token function\">isDeviceConnected</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> <span class=\"token function\">isDeviceConnected</span><span class=\"token punctuation\">(</span>string serial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the id of the next available device,</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns -1 if nothing found</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">nextAvailableId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the serial number of the next available device,</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns an empty string \"\" if nothing found</span>\n\t<span class=\"token keyword\">static</span> string <span class=\"token function\">nextAvailableSerial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// set the time to wait when not getting data before attempting to re-open device.</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setReconnectWaitTime</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> waitTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\n\t<span class=\"token keyword\">int</span> deviceId<span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; -1 when not connected</span>\n\tstring serial<span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; unique serial number, \"\" when not connected</span>\n\t\n\t<span class=\"token keyword\">bool</span> bUseTexture<span class=\"token punctuation\">;</span>\n\tofTexture depthTex<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">///&lt; the depth texture</span>\n\tofTexture videoTex<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">///&lt; the RGB texture</span>\n\t<span class=\"token keyword\">bool</span> bGrabberInited<span class=\"token punctuation\">;</span>\n\n\tofPixels videoPixels<span class=\"token punctuation\">;</span>\n\tofPixels depthPixels<span class=\"token punctuation\">;</span>\n\tofShortPixels depthPixelsRaw<span class=\"token punctuation\">;</span>\n\tofFloatPixels distancePixels<span class=\"token punctuation\">;</span>\n\n\tofPoint rawAccel<span class=\"token punctuation\">;</span>\n\tofPoint mksAccel<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">float</span> targetTiltAngleDeg<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> currentTiltAngleDeg<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> bTiltNeedsApplying<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">int</span> currentLed<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">bool</span> bLedNeedsApplying<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">bool</span> bHasMotorControl<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// cam tilt motor</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//bool bHasAccelContol; // for future use</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//bool bHasLedControl; // for future use</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">// for auto connect tries</span>\n\t<span class=\"token keyword\">float</span> timeSinceOpen<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">float</span> reconnectWaitTime<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> lastDeviceIndex<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> bGotDataDepth<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">bool</span> bGotDataVideo<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">bool</span> bFirstUpdate<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> tryCount<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\n\t<span class=\"token keyword\">friend</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ofxKinectContext</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// global statics shared between kinect instances</span>\n\t<span class=\"token keyword\">static</span> ofxKinectContext kinectContext<span class=\"token punctuation\">;</span>\n\n\tfreenect_device<span class=\"token operator\">*</span> kinectDevice<span class=\"token punctuation\">;</span>      <span class=\"token comment\" spellcheck=\"true\">///&lt; kinect device handle</span>\n\n\tofShortPixels depthPixelsRawIntra<span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; depth back</span>\n\tofPixels videoPixelsIntra<span class=\"token punctuation\">;</span>\t\t\t<span class=\"token comment\" spellcheck=\"true\">///&lt; rgb back</span>\n\tofShortPixels depthPixelsRawBack<span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; depth back</span>\n\tofPixels videoPixelsBack<span class=\"token punctuation\">;</span>\t\t\t<span class=\"token comment\" spellcheck=\"true\">///&lt; rgb back</span>\n\n\tvector<span class=\"token operator\">&lt;</span><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span><span class=\"token operator\">></span> depthLookupTable<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">updateDepthLookupTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">updateDepthPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">bool</span> bIsFrameNewVideo<span class=\"token punctuation\">,</span> bIsFrameNewDepth<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> bNeedsUpdateVideo<span class=\"token punctuation\">,</span> bNeedsUpdateDepth<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> bGrabVideo<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> bUseRegistration<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> bNearWhite<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">float</span> nearClipping<span class=\"token punctuation\">,</span> farClipping<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">bool</span> bIsVideoInfrared<span class=\"token punctuation\">;</span>  <span class=\"token comment\" spellcheck=\"true\">///&lt; is the video image infrared or RGB?</span>\n\t<span class=\"token keyword\">int</span> videoBytesPerPixel<span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">///&lt; how many bytes per pixel in the video image</span>\n\tofPixelFormat pixelFormat<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// libfreenect callbacks</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">grabDepthFrame</span><span class=\"token punctuation\">(</span>freenect_device<span class=\"token operator\">*</span> dev<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span><span class=\"token operator\">*</span> depth<span class=\"token punctuation\">,</span> uint32_t timestamp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">grabVideoFrame</span><span class=\"token punctuation\">(</span>freenect_device<span class=\"token operator\">*</span> dev<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span><span class=\"token operator\">*</span> video<span class=\"token punctuation\">,</span> uint32_t timestamp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// thread function</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">threadedFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\class ofxKinectContext</span>\n<span class=\"token comment\" spellcheck=\"true\">///</span>\n<span class=\"token comment\" spellcheck=\"true\">/// wrapper for the freenect context</span>\n<span class=\"token comment\" spellcheck=\"true\">///</span>\n<span class=\"token comment\" spellcheck=\"true\">/// do not use this directly</span>\n<span class=\"token comment\" spellcheck=\"true\">///</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ofxKinectContext</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\n\t<span class=\"token function\">ofxKinectContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">~</span><span class=\"token function\">ofxKinectContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Main</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// init the freenect context</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// clear the freenect context</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// closes all currently connected devices</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// is the context inited?</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isInited</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// open a kinect device</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// an id of -1 will open the first available</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span>ofxKinect<span class=\"token operator\">&amp;</span> kinect<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> id<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// open a kinect device by it's unique serial number</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">open</span><span class=\"token punctuation\">(</span>ofxKinect<span class=\"token operator\">&amp;</span> kinect<span class=\"token punctuation\">,</span> string serial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// close a kinect device</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span>ofxKinect<span class=\"token operator\">&amp;</span> kinect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// closes all currently connected kinects</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">closeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">/// \\section Util</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// (re)build the list of devices</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">buildDeviceList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// print the device list</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">listDevices</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> verbose<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the total number of devices</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">numTotal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the number of available devices (not connected)</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">numAvailable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the number of currently connected devices</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">numConnected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the kinect object from a device pointer</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns NULL if not found</span>\n\tofxKinect<span class=\"token operator\">*</span> <span class=\"token function\">getKinect</span><span class=\"token punctuation\">(</span>freenect_device<span class=\"token operator\">*</span> dev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the deviceList index from an id</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns -1 if not found</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">getDeviceIndex</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the deviceList index from an id</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns -1 if not found</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">getDeviceIndex</span><span class=\"token punctuation\">(</span>string serial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the deviceList id from an index</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns -1 if not found</span>\n        <span class=\"token keyword\">int</span> <span class=\"token function\">getDeviceId</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">int</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the deviceList id from a serial</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns -1 if not found</span>\n        <span class=\"token keyword\">int</span> <span class=\"token function\">getDeviceId</span><span class=\"token punctuation\">(</span>string serial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// is a device with this id already connected?</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isConnected</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// is a device with this serial already connected?</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">isConnected</span><span class=\"token punctuation\">(</span>string serial<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the id of the next available device,</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns -1 if nothing found</span>\n\t<span class=\"token keyword\">int</span> <span class=\"token function\">nextAvailableId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the serial number of the next available device,</span>\n\t<span class=\"token comment\" spellcheck=\"true\">/// returns an empty string \"\" if nothing found</span>\n\tstring <span class=\"token function\">nextAvailableSerial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// get the raw pointer</span>\n\tfreenect_context<span class=\"token operator\">*</span> <span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> kinectContext<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">// for auto-enumeration</span>\n    <span class=\"token keyword\">struct</span> KinectPair<span class=\"token punctuation\">{</span>\n\t\tstring serial<span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; unique serial number</span>\n\t\t<span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\t\t\t<span class=\"token comment\" spellcheck=\"true\">///&lt; freenect bus id</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    \n\t<span class=\"token keyword\">bool</span> bInited<span class=\"token punctuation\">;</span>\t\t\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">///&lt; has the context been initialized?</span>\n\tfreenect_context<span class=\"token operator\">*</span> kinectContext<span class=\"token punctuation\">;</span>    <span class=\"token comment\" spellcheck=\"true\">///&lt; kinect context handle</span>\n\tstd<span class=\"token operator\">::</span>vector<span class=\"token operator\">&lt;</span>KinectPair<span class=\"token operator\">></span> deviceList<span class=\"token punctuation\">;</span>\t<span class=\"token comment\" spellcheck=\"true\">///&lt; list of available devices, sorted by serial lexicographically</span>\n\tstd<span class=\"token operator\">::</span>map<span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span>ofxKinect<span class=\"token operator\">*</span><span class=\"token operator\">></span> kinects<span class=\"token punctuation\">;</span>   <span class=\"token comment\" spellcheck=\"true\">///&lt; the connected kinects</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n","type":"source","static":true}}],"fetch":[]}