{"data":[{"page":{"entry":{"name":"ofxAndroidVideoPlayer.cpp","filename":"ofxAndroidVideoPlayer.cpp","absolute":"/Users/Gilbert/Code/openFrameworks/addons/ofxAndroid/src/ofxAndroidVideoPlayer.cpp","path":"/addons/ofxAndroid/src/ofxAndroidVideoPlayer_cpp","route":"/addons/ofxAndroid/src/ofxAndroidVideoPlayer.cpp","dir":"../addons/ofxAndroid/src","ext":"cpp","type":"source","id":28,"parent":8,"breadcrumbs":[8,9,5],"siblings":[],"translations":{}},"document":"<span class=\"token comment\" spellcheck=\"true\">/*\n * ofxAndroidVideoPlayer.cpp\n *\n *  Created on: 25/04/2013\n *      Author: p\n */</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAndroidVideoPlayer.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAndroidUtils.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofLog.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofMatrix4x4.h\"</span></span>\n\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">reloadTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>bAllocated<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">glGenTextures</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>GLuint <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&amp;</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">glEnable</span><span class=\"token punctuation\">(</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureTarget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">glBindTexture</span><span class=\"token punctuation\">(</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureTarget<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>GLuint<span class=\"token punctuation\">)</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">glTexParameterf</span><span class=\"token punctuation\">(</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureTarget<span class=\"token punctuation\">,</span> GL_TEXTURE_MAG_FILTER<span class=\"token punctuation\">,</span> GL_LINEAR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">glTexParameterf</span><span class=\"token punctuation\">(</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureTarget<span class=\"token punctuation\">,</span> GL_TEXTURE_MIN_FILTER<span class=\"token punctuation\">,</span> GL_LINEAR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">glTexParameterf</span><span class=\"token punctuation\">(</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureTarget<span class=\"token punctuation\">,</span> GL_TEXTURE_WRAP_S<span class=\"token punctuation\">,</span> GL_CLAMP_TO_EDGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">glTexParameterf</span><span class=\"token punctuation\">(</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureTarget<span class=\"token punctuation\">,</span> GL_TEXTURE_WRAP_T<span class=\"token punctuation\">,</span> GL_CLAMP_TO_EDGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">glTexEnvf</span><span class=\"token punctuation\">(</span>GL_TEXTURE_ENV<span class=\"token punctuation\">,</span> GL_TEXTURE_ENV_MODE<span class=\"token punctuation\">,</span> GL_MODULATE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">glDisable</span><span class=\"token punctuation\">(</span>texture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureTarget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"reloadTexture(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tjmethodID javasetTexture <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setTexture\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(I)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javasetTexture<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"reloadTexture(): couldn't get java setTexture for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javasetTexture<span class=\"token punctuation\">,</span>texture<span class=\"token punctuation\">.</span><span class=\"token function\">getTextureData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textureID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">unloadTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\ttexture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>textureID<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\nofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">ofxAndroidVideoPlayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"constructor: couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tjclass <span class=\"token class-name\">localClass</span> <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">FindClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cc/openframeworks/OFAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tjavaClass <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jclass<span class=\"token punctuation\">)</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">NewGlobalRef</span><span class=\"token punctuation\">(</span>localClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"constructor: couldn't get java class for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID constructor <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"&lt;init>\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"constructor: couldn't get java constructor for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjavaVideoPlayer <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">NewObject</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"constructor: couldn't create java VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjavaVideoPlayer <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jobject<span class=\"token punctuation\">)</span>env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">NewGlobalRef</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tbIsFrameNew <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\tjfloatArray localMatrixJava <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">NewFloatArray</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tmatrixJava <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>jfloatArray<span class=\"token punctuation\">)</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">NewGlobalRef</span><span class=\"token punctuation\">(</span>localMatrixJava<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unloadGL<span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidVideoPlayer<span class=\"token operator\">::</span>unloadTexture<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reloadGL<span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidVideoPlayer<span class=\"token operator\">::</span>reloadTexture<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\nofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token operator\">~</span><span class=\"token function\">ofxAndroidVideoPlayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">)</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">DeleteGlobalRef</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">)</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">DeleteGlobalRef</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>matrixJava<span class=\"token punctuation\">)</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">DeleteGlobalRef</span><span class=\"token punctuation\">(</span>matrixJava<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">bool</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>string fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"load(): java soundVideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tjmethodID javaLoadMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"loadMovie\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(Ljava/lang/String;)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaLoadMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"load(): couldn't get java loadVideo for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjstring javaFileName <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">NewStringUTF</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofToDataPath</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaLoadMethod<span class=\"token punctuation\">,</span>javaFileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">DeleteLocalRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>jobject<span class=\"token punctuation\">)</span>javaFileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tjmethodID javaGetWidthMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"getWidth\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()I\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaGetWidthMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"loadMovie(): couldn't get java getWidth for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\twidth <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallIntMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span> javaGetWidthMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tjmethodID javaGetHeightMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"getHeight\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()I\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaGetHeightMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"loadMovie(): couldn't get java getHeight for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\theight <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallIntMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span> javaGetHeightMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tofTextureData td<span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> width<span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> height<span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>tex_w <span class=\"token operator\">=</span> td<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>tex_h <span class=\"token operator\">=</span> td<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>tex_t <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// Hack!</span>\n\ttd<span class=\"token punctuation\">.</span>tex_u <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>textureTarget <span class=\"token operator\">=</span> GL_TEXTURE_EXTERNAL_OES<span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>glInternalFormat <span class=\"token operator\">=</span> GL_RGBA<span class=\"token punctuation\">;</span>\n\ttd<span class=\"token punctuation\">.</span>bFlipTexture <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">// hack to initialize gl resources from outside ofTexture</span>\n\ttexture<span class=\"token punctuation\">.</span>texData <span class=\"token operator\">=</span> td<span class=\"token punctuation\">;</span>\n\ttexture<span class=\"token punctuation\">.</span>texData<span class=\"token punctuation\">.</span>bAllocated <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">reloadTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">ofLogVerbose</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"loadMovie(): movie size: \"</span><span class=\"token operator\">&lt;&lt;</span> width <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"x\"</span> <span class=\"token operator\">&lt;&lt;</span> height<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"unloadMovie(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"unloadMovie(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaUnloadMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"unloadMovie\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaUnloadMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"unloadMovie(): couldn't get java unloadMovie for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token function\">unloadTexture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaUnloadMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tjmethodID javaUpdate <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"update\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()Z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaUpdate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"update(): couldn't get java update for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tbIsFrameNew <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallBooleanMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaUpdate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tjmethodID javaGetTextureMatrix <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"getTextureMatrix\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"([F)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaGetTextureMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"update(): couldn't get java javaGetTextureMatrix for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaGetTextureMatrix<span class=\"token punctuation\">,</span>matrixJava<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tjfloat <span class=\"token operator\">*</span> m <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetFloatArrayElements</span><span class=\"token punctuation\">(</span>matrixJava<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tofMatrix4x4 <span class=\"token function\">textureMatrix</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tofMatrix4x4 vFlipTextureMatrix<span class=\"token punctuation\">;</span>\n\tvFlipTextureMatrix<span class=\"token punctuation\">.</span><span class=\"token function\">scale</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tvFlipTextureMatrix<span class=\"token punctuation\">.</span><span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ttexture<span class=\"token punctuation\">.</span><span class=\"token function\">setTextureMatrix</span><span class=\"token punctuation\">(</span>vFlipTextureMatrix <span class=\"token operator\">*</span> textureMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//texture.getTextureData().tex_t = 1.+1-matrix.getPtr()[0]; // Hack!</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//texture.getTextureData().tex_u = 1.;</span>\n\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">ReleaseFloatArrayElements</span><span class=\"token punctuation\">(</span>matrixJava<span class=\"token punctuation\">,</span>m<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tjmethodID javaPlay <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"play\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaPlay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"play(): couldn't get java play for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaPlay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tjmethodID javaStop <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"stop\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaStop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"stop(): couldn't get java stop for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaStop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">bool</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">isPaused</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isPaused(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isPaused(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaIsPausedMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"isPaused\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()Z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaIsPausedMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isPaused(): couldn't get java isPaused for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallBooleanMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaIsPausedMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">bool</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">isLoaded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isLoaded(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isLoaded(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaIsLoadedMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"isLoaded\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()Z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaIsLoadedMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isLoaded(): couldn't get java isLoaded for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallBooleanMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaIsLoadedMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">bool</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">isPlaying</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isPlaying(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isPlaying(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaIsPlayingMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"isPlaying\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()Z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaIsPlayingMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"isPlaying(): couldn't get the java isPlaying for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallBooleanMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaIsPlayingMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\nofTexture <span class=\"token operator\">*</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">getTexturePtr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token operator\">&amp;</span> texture<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">float</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> width<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">float</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> height<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">float</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">getPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getPosition(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getPosition(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaGetPositionMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"getPosition\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()F\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaGetPositionMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getPosition(): couldn't get java getPosition for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallFloatMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaGetPositionMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">float</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">getDuration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getDuration(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getDuration(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaGetDurationMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"getDuration\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()F\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaGetDurationMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getDuration(): couldn't get java getDuration for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallFloatMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaGetDurationMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">bool</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">getIsMovieDone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getIsMovieDone(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getIsMovieDone(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaIsMovieDoneMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"isMovieDone\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()Z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaIsMovieDoneMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getIsMovieDone(): couldn't get java isMovieDone for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallBooleanMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaIsMovieDoneMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> pct<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setPosition(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setPosition(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaSetPositionMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setPosition\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(F)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaSetPositionMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setPosition(): couldn't get java setPosition for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaSetPositionMethod<span class=\"token punctuation\">,</span>pct<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//---------------------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">setPaused</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> bPause<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setPaused(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setPaused(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaPausedMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setPaused\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(Z)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaPausedMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setPaused(): coulnd't get java setPaused for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaPausedMethod<span class=\"token punctuation\">,</span>bPause<span class=\"token operator\">?</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">setVolume</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> vol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setVolume(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setVolume(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaVolumeMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setVolume\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(F)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVolumeMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setVolume(): couldn't get java setVolume for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaVolumeMethod<span class=\"token punctuation\">,</span>vol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">setLoopState</span><span class=\"token punctuation\">(</span>ofLoopType state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setLoopState(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setLoopState(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaLoopStateMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"setLoopState\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"(Z)V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaLoopStateMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setLoopState(): couldn't get java LoopState for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">case</span> OF_LOOP_NORMAL<span class=\"token operator\">:</span>\n\t\t\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaLoopStateMethod<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">case</span> OF_LOOP_PALINDROME<span class=\"token operator\">:</span>\n\t\t\t<span class=\"token comment\" spellcheck=\"true\">// TODO Palindrome loop not implemented</span>\n\t\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setLoopState(): OF_LOOP_PALINDROME not implemented\"</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">case</span> OF_LOOP_NONE<span class=\"token operator\">:</span>\n\t\t\t<span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n\t\t\tenv<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallVoidMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaLoopStateMethod<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nofLoopType ofxAndroidVideoPlayer<span class=\"token operator\">::</span><span class=\"token function\">getLoopState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaVideoPlayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getLoopState(): java VideoPlayer not loaded\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> OF_LOOP_NONE<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tJNIEnv <span class=\"token operator\">*</span>env <span class=\"token operator\">=</span> <span class=\"token function\">ofGetJNIEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>env<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getLoopState(): couldn't get environment using GetEnv()\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> OF_LOOP_NONE<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tjmethodID javaGetLoopStateMethod <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">GetMethodID</span><span class=\"token punctuation\">(</span>javaClass<span class=\"token punctuation\">,</span><span class=\"token string\">\"getLoopState\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"()Z\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>javaGetLoopStateMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofxAndroidVideoPlayer\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"getLoopState(): couldn't get java GetLoopState for VideoPlayer\"</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> OF_LOOP_NONE<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">bool</span> loopState <span class=\"token operator\">=</span> env<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">CallBooleanMethod</span><span class=\"token punctuation\">(</span>javaVideoPlayer<span class=\"token punctuation\">,</span>javaGetLoopStateMethod<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loopState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> OF_LOOP_NORMAL<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> OF_LOOP_NONE<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token comment\" spellcheck=\"true\">/* Needs movie frameRate to work\nint ofxAndroidVideoPlayer::getCurrentFrame() {\n\n\tif(!javaVideoPlayer){\n\t\tofLogError(\"ofxAndroidVideoPlayer\") &lt;&lt; \"getCurrentFrame(): java VideoPlayer not loaded\";\n\t\treturn 0.;\n\t}\n\n\tJNIEnv *env = ofGetJNIEnv();\n\tif (!env) {\n\t\tofLogError(\"ofxAndroidVideoPlayer\") &lt;&lt; \"getCurrentFrame(): couldn't get environment using GetEnv()\";\n\t\treturn 0;\n\t}\n\n\tjmethodID javaGetCurrentFrame = env->GetMethodID(javaClass,\"getCurrentFrame\",\"()I\");\n\tif(!javaGetCurrentFrame){\n\t\tofLogError(\"ofxAndroidVideoPlayer\") &lt;&lt; \"getCurrentFrame(): couldn't get java getCurrentFrame for VideoPlayer\";\n\t\treturn 0;\n\t}\n\n\treturn env->CallIntMethod(javaVideoPlayer,javaGetCurrentFrame);\n\n};\n*/</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token comment\" spellcheck=\"true\">/* Needs movie frameRate to work\nint ofxAndroidVideoPlayer::getTotalNumFrames() {\n\n\tif(!javaVideoPlayer){\n\t\tofLogError(\"ofxAndroidVideoPlayer\") &lt;&lt; \"getTotalNumFrames(): java VideoPlayer not loaded\";\n\t\treturn 0.;\n\t}\n\n\tJNIEnv *env = ofGetJNIEnv();\n\tif (!env) {\n\t\tofLogError(\"ofxAndroidVideoPlayer\") &lt;&lt; \"getTotalNumFrames(): couldn't get environment using GetEnv()\";\n\t\treturn 0;\n\t}\n\n\tjmethodID javaGetTotalNumFrames = env->GetMethodID(javaClass,\"getTotalNumFrames\",\"()I\");\n\tif(!javaGetTotalNumFrames){\n\t\tofLogError(\"ofxAndroidVideoPlayer\") &lt;&lt; \"getTotalNumFrames(): couldn't get java getTotalNumFrames for VideoPlayer\";\n\t\treturn 0;\n\t}\n\n\treturn env->CallIntMethod(javaVideoPlayer,javaGetTotalNumFrames);\n\n};\n*/</span>\n\n\n\n\n\n\n","type":"source","static":true}}],"fetch":[]}