{"data":[{"page":{"entry":{"name":"Ball.h","filename":"Ball.h","absolute":"/Users/Gilbert/Code/openFrameworks/examples/ios/iosCoreMotionLegacyExample/src/Ball.h","path":"/examples/ios/iosCoreMotionLegacyExample/src/Ball_h","route":"/examples/ios/iosCoreMotionLegacyExample/src/Ball.h","dir":"../examples/ios/iosCoreMotionLegacyExample/src","ext":"h","type":"source","id":1309,"parent":1307,"breadcrumbs":[1307,1308,1193,436],"siblings":[],"translations":{}},"document":"<span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> BOUNCE_FACTOR\t\t\t0.7</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> ACCELEROMETER_FORCE\t\t0.2</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> RADIUS\t\t\t\t\t20</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Ball</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n        ofPoint pos<span class=\"token punctuation\">;</span>\n        ofPoint vel<span class=\"token punctuation\">;</span>\n        ofColor col<span class=\"token punctuation\">;</span>\n        ofColor touchCol<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">bool</span> bDragged<span class=\"token punctuation\">;</span>\n\t\n        <span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------------------\t</span>\n        <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            pos<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofRandomWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">ofRandomHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            vel<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofRandomf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">ofRandomf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n            <span class=\"token keyword\">float</span> val <span class=\"token operator\">=</span> <span class=\"token function\">ofRandom</span><span class=\"token punctuation\">(</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            col<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span> val<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">,</span> <span class=\"token number\">120</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> id <span class=\"token operator\">%</span> <span class=\"token number\">3</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                touchCol<span class=\"token punctuation\">.</span><span class=\"token function\">setHex</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x809d00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>  id <span class=\"token operator\">%</span> <span class=\"token number\">3</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                touchCol<span class=\"token punctuation\">.</span><span class=\"token function\">setHex</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x009d88</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n                touchCol<span class=\"token punctuation\">.</span><span class=\"token function\">setHex</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xf7941d</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\t\t\n            bDragged <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\t\n        <span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------------------\t</span>\n        <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> glm<span class=\"token operator\">::</span>vec3 <span class=\"token operator\">&amp;</span> accelerometerData<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            vel<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span><span class=\"token operator\">=</span> ACCELEROMETER_FORCE <span class=\"token operator\">*</span> accelerometerData<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token function\">ofRandomuf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            vel<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span>ACCELEROMETER_FORCE <span class=\"token operator\">*</span> accelerometerData<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token function\">ofRandomuf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\" spellcheck=\"true\">// this one is subtracted cos world Y is opposite to opengl Y</span>\n\t\t\n            <span class=\"token comment\" spellcheck=\"true\">// add vel to pos</span>\n            pos <span class=\"token operator\">+</span><span class=\"token operator\">=</span> vel<span class=\"token punctuation\">;</span>\n\t\t\n            <span class=\"token comment\" spellcheck=\"true\">// check boundaries</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">&lt;</span> RADIUS<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                pos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> RADIUS<span class=\"token punctuation\">;</span>\n                vel<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span>BOUNCE_FACTOR<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">>=</span> <span class=\"token function\">ofGetWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> RADIUS<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                pos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token function\">ofGetWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> RADIUS<span class=\"token punctuation\">;</span>\n                vel<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span>BOUNCE_FACTOR<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\t\t\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;</span> RADIUS<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> RADIUS<span class=\"token punctuation\">;</span>\n                vel<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span>BOUNCE_FACTOR<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">>=</span> <span class=\"token function\">ofGetHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> RADIUS<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token function\">ofGetHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> RADIUS<span class=\"token punctuation\">;</span>\n                vel<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span><span class=\"token operator\">=</span> <span class=\"token operator\">-</span>BOUNCE_FACTOR<span class=\"token punctuation\">;</span> \n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\t\n        <span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------------------</span>\n        <span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> bDragged <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n                <span class=\"token function\">ofSetColor</span><span class=\"token punctuation\">(</span>touchCol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">ofDrawCircle</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n                <span class=\"token function\">ofSetColor</span><span class=\"token punctuation\">(</span>col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\n                <span class=\"token function\">ofDrawCircle</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> pos<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> RADIUS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\t\n        <span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------------------\t</span>\n        <span class=\"token keyword\">void</span> <span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            pos<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            vel<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n","type":"source","static":true}}],"fetch":[]}