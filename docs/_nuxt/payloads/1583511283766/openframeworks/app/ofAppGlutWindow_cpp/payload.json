{"data":[{"page":{"entry":{"name":"ofAppGlutWindow.cpp","filename":"ofAppGlutWindow.cpp","absolute":"/Users/Gilbert/Code/openFrameworks/libs/openFrameworks/app/ofAppGlutWindow.cpp","path":"/openframeworks/app/ofAppGlutWindow_cpp","route":"/openframeworks/app/ofAppGlutWindow.cpp","dir":"../libs/openFrameworks/app","ext":"cpp","type":"source","id":213,"parent":207,"breadcrumbs":[207,195],"siblings":[],"translations":{}},"document":"<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppGlutWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofBaseApp.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofConstants.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofPixels.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofGLRenderer.h\"</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_WIN32</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">if</span> (_MSC_VER)</span>\n\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> GLUT_BUILDING_LIB</span>\n\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"glut.h\"</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;GL/glut.h></span></span>\n\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;GL/freeglut_ext.h></span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Shellapi.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_OSX</span>\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;OpenGL/OpenGL.h></span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"../../../libs/glut/lib/osx/GLUT.framework/Versions/A/Headers/glut.h\"</span></span>\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Cocoa/Cocoa.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_LINUX</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;GL/glut.h></span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofIcon.h\"</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofImage.h\"</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;X11/Xatom.h></span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;GL/freeglut_ext.h></span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;GL/glx.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">// glut works with static callbacks UGH, so we need static variables here:</span>\n\n<span class=\"token keyword\">static</span> ofWindowMode windowMode<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span>\t\t\tbNewScreenMode<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>\t\t\tbuttonInUse<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span>\t\t\tbEnableSetupScreen<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span>\t\t\tbDoubleBuffered<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>\t\t\trequestedWidth<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>\t\t\trequestedHeight<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> \t\t\tnonFullScreenX<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> \t\t\tnonFullScreenY<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>\t\t\twindowW<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>\t\t\twindowH<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span>          nFramesSinceWindowResized<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> ofOrientation\torientation<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> ofAppGlutWindow <span class=\"token operator\">*</span> instance<span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_WIN32</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------</span>\n\n<span class=\"token comment\" spellcheck=\"true\">// this is to fix a bug with glut that doesn't properly close the app</span>\n<span class=\"token comment\" spellcheck=\"true\">// with window closing.  we grab the window procedure, store it, and parse windows messages,</span>\n<span class=\"token comment\" spellcheck=\"true\">// using the close and destroy messages and passing on the others...</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------</span>\n\n<span class=\"token keyword\">static</span> WNDPROC currentWndProc<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">static</span> HWND handle  <span class=\"token operator\">=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\" spellcheck=\"true\">// This function takes in a wParam from the WM_DROPFILES message and</span>\n<span class=\"token comment\" spellcheck=\"true\">// prints all the files to a message box.</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">HandleFiles</span><span class=\"token punctuation\">(</span>WPARAM wParam<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\" spellcheck=\"true\">// DragQueryFile() takes a LPWSTR for the name so we need a TCHAR string</span>\n    TCHAR szName<span class=\"token punctuation\">[</span>MAX_PATH<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\" spellcheck=\"true\">// Here we cast the wParam as a HDROP handle to pass into the next functions</span>\n    HDROP hDrop <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>HDROP<span class=\"token punctuation\">)</span>wParam<span class=\"token punctuation\">;</span>\n\n\tPOINT pt<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">DragQueryPoint</span><span class=\"token punctuation\">(</span>hDrop<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>pt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//ofLogNotice(\"ofAppGlutWindow\") &lt;&lt; \"drag point: \" &lt;&lt; pt.x &lt;&lt; pt.y;</span>\n\n\tofDragInfo info<span class=\"token punctuation\">;</span>\n\tinfo<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> pt<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n\tinfo<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> pt<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\" spellcheck=\"true\">// This functions has a couple functionalities.  If you pass in 0xFFFFFFFF in</span>\n    <span class=\"token comment\" spellcheck=\"true\">// the second parameter then it returns the count of how many filers were drag</span>\n    <span class=\"token comment\" spellcheck=\"true\">// and dropped.  Otherwise, the function fills in the szName string array with</span>\n    <span class=\"token comment\" spellcheck=\"true\">// the current file being queried.</span>\n    <span class=\"token keyword\">int</span> count <span class=\"token operator\">=</span> <span class=\"token function\">DragQueryFile</span><span class=\"token punctuation\">(</span>hDrop<span class=\"token punctuation\">,</span> <span class=\"token number\">0xFFFFFFFF</span><span class=\"token punctuation\">,</span> szName<span class=\"token punctuation\">,</span> MAX_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\" spellcheck=\"true\">// Here we go through all the files that were drag and dropped then display them</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> count<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\" spellcheck=\"true\">// Grab the name of the file associated with index \"i\" in the list of files dropped.</span>\n        <span class=\"token comment\" spellcheck=\"true\">// Be sure you know that the name is attached to the FULL path of the file.</span>\n        <span class=\"token function\">DragQueryFile</span><span class=\"token punctuation\">(</span>hDrop<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> szName<span class=\"token punctuation\">,</span> MAX_PATH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">wchar_t</span> <span class=\"token operator\">*</span> s <span class=\"token operator\">=</span>  <span class=\"token punctuation\">(</span><span class=\"token keyword\">wchar_t</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>szName<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">char</span> dfault <span class=\"token operator\">=</span> <span class=\"token string\">'?'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> std<span class=\"token operator\">::</span>locale<span class=\"token operator\">&amp;</span> loc <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span><span class=\"token function\">locale</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tstd<span class=\"token operator\">::</span>ostringstream stm<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">*</span>s <span class=\"token operator\">!=</span> L<span class=\"token string\">'\\0'</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tstm <span class=\"token operator\">&lt;&lt;</span> std<span class=\"token operator\">::</span>use_facet<span class=\"token operator\">&lt;</span> std<span class=\"token operator\">::</span>ctype<span class=\"token operator\">&lt;</span><span class=\"token keyword\">wchar_t</span><span class=\"token operator\">></span> <span class=\"token operator\">></span><span class=\"token punctuation\">(</span> loc <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">narrow</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">*</span>s<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span> dfault <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\tinfo<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>stm<span class=\"token punctuation\">.</span><span class=\"token function\">str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\" spellcheck=\"true\">//toUTF8(udispName, dispName);</span>\n\n        <span class=\"token comment\" spellcheck=\"true\">// Bring up a message box that displays the current file being processed</span>\n        <span class=\"token comment\" spellcheck=\"true\">//MessageBox(GetForegroundWindow(), szName, L\"Current file received\", MB_OK);</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\" spellcheck=\"true\">// Finally, we destroy the HDROP handle so the extra memory</span>\n    <span class=\"token comment\" spellcheck=\"true\">// allocated by the application is released.</span>\n    <span class=\"token function\">DragFinish</span><span class=\"token punctuation\">(</span>hDrop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyDragEvent</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">static</span> LRESULT CALLBACK <span class=\"token function\">winProc</span><span class=\"token punctuation\">(</span>HWND hwnd<span class=\"token punctuation\">,</span> UINT Msg<span class=\"token punctuation\">,</span> WPARAM wParam<span class=\"token punctuation\">,</span> LPARAM lParam<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n   <span class=\"token comment\" spellcheck=\"true\">//we catch close and destroy messages</span>\n   <span class=\"token comment\" spellcheck=\"true\">//and send them to OF</span>\n\n   <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>Msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n      <span class=\"token keyword\">case</span> WM_CLOSE<span class=\"token operator\">:</span>\n         <span class=\"token function\">OF_EXIT_APP</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> WM_DESTROY<span class=\"token operator\">:</span>\n         <span class=\"token function\">OF_EXIT_APP</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token keyword\">case</span> WM_DROPFILES<span class=\"token operator\">:</span>\n\n            <span class=\"token comment\" spellcheck=\"true\">// Call our function we created to display all the files.</span>\n            <span class=\"token comment\" spellcheck=\"true\">// We pass the wParam because it's the HDROP handle.</span>\n            <span class=\"token function\">HandleFiles</span><span class=\"token punctuation\">(</span>wParam<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n         <span class=\"token keyword\">return</span> <span class=\"token function\">CallWindowProc</span><span class=\"token punctuation\">(</span>currentWndProc<span class=\"token punctuation\">,</span> handle<span class=\"token punctuation\">,</span> Msg<span class=\"token punctuation\">,</span> wParam<span class=\"token punctuation\">,</span> lParam<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">fixCloseWindowOnWin32</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">//get the HWND</span>\n\thandle <span class=\"token operator\">=</span> <span class=\"token function\">WindowFromDC</span><span class=\"token punctuation\">(</span><span class=\"token function\">wglGetCurrentDC</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">// enable drag and drop of files.</span>\n\t<span class=\"token function\">DragAcceptFiles</span> <span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">,</span> TRUE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">//store the current message event handler for the window</span>\n\tcurrentWndProc <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>WNDPROC<span class=\"token punctuation\">)</span><span class=\"token function\">GetWindowLongPtr</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">,</span> GWLP_WNDPROC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">//tell the window to now use our event handler!</span>\n\t<span class=\"token function\">SetWindowLongPtr</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">,</span> GWLP_WNDPROC<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>LONG_PTR<span class=\"token punctuation\">)</span>winProc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n\n\n\n<span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------------</span>\nofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">ofAppGlutWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\twindowMode\t\t\t<span class=\"token operator\">=</span> OF_WINDOW<span class=\"token punctuation\">;</span>\n\tbNewScreenMode\t\t<span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tnFramesSinceWindowResized <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\tbuttonInUse\t\t\t<span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\tbEnableSetupScreen\t<span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\trequestedWidth\t\t<span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\trequestedHeight\t\t<span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\tnonFullScreenX\t\t<span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\tnonFullScreenY\t\t<span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\tdisplayString\t\t<span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\torientation\t\t\t<span class=\"token operator\">=</span> OF_ORIENTATION_DEFAULT<span class=\"token punctuation\">;</span>\n\tbDoubleBuffered <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">// LIA</span>\n\ticonSet <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\tinstance <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n\twindowId <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//lets you enable alpha blending using a display string like:</span>\n<span class=\"token comment\" spellcheck=\"true\">// \"rgba double samples>=4 depth\" ( mac )</span>\n<span class=\"token comment\" spellcheck=\"true\">// \"rgb double depth alpha samples>=4\" ( some pcs )</span>\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n <span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setGlutDisplayString</span><span class=\"token punctuation\">(</span>string displayStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tdisplayString <span class=\"token operator\">=</span> displayStr<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setDoubleBuffering</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> _bDoubleBuffered<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tbDoubleBuffered <span class=\"token operator\">=</span> _bDoubleBuffered<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofGLWindowSettings <span class=\"token operator\">&amp;</span> settings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">int</span> argc <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>argv <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token string\">\"openframeworks\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>vptr <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>argv<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">glutInit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>argc<span class=\"token punctuation\">,</span> vptr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> displayString <span class=\"token operator\">!=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">glutInitDisplayString</span><span class=\"token punctuation\">(</span> displayString<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bDoubleBuffered<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glutInitDisplayMode</span><span class=\"token punctuation\">(</span>GLUT_RGB <span class=\"token operator\">|</span> GLUT_DOUBLE <span class=\"token operator\">|</span> GLUT_DEPTH <span class=\"token operator\">|</span> GLUT_ALPHA <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glutInitDisplayMode</span><span class=\"token punctuation\">(</span>GLUT_RGB <span class=\"token operator\">|</span> GLUT_SINGLE <span class=\"token operator\">|</span> GLUT_DEPTH <span class=\"token operator\">|</span> GLUT_ALPHA <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\twindowMode <span class=\"token operator\">=</span> settings<span class=\"token punctuation\">.</span>windowMode<span class=\"token punctuation\">;</span>\n\tbNewScreenMode <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>windowMode <span class=\"token operator\">==</span> OF_FULLSCREEN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">glutInitWindowSize</span><span class=\"token punctuation\">(</span><span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_SCREEN_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_SCREEN_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\twindowId <span class=\"token operator\">=</span> <span class=\"token function\">glutCreateWindow</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\trequestedWidth  <span class=\"token operator\">=</span> settings<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\trequestedHeight <span class=\"token operator\">=</span> settings<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>windowMode <span class=\"token operator\">!=</span> OF_GAME_MODE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">glutInitWindowSize</span><span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> settings<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">glutCreateWindow</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\" spellcheck=\"true\">/*\n\t\tofBackground(200,200,200);\t\t// default bg color\n\t\tofSetColor(0xFFFFFF); \t\t\t// default draw color\n\t\t// used to be black, but\n\t\t// black + texture = black\n\t\t// so maybe grey bg\n\t\t// and \"white\" fg color\n\t\t// as default works the best...\n\t\t*/</span>\n\n\t\trequestedWidth  <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\trequestedHeight <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> displayString <span class=\"token operator\">!=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glutInitDisplayString</span><span class=\"token punctuation\">(</span> displayString<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glutInitDisplayMode</span><span class=\"token punctuation\">(</span>GLUT_RGB <span class=\"token operator\">|</span> GLUT_DOUBLE <span class=\"token operator\">|</span> GLUT_DEPTH <span class=\"token operator\">|</span> GLUT_ALPHA <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n    \t<span class=\"token comment\" spellcheck=\"true\">// w x h, 32bit pixel depth, 60Hz refresh rate</span>\n\t\t<span class=\"token keyword\">char</span> gameStr<span class=\"token punctuation\">[</span><span class=\"token number\">64</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span> gameStr<span class=\"token punctuation\">,</span> <span class=\"token string\">\"%dx%d:%d@%d\"</span><span class=\"token punctuation\">,</span> settings<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> settings<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    \t<span class=\"token function\">glutGameModeString</span><span class=\"token punctuation\">(</span>gameStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    \t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">glutGameModeGet</span><span class=\"token punctuation\">(</span>GLUT_GAME_MODE_POSSIBLE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    \t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppGlutWindow\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"setupOpenGL(): selected game mode format \"</span> <span class=\"token operator\">&lt;&lt;</span> gameStr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\" not available\"</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token punctuation\">}</span>\n    \t<span class=\"token comment\" spellcheck=\"true\">// start fullscreen game mode</span>\n    \t<span class=\"token function\">glutEnterGameMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\twindowW <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\twindowH <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tcurrentRenderer <span class=\"token operator\">=</span> shared_ptr<span class=\"token operator\">&lt;</span>ofBaseRenderer<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">ofGLRenderer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifndef</span> TARGET_OPENGLES</span>\n\tglewExperimental <span class=\"token operator\">=</span> GL_TRUE<span class=\"token punctuation\">;</span>\n\tGLenum err <span class=\"token operator\">=</span> <span class=\"token function\">glewInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>GLEW_OK <span class=\"token operator\">!=</span> err<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\" spellcheck=\"true\">/* Problem: glewInit failed, something is seriously wrong. */</span>\n\t\t<span class=\"token function\">ofLogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ofAppRunner\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"couldn't init GLEW: \"</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">glewGetErrorString</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token keyword\">static_cast</span><span class=\"token operator\">&lt;</span>ofGLRenderer<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>currentRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">setVerticalSync</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\" spellcheck=\"true\">//----------------------</span>\n    <span class=\"token comment\" spellcheck=\"true\">// setup the callbacks</span>\n\n    <span class=\"token function\">glutMouseFunc</span><span class=\"token punctuation\">(</span>mouse_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">glutMotionFunc</span><span class=\"token punctuation\">(</span>motion_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">glutPassiveMotionFunc</span><span class=\"token punctuation\">(</span>passive_motion_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">glutIdleFunc</span><span class=\"token punctuation\">(</span>idle_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">glutDisplayFunc</span><span class=\"token punctuation\">(</span>display<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">glutKeyboardFunc</span><span class=\"token punctuation\">(</span>keyboard_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">glutKeyboardUpFunc</span><span class=\"token punctuation\">(</span>keyboard_up_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">glutSpecialFunc</span><span class=\"token punctuation\">(</span>special_key_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">glutSpecialUpFunc</span><span class=\"token punctuation\">(</span>special_key_up_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">glutReshapeFunc</span><span class=\"token punctuation\">(</span>resize_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">glutEntryFunc</span><span class=\"token punctuation\">(</span>entry_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_LINUX</span>\n\t<span class=\"token function\">glutCloseFunc</span><span class=\"token punctuation\">(</span>exit_cb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_OSX</span>\n\t<span class=\"token function\">glutDragEventFunc</span><span class=\"token punctuation\">(</span>dragEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n    nFramesSinceWindowResized <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_WIN32</span>\n        <span class=\"token comment\" spellcheck=\"true\">//----------------------</span>\n        <span class=\"token comment\" spellcheck=\"true\">// this is specific to windows (respond properly to close / destroy)</span>\n        <span class=\"token function\">fixCloseWindowOnWin32</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_LINUX</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>iconSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tofPixels iconPixels<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> DEBUG</span>\n\t\t\ticonPixels<span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span>ofIconDebug<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span>ofIconDebug<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">,</span>ofIconDebug<span class=\"token punctuation\">.</span>bytes_per_pixel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">GIMP_IMAGE_RUN_LENGTH_DECODE</span><span class=\"token punctuation\">(</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>ofIconDebug<span class=\"token punctuation\">.</span>rle_pixel_data<span class=\"token punctuation\">,</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>ofIconDebug<span class=\"token punctuation\">.</span>bytes_per_pixel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\t\t\ticonPixels<span class=\"token punctuation\">.</span><span class=\"token function\">allocate</span><span class=\"token punctuation\">(</span>ofIcon<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span>ofIcon<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">,</span>ofIcon<span class=\"token punctuation\">.</span>bytes_per_pixel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">GIMP_IMAGE_RUN_LENGTH_DECODE</span><span class=\"token punctuation\">(</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>ofIcon<span class=\"token punctuation\">.</span>rle_pixel_data<span class=\"token punctuation\">,</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>ofIcon<span class=\"token punctuation\">.</span>bytes_per_pixel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t\t<span class=\"token function\">setWindowIcon</span><span class=\"token punctuation\">(</span>iconPixels<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">.</span><span class=\"token function\">isPositionSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">setWindowPosition</span><span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">.</span><span class=\"token function\">getPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>settings<span class=\"token punctuation\">.</span><span class=\"token function\">getPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_OSX</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// The osx implementation of glut changes the cwd, this restores it</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// to wherever it was when the app was started</span>\n\t<span class=\"token function\">ofRestoreWorkingDirectoryToDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_LINUX</span>\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setWindowIcon</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> string <span class=\"token operator\">&amp;</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    ofPixels iconPixels<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">ofLoadImage</span><span class=\"token punctuation\">(</span>iconPixels<span class=\"token punctuation\">,</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">setWindowIcon</span><span class=\"token punctuation\">(</span>iconPixels<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setWindowIcon</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofPixels <span class=\"token operator\">&amp;</span> iconPixels<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\ticonSet <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tDisplay <span class=\"token operator\">*</span>m_display <span class=\"token operator\">=</span> <span class=\"token function\">glXGetCurrentDisplay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tGLXDrawable m_window <span class=\"token operator\">=</span> <span class=\"token function\">glXGetCurrentDrawable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ticonSet <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> length <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token operator\">+</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> <span class=\"token operator\">*</span> buffer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span><span class=\"token punctuation\">[</span>length<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\tbuffer<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tbuffer<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>size_t i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>iconPixels<span class=\"token punctuation\">.</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tbuffer<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> iconPixels<span class=\"token punctuation\">[</span>i<span class=\"token operator\">*</span><span class=\"token number\">4</span><span class=\"token operator\">+</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token number\">24</span><span class=\"token punctuation\">;</span>\n\t\tbuffer<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> iconPixels<span class=\"token punctuation\">[</span>i<span class=\"token operator\">*</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token number\">16</span><span class=\"token punctuation\">;</span>\n\t\tbuffer<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> iconPixels<span class=\"token punctuation\">[</span>i<span class=\"token operator\">*</span><span class=\"token number\">4</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\n\t\tbuffer<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span><span class=\"token operator\">=</span> iconPixels<span class=\"token punctuation\">[</span>i<span class=\"token operator\">*</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token function\">XChangeProperty</span><span class=\"token punctuation\">(</span>m_display<span class=\"token punctuation\">,</span> m_window<span class=\"token punctuation\">,</span> <span class=\"token function\">XInternAtom</span><span class=\"token punctuation\">(</span>m_display<span class=\"token punctuation\">,</span> <span class=\"token string\">\"_NET_WM_ICON\"</span><span class=\"token punctuation\">,</span> False<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> XA_CARDINAL<span class=\"token punctuation\">,</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t PropModeReplace<span class=\"token punctuation\">,</span>  <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>buffer<span class=\"token punctuation\">,</span>  length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">delete</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> buffer<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">XFlush</span><span class=\"token punctuation\">(</span>m_display<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">idle_cb</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyExit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">disable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_LINUX</span>\n\t<span class=\"token function\">glutLeaveMainLoop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\tstd<span class=\"token operator\">::</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifySetup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">glutMainLoop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setWindowTitle</span><span class=\"token punctuation\">(</span>string title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">glutSetWindowTitle</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">c_str</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nglm<span class=\"token operator\">::</span>vec2 ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">getWindowSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>windowW<span class=\"token punctuation\">,</span> windowH<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nglm<span class=\"token operator\">::</span>vec2 ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">getWindowPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> y <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_Y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_DEFAULT <span class=\"token operator\">||</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_180 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>y<span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nglm<span class=\"token operator\">::</span>vec2 ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">getScreenSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> width <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_SCREEN_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> height <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_SCREEN_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_DEFAULT <span class=\"token operator\">||</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_180 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>height<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">int</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_DEFAULT <span class=\"token operator\">||</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_180 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> windowW<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> windowH<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">int</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_DEFAULT <span class=\"token operator\">||</span> orientation <span class=\"token operator\">==</span> OF_ORIENTATION_180 <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> windowH<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> windowW<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setOrientation</span><span class=\"token punctuation\">(</span>ofOrientation orientationIn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\torientation <span class=\"token operator\">=</span> orientationIn<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nofOrientation ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">getOrientation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> orientation<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setWindowPosition</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">glutPositionWindow</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setWindowShape</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> w<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">glutReshapeWindow</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// this is useful, esp if we are in the first frame (setup):</span>\n\trequestedWidth  <span class=\"token operator\">=</span> w<span class=\"token punctuation\">;</span>\n\trequestedHeight <span class=\"token operator\">=</span> h<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">hideCursor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">if</span> defined(TARGET_OSX) &amp;&amp; defined(MAC_OS_X_VERSION_10_7)</span>\n\t\t <span class=\"token function\">CGDisplayHideCursor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\t\t<span class=\"token function\">glutSetCursor</span><span class=\"token punctuation\">(</span>GLUT_CURSOR_NONE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">showCursor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">if</span> defined(TARGET_OSX) &amp;&amp; defined(MAC_OS_X_VERSION_10_7)</span>\n\t\t <span class=\"token function\">CGDisplayShowCursor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\t\t<span class=\"token function\">glutSetCursor</span><span class=\"token punctuation\">(</span>GLUT_CURSOR_LEFT_ARROW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nofWindowMode ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">getWindowMode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> windowMode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">toggleFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> windowMode <span class=\"token operator\">==</span> OF_GAME_MODE<span class=\"token punctuation\">)</span><span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> windowMode <span class=\"token operator\">==</span> OF_WINDOW <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\twindowMode <span class=\"token operator\">=</span> OF_FULLSCREEN<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\twindowMode <span class=\"token operator\">=</span> OF_WINDOW<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tbNewScreenMode <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> fullscreen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> windowMode <span class=\"token operator\">==</span> OF_GAME_MODE<span class=\"token punctuation\">)</span><span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>fullscreen <span class=\"token operator\">&amp;&amp;</span> windowMode <span class=\"token operator\">!=</span> OF_FULLSCREEN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        bNewScreenMode  <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        windowMode      <span class=\"token operator\">=</span> OF_FULLSCREEN<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fullscreen <span class=\"token operator\">&amp;&amp;</span> windowMode <span class=\"token operator\">!=</span> OF_WINDOW<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        bNewScreenMode  <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        windowMode      <span class=\"token operator\">=</span> OF_WINDOW<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">enableSetupScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tbEnableSetupScreen <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">disableSetupScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tbEnableSetupScreen <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">setVerticalSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> bSync<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_WIN32</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>bSync<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>WGL_EXT_swap_control<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token function\">wglSwapIntervalEXT</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>WGL_EXT_swap_control<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token function\">wglSwapIntervalEXT</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_OSX</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n\t\tGLint sync <span class=\"token operator\">=</span> bSync <span class=\"token operator\">==</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">CGLSetParameter</span> <span class=\"token punctuation\">(</span><span class=\"token function\">CGLGetCurrentContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> kCGLCPSwapInterval<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>sync<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_LINUX</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n\t\t<span class=\"token keyword\">void</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>swapIntervalExt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Display <span class=\"token operator\">*</span><span class=\"token punctuation\">,</span>GLXDrawable<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span>\t <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Display <span class=\"token operator\">*</span><span class=\"token punctuation\">,</span>GLXDrawable<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">glXGetProcAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> GLubyte<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"glXSwapIntervalEXT\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>swapIntervalExt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tDisplay <span class=\"token operator\">*</span>dpy <span class=\"token operator\">=</span> <span class=\"token function\">glXGetCurrentDisplay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tGLXDrawable drawable <span class=\"token operator\">=</span> <span class=\"token function\">glXGetCurrentDrawable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>drawable<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token function\">swapIntervalExt</span><span class=\"token punctuation\">(</span>dpy<span class=\"token punctuation\">,</span> drawable<span class=\"token punctuation\">,</span> bSync <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">void</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>swapInterval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">glXGetProcAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> GLubyte<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"glXSwapIntervalSGI\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>swapInterval<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tswapInterval <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token function\">glXGetProcAddress</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> GLubyte<span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"glXSwapIntervalMESA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>swapInterval<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">swapInterval</span><span class=\"token punctuation\">(</span>bSync <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nofCoreEvents <span class=\"token operator\">&amp;</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> coreEvents<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\nshared_ptr<span class=\"token operator\">&lt;</span>ofBaseRenderer<span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> currentRenderer<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">//--------------------------------</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// when I had \"glutFullScreen()\"</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// in the initOpenGl, I was gettings a \"heap\" allocation error</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// when debugging via visual studio.  putting it here, changes that.</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// maybe it's voodoo, or I am getting rid of the problem</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// by removing something unrelated, but everything seems</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// to work if I put fullscreen on the first frame of display.</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>windowMode <span class=\"token operator\">!=</span> OF_GAME_MODE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> bNewScreenMode <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> windowMode <span class=\"token operator\">==</span> OF_FULLSCREEN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------</span>\n\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">// before we go fullscreen, take a snapshot of where we are:</span>\n\t\t\t\tnonFullScreenX <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tnonFullScreenY <span class=\"token operator\">=</span> <span class=\"token function\">glutGet</span><span class=\"token punctuation\">(</span>GLUT_WINDOW_Y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------</span>\n\n\t\t\t\t<span class=\"token function\">glutFullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_OSX</span>\n\t\t\t\t\t<span class=\"token punctuation\">[</span>NSApp setPresentationOptions<span class=\"token operator\">:</span>NSApplicationPresentationHideMenuBar <span class=\"token operator\">|</span> NSApplicationPresentationHideDock<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> MAC_OS_X_VERSION_10_7 </span><span class=\"token comment\" spellcheck=\"true\">//needed for Lion as when the machine reboots the app is not at front level</span>\n\t\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFrameNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>  <span class=\"token comment\" spellcheck=\"true\">//is this long enough? too long?</span>\n\t\t\t\t\t\t\t<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>NSApplication sharedApplication<span class=\"token punctuation\">]</span> activateIgnoringOtherApps<span class=\"token operator\">:</span>YES<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t\t\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> windowMode <span class=\"token operator\">==</span> OF_WINDOW <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t\t\t\t<span class=\"token function\">glutReshapeWindow</span><span class=\"token punctuation\">(</span>requestedWidth<span class=\"token punctuation\">,</span> requestedHeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------</span>\n\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">// if we have recorded the screen posion, put it there</span>\n\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">// if not, better to let the system do it (and put it where it wants)</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFrameNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token function\">glutPositionWindow</span><span class=\"token punctuation\">(</span>nonFullScreenX<span class=\"token punctuation\">,</span>nonFullScreenY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">//----------------------------------------------------</span>\n\n\t\t\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_OSX</span>\n\t\t\t\t\t<span class=\"token punctuation\">[</span>NSApp setPresentationOptions<span class=\"token operator\">:</span>NSApplicationPresentationDefault<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\tbNewScreenMode <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span>currentRenderer<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">startRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> bEnableSetupScreen <span class=\"token punctuation\">)</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span>currentRenderer<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setupScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyDraw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_WIN32</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span>currentRenderer<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getBackgroundAuto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\" spellcheck=\"true\">// on a PC resizing a window with this method of accumulation (essentially single buffering)</span>\n        <span class=\"token comment\" spellcheck=\"true\">// is BAD, so we clear on resize events.</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nFramesSinceWindowResized <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            instance<span class=\"token operator\">-</span><span class=\"token operator\">></span>currentRenderer<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFrameNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span> <span class=\"token operator\">||</span> nFramesSinceWindowResized <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> bDoubleBuffered<span class=\"token punctuation\">)</span>    <span class=\"token function\">glutSwapBuffers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span>  <span class=\"token function\">glFlush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bDoubleBuffered<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glutSwapBuffers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glFlush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span>currentRenderer<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getBackgroundAuto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token comment\" spellcheck=\"true\">// in accum mode resizing a window is BAD, so we clear on resize events.</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nFramesSinceWindowResized <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span>currentRenderer<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bDoubleBuffered<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glutSwapBuffers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">glFlush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span>currentRenderer<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">finishRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    nFramesSinceWindowResized<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">swapBuffers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">glutSwapBuffers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">startRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">startRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//--------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">finishRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">renderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">finishRender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">rotateMouseXY</span><span class=\"token punctuation\">(</span>ofOrientation orientation<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> w<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> h<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> <span class=\"token operator\">&amp;</span>y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> savedY<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>orientation<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">case</span> OF_ORIENTATION_180<span class=\"token operator\">:</span>\n\t\t\tx <span class=\"token operator\">=</span> w <span class=\"token operator\">-</span> x<span class=\"token punctuation\">;</span>\n\t\t\ty <span class=\"token operator\">=</span> h <span class=\"token operator\">-</span> y<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">case</span> OF_ORIENTATION_90_RIGHT<span class=\"token operator\">:</span>\n\t\t\tsavedY <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n\t\t\ty <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n\t\t\tx <span class=\"token operator\">=</span> w<span class=\"token operator\">-</span>savedY<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">case</span> OF_ORIENTATION_90_LEFT<span class=\"token operator\">:</span>\n\t\t\tsavedY <span class=\"token operator\">=</span> y<span class=\"token punctuation\">;</span>\n\t\t\ty <span class=\"token operator\">=</span> h <span class=\"token operator\">-</span> x<span class=\"token punctuation\">;</span>\n\t\t\tx <span class=\"token operator\">=</span> savedY<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">case</span> OF_ORIENTATION_DEFAULT<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">mouse_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> button<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> state<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">rotateMouseXY</span><span class=\"token punctuation\">(</span>orientation<span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\t<span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">case</span> GLUT_LEFT_BUTTON<span class=\"token operator\">:</span>\n\t\tbutton <span class=\"token operator\">=</span> OF_MOUSE_BUTTON_LEFT<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">case</span> GLUT_RIGHT_BUTTON<span class=\"token operator\">:</span>\n\t\tbutton <span class=\"token operator\">=</span> OF_MOUSE_BUTTON_RIGHT<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">case</span> GLUT_MIDDLE_BUTTON<span class=\"token operator\">:</span>\n\t\tbutton <span class=\"token operator\">=</span> OF_MOUSE_BUTTON_MIDDLE<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFrameNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state <span class=\"token operator\">==</span> GLUT_DOWN<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMousePressed</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state <span class=\"token operator\">==</span> GLUT_UP<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseReleased</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\tbuttonInUse <span class=\"token operator\">=</span> button<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">motion_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">rotateMouseXY</span><span class=\"token punctuation\">(</span>orientation<span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFrameNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseDragged</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> buttonInUse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">passive_motion_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">rotateMouseXY</span><span class=\"token punctuation\">(</span>orientation<span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFrameNum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseMoved</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">dragEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span> names<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> howManyFiles<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> dragX<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> dragY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">// TODO: we need position info on mac passed through</span>\n\tofDragInfo info<span class=\"token punctuation\">;</span>\n\tinfo<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> dragX<span class=\"token punctuation\">;</span>\n\tinfo<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span>dragY<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> howManyFiles<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tstring temp <span class=\"token operator\">=</span> <span class=\"token function\">string</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tinfo<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">.</span><span class=\"token function\">push_back</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyDragEvent</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">idle_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">glutPostRedisplay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">keyboard_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyKeyPressed</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">keyboard_up_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyKeyReleased</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">special_key_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyKeyPressed</span><span class=\"token punctuation\">(</span><span class=\"token function\">special_key_to_of</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">special_key_up_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyKeyReleased</span><span class=\"token punctuation\">(</span><span class=\"token function\">special_key_to_of</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">int</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">special_key_to_of</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F1<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F1<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F2<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F2<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F3<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F3<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F4<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F4<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F5<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F5<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F6<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F6<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F7<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F7<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F8<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F8<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F9<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F9<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F10<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F10<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F11<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F11<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_F12<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_F12<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_LEFT<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_LEFT<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_UP<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_UP<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_RIGHT<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_RIGHT<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_DOWN<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_DOWN<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_PAGE_UP<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_PAGE_UP<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_PAGE_DOWN<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_PAGE_DOWN<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_HOME<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_HOME<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_END<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_END<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">case</span> GLUT_KEY_INSERT<span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> OF_KEY_INSERT<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">resize_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> w<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> h<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\twindowW <span class=\"token operator\">=</span> w<span class=\"token punctuation\">;</span>\n\twindowH <span class=\"token operator\">=</span> h<span class=\"token punctuation\">;</span>\n\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyWindowResized</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tnFramesSinceWindowResized <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">entry_cb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state <span class=\"token operator\">==</span> GLUT_ENTERED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseEntered</span><span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMouseX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMouseY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>state <span class=\"token operator\">==</span> GLUT_LEFT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyMouseExited</span><span class=\"token punctuation\">(</span>instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMouseX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> instance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMouseY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\" spellcheck=\"true\">//------------------------------------------------------------</span>\n<span class=\"token keyword\">void</span> ofAppGlutWindow<span class=\"token operator\">::</span><span class=\"token function\">exit_cb</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifyExit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tinstance<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">disable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n","type":"source"}}],"fetch":[]}