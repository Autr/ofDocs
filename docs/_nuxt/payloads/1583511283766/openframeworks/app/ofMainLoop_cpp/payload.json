{"data":[{"page":{"entry":{"name":"ofMainLoop.cpp","filename":"ofMainLoop.cpp","absolute":"/Users/Gilbert/Code/openFrameworks/libs/openFrameworks/app/ofMainLoop.cpp","path":"/openframeworks/app/ofMainLoop_cpp","route":"/openframeworks/app/ofMainLoop.cpp","dir":"../libs/openFrameworks/app","ext":"cpp","type":"source","id":222,"parent":207,"breadcrumbs":[207,195],"siblings":[],"translations":{}},"document":"<span class=\"token comment\" spellcheck=\"true\">/*\n * ofMainLoop.cpp\n *\n *  Created on: Oct 25, 2014\n *      Author: arturo\n */</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ofMainLoop.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofWindowSettings.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofConstants.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppBaseWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofBaseApp.h\"</span></span>\n\n<span class=\"token comment\" spellcheck=\"true\">//========================================================================</span>\n<span class=\"token comment\" spellcheck=\"true\">// default windowing</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_NODISPLAY</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppNoWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_OF_IOS)</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppiOSWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_ANDROID)</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppAndroidWindow.h\"</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAndroidUtils.h\"</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAndroidApp.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_RASPBERRY_PI) &amp;&amp; defined(TARGET_GLFW_WINDOW)</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppGLFWWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_RASPBERRY_PI)</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppEGLWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_EMSCRIPTEN)</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofxAppEmscriptenWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofAppGLFWWindow.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span>\n\nofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">ofMainLoop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">:</span><span class=\"token function\">bShouldClose</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">,</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">,</span><span class=\"token function\">allowMultiWindow</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">,</span><span class=\"token function\">escapeQuits</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span>\n\nofMainLoop<span class=\"token operator\">::</span><span class=\"token operator\">~</span><span class=\"token function\">ofMainLoop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nshared_ptr<span class=\"token operator\">&lt;</span>ofAppBaseWindow<span class=\"token operator\">></span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">createWindow</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> ofWindowSettings <span class=\"token operator\">&amp;</span> settings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_NODISPLAY</span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppNoWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofAppNoWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">if</span> defined(TARGET_OF_IOS)</span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppiOSWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofAppiOSWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_ANDROID)</span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppAndroidWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofAppAndroidWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> (defined(TARGET_RASPBERRY_PI) &amp;&amp; defined(TARGET_GLFW_WINDOW))</span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppGLFWWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofAppGLFWWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_RASPBERRY_PI)</span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppEGLWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofAppEGLWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_EMSCRIPTEN)</span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofxAppEmscriptenWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofxAppEmscriptenWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">elif</span> defined(TARGET_OPENGLES)</span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppGLFWWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofAppGLFWWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppGLFWWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> std<span class=\"token operator\">::</span>make_shared<span class=\"token operator\">&lt;</span>ofAppGLFWWindow<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token function\">addWindow</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setup</span><span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> window<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>shared_ptr<span class=\"token operator\">&lt;</span>ofAppBaseWindow<span class=\"token operator\">></span> window<span class=\"token punctuation\">,</span> shared_ptr<span class=\"token operator\">&lt;</span>ofBaseApp<span class=\"token operator\">></span> <span class=\"token operator\">&amp;&amp;</span> app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\twindowsApps<span class=\"token punctuation\">[</span>window<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> app<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>setup<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>update<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>draw<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>draw<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>exit<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>keyPressed<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>keyPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>keyReleased<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>keyReleased<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseMoved<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseMoved<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseDragged<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseDragged<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mousePressed<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mousePressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseReleased<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseReleased<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseScrolled<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseScrolled<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseEntered<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseEntered<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseExited<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseExited<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>windowResized<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>windowResized<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>messageEvent<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>messageReceived<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>fileDragEvent<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>dragged<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchCancelled<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchCancelled<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDoubleTap<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchDoubleTap<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDown<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchDown<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchMoved<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchMoved<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchUp<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchUp<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_ANDROID</span>\n\t\t<span class=\"token keyword\">auto</span> androidApp <span class=\"token operator\">=</span> <span class=\"token keyword\">dynamic_cast</span><span class=\"token operator\">&lt;</span>ofxAndroidApp<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>androidApp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>okPressed<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>okPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>cancelPressed<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>cancelPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>backPressed<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>backPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>networkConnected<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>networkConnectedEvent<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>pause<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>pause<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>resume<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>resume<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unloadGL<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>unloadGL<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reloadGL<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>reloadGL<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>swipe<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofAddListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>deviceOrientationChanged<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>deviceOrientationChangedEvent<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token punctuation\">}</span>\n\tcurrentWindow <span class=\"token operator\">=</span> window<span class=\"token punctuation\">;</span>\n\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">makeCurrent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>windowLoop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">notifySetup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>std<span class=\"token operator\">::</span>shared_ptr<span class=\"token operator\">&lt;</span>ofBaseApp<span class=\"token operator\">></span> <span class=\"token operator\">&amp;&amp;</span> app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>windowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">run</span><span class=\"token punctuation\">(</span>windowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span>first<span class=\"token punctuation\">,</span> std<span class=\"token operator\">::</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">int</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>windowLoop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>bShouldClose <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>windowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">loopOnce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">pollEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">windowLoop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> status<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">loopOnce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bShouldClose<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> i <span class=\"token operator\">=</span> windowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token operator\">!</span>windowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> i <span class=\"token operator\">!=</span> windowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">-</span><span class=\"token operator\">></span>first<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getWindowShouldClose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">auto</span> window <span class=\"token operator\">=</span> i<span class=\"token operator\">-</span><span class=\"token operator\">></span>first<span class=\"token punctuation\">;</span>\n\t\t\twindowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">erase</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">///&lt; i now points at the window after the one which was just erased</span>\n\t\t\twindow<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n\t\t\tcurrentWindow <span class=\"token operator\">=</span> i<span class=\"token operator\">-</span><span class=\"token operator\">></span>first<span class=\"token punctuation\">;</span>\n\t\t\ti<span class=\"token operator\">-</span><span class=\"token operator\">></span>first<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">makeCurrent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\ti<span class=\"token operator\">-</span><span class=\"token operator\">></span>first<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\ti<span class=\"token operator\">-</span><span class=\"token operator\">></span>first<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\ti<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span> <span class=\"token comment\" spellcheck=\"true\">///&lt; continue to next window</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\tloopEvent<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">pollEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>windowPollEvents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">windowPollEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\texitEvent<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> i<span class=\"token operator\">:</span> windowsApps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\tshared_ptr<span class=\"token operator\">&lt;</span>ofAppBaseWindow<span class=\"token operator\">></span> window <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">;</span>\n\t\tshared_ptr<span class=\"token operator\">&lt;</span>ofBaseApp<span class=\"token operator\">></span> app <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span>second<span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>window <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>app <span class=\"token operator\">==</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\tofEventArgs args<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofNotifyEvent</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>setup<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>update<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>draw<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>draw<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>exit<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>keyPressed<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>keyPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>keyReleased<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>keyReleased<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseMoved<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseMoved<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseDragged<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseDragged<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mousePressed<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mousePressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseReleased<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseReleased<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseScrolled<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseScrolled<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseEntered<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseEntered<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseExited<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>mouseExited<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>windowResized<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>windowResized<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>messageEvent<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>messageReceived<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>fileDragEvent<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>dragged<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchCancelled<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchCancelled<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDoubleTap<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchDoubleTap<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchDown<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchDown<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchMoved<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchMoved<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span>window<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">events</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>touchUp<span class=\"token punctuation\">,</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofBaseApp<span class=\"token operator\">::</span>touchUp<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> TARGET_ANDROID</span>\n\t\t<span class=\"token keyword\">auto</span> androidApp <span class=\"token operator\">=</span> <span class=\"token keyword\">dynamic_cast</span><span class=\"token operator\">&lt;</span>ofxAndroidApp<span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>androidApp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>okPressed<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>okPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>cancelPressed<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>cancelPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>backPressed<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>backPressed<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>networkConnected<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>networkConnectedEvent<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>pause<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>pause<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>resume<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>resume<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unloadGL<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>unloadGL<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reloadGL<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>reloadGL<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>swipe<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">ofRemoveListener</span><span class=\"token punctuation\">(</span><span class=\"token function\">ofxAndroidEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>deviceOrientationChanged<span class=\"token punctuation\">,</span>androidApp<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>ofxAndroidApp<span class=\"token operator\">::</span>deviceOrientationChangedEvent<span class=\"token punctuation\">,</span>OF_EVENT_ORDER_APP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token comment\" spellcheck=\"true\">// reset applications then windows</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// so events are present until the</span>\n\t<span class=\"token comment\" spellcheck=\"true\">// end of the application</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> <span class=\"token operator\">&amp;</span> window_app<span class=\"token operator\">:</span> windowsApps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\twindow_app<span class=\"token punctuation\">.</span>second<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\twindowsApps<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nshared_ptr<span class=\"token operator\">&lt;</span>ofAppBaseWindow<span class=\"token operator\">></span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">getCurrentWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> currentWindow<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">setCurrentWindow</span><span class=\"token punctuation\">(</span>shared_ptr<span class=\"token operator\">&lt;</span>ofAppBaseWindow<span class=\"token operator\">></span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tcurrentWindow <span class=\"token operator\">=</span> window<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">setCurrentWindow</span><span class=\"token punctuation\">(</span>ofAppBaseWindow <span class=\"token operator\">*</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>currentWindow<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> i<span class=\"token operator\">:</span> windowsApps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> window<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\tcurrentWindow <span class=\"token operator\">=</span> i<span class=\"token punctuation\">.</span>first<span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nshared_ptr<span class=\"token operator\">&lt;</span>ofBaseApp<span class=\"token operator\">></span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">getCurrentApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> windowsApps<span class=\"token punctuation\">[</span>currentWindow<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">shouldClose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> _status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> i<span class=\"token operator\">:</span> windowsApps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\ti<span class=\"token punctuation\">.</span>first<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setWindowShouldClose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\tbShouldClose <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\tstatus <span class=\"token operator\">=</span> _status<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">setEscapeQuitsLoop</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> quits<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tescapeQuits <span class=\"token operator\">=</span> quits<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> ofMainLoop<span class=\"token operator\">::</span><span class=\"token function\">keyPressed</span><span class=\"token punctuation\">(</span>ofKeyEventArgs <span class=\"token operator\">&amp;</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">.</span>key <span class=\"token operator\">==</span> OF_KEY_ESC <span class=\"token operator\">&amp;&amp;</span> escapeQuits <span class=\"token operator\">==</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\t\t\t\t<span class=\"token comment\" spellcheck=\"true\">// \"escape\"</span>\n\t\t<span class=\"token function\">shouldClose</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","type":"source"}}],"fetch":[]}