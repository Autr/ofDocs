{"data":[{"page":{"entry":{"name":"ofGstVideoGrabber.h","filename":"ofGstVideoGrabber.h","absolute":"/Users/Gilbert/Code/openFrameworks/libs/openFrameworks/video/ofGstVideoGrabber.h","path":"/openframeworks/video/ofGstVideoGrabber_h","route":"/openframeworks/video/ofGstVideoGrabber.h","dir":"../libs/openFrameworks/video","ext":"h","type":"source","id":365,"parent":354,"breadcrumbs":[354,195],"siblings":[],"translations":{}},"document":"<span class=\"token macro property\">#<span class=\"token directive keyword\">pragma</span> once</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ofGstUtils.h\"</span></span>\n\n\n<span class=\"token keyword\">struct</span> ofGstFramerate<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">int</span> numerator<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">int</span> denominator<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">struct</span> ofGstVideoFormat<span class=\"token punctuation\">{</span>\n  std<span class=\"token operator\">::</span>string mimetype<span class=\"token punctuation\">;</span>\n  std<span class=\"token operator\">::</span>string format_name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">int</span>    width<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">int</span>    height<span class=\"token punctuation\">;</span>\n  std<span class=\"token operator\">::</span>vector<span class=\"token operator\">&lt;</span>ofGstFramerate<span class=\"token operator\">></span> framerates<span class=\"token punctuation\">;</span>\n  ofGstFramerate choosen_framerate<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">struct</span> ofGstDevice<span class=\"token punctuation\">{</span>\n  std<span class=\"token operator\">::</span>string video_device<span class=\"token punctuation\">;</span>\n  std<span class=\"token operator\">::</span>string gstreamer_src<span class=\"token punctuation\">;</span>\n  std<span class=\"token operator\">::</span>string product_name<span class=\"token punctuation\">;</span>\n  std<span class=\"token operator\">::</span>string serial_id<span class=\"token punctuation\">;</span>\n  std<span class=\"token operator\">::</span>vector<span class=\"token operator\">&lt;</span>ofGstVideoFormat<span class=\"token operator\">></span> video_formats<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">int</span> current_format<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">struct</span> ofGstCamData<span class=\"token punctuation\">{</span>\n    std<span class=\"token operator\">::</span>vector<span class=\"token operator\">&lt;</span>ofGstDevice<span class=\"token operator\">></span> webcam_devices<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">bool</span> bInited<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ofGstVideoGrabber</span><span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> ofBaseVideoGrabber<span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token function\">ofGstVideoGrabber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">~</span><span class=\"token function\">ofGstVideoGrabber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\" spellcheck=\"true\">/// needs to be called before initGrabber</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">setPixelFormat</span><span class=\"token punctuation\">(</span>ofPixelFormat pixelFormat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tofPixelFormat\t<span class=\"token function\">getPixelFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">videoSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token comment\" spellcheck=\"true\">//TODO: what is this??</span>\n\n\tstd<span class=\"token operator\">::</span>vector<span class=\"token operator\">&lt;</span>ofVideoDevice<span class=\"token operator\">></span> <span class=\"token function\">listDevices</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">setDeviceID</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">setDesiredFrameRate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> framerate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> w<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">void</span> \t\t\t<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> \t\t\t<span class=\"token function\">isFrameNew</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\tofPixels<span class=\"token operator\">&amp;</span>\t\t<span class=\"token function\">getPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> ofPixels <span class=\"token operator\">&amp;</span>\t\t<span class=\"token function\">getPixels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\tofTexture <span class=\"token operator\">*</span> <span class=\"token function\">getTexturePtr</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">float</span> \t\t\t<span class=\"token function\">getHeight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">float</span> \t\t\t<span class=\"token function\">getWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> \t\t\t<span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">void</span>\t\t\t<span class=\"token function\">setVerbose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> bVerbose<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span>\t\t\t<span class=\"token function\">isInitialized</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n\tofGstVideoUtils <span class=\"token operator\">*</span>\t<span class=\"token function\">getGstVideoUtils</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\tofGstVideoFormat<span class=\"token operator\">&amp;</span>\t<span class=\"token function\">selectFormat</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> w<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> h<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> desired_framerate<span class=\"token punctuation\">,</span> ofPixelFormat desiredPixelFormat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">mutable</span> ofGstCamData camData<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span>\t\t\t\tbIsCamera<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span>\t\t\t\t\tattemptFramerate<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span>\t\t\t\t\tdeviceID<span class=\"token punctuation\">;</span>\n\tofPixelFormat\t\tinternalPixelFormat<span class=\"token punctuation\">;</span>\n\tofGstVideoUtils\t\tvideoUtils<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n","type":"source"}}],"fetch":[]}