<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>ofxTCPServer | documentation | ofDocs</title><meta data-n-head="ssr" data-hid="description" name="description" content="openFrameworks documentation and examples browser"><meta data-n-head="ssr" data-hid="keyword" name="keyword" content=""><meta data-n-head="ssr" property="og:description" content="openFrameworks documentation and examples browser" vmid="og:description"><meta data-n-head="ssr" property="og:title" content="ofxTCPServer | documentation | ofDocs" vmid="og:title"><meta data-n-head="ssr" property="og:image" content="/files/images/ofw-logo.png" vmid="og:image"><link rel="preload" href="/_nuxt/5f71eaca0bd2f1a0f939.js" as="script"><link rel="preload" href="/_nuxt/906a3ca0fb13ed3c6651.js" as="script"><link rel="preload" href="/_nuxt/fe12c0cb7395fa1032f4.css" as="style"><link rel="preload" href="/_nuxt/b673915e8a08acf593e8.js" as="script"><link rel="preload" href="/_nuxt/46e8fcacdadb233d9fb6.css" as="style"><link rel="preload" href="/_nuxt/bf355f21967a23c26c07.js" as="script"><link rel="preload" href="/_nuxt/35a90d914f539af1362f.js" as="script"><link rel="stylesheet" href="/_nuxt/fe12c0cb7395fa1032f4.css"><link rel="stylesheet" href="/_nuxt/46e8fcacdadb233d9fb6.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="app"><div id="menu"><div class="menu-inner"><div id="settings"></div><h1 class="of"><div class="inner"><span><a href="/" class="nuxt-link-active"><svg version="1.1" viewbox="0 0 110 58" width="110px" height="58px" enable-background="0 0 110 58" xml:space="preserve" class="logo"><g><path d="M58,29 C58,13 45,0 29,0 C13,0 0,13 0,29 C0,45 13,58 29,58 C45,58 58,45 58,29 Z"></path><rect x="59" y="0" width="25" height="58"></rect><rect x="85" y="26" width="15" height="15"></rect><path d="M85,0 L110,0 L85,25 L85,0 Z"></path></g></svg><div class="txt"><span class="docs f7 questrial">Docs </span><span class="version">0.11.0</span></div></a></span></div></h1><div id="search"><div class="inner"><div class="field text"><div class="field-inner"><svg viewbox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve"><path d="M35.525,31.228l-8.88-8.882c1.444-2.238,2.298-4.895,2.298-7.752c0-7.909-6.438-14.343-14.346-14.343							c-7.911,0-14.343,6.434-14.343,14.343c0,7.911,6.433,14.344,14.343,14.344c2.856,0,5.513-0.849,7.752-2.294l8.88,8.88							c0.295,0.297,0.782,0.297,1.076,0l3.22-3.221C35.824,32.008,35.824,31.523,35.525,31.228z M4.81,14.593							c0-5.396,4.391-9.788,9.788-9.788c5.398,0,9.787,4.392,9.787,9.788c0,5.398-4.389,9.789-9.787,9.789							C9.2,24.382,4.81,19.991,4.81,14.593z"></path></svg><!----><div class="text-wrapper"><input id="search_field" name="search_field" placeholder="Search (Alt+F)" autocomplete="off" tabindex="0"></div><!----><!----></div></div></div><!----></div><div id="lists" class="menu-inner mt1 mb2"><div class="inner"></div></div></div><div class="menu-bottom"><div class="inner"><button class="button"><!----><span><span class="ico">nights_stay</span></span></button></div></div></div><div id="document"><div id="renderer" class="main page"><div absolute="/Users/Gilbert/Code/openFrameworks/ofSite/documentation/addons/ofxNetwork/ofxTCPServer.markdown" route="/documentation/addons/ofxNetwork/ofxTCPServer.markdown" dir="../ofSite/documentation/addons/ofxNetwork" ext="markdown" type="page" id="2080" parent="2074" siblings="" translations="[object Object]" class="doc-header"><div class="doc-header-inner"><div class="inner"><span class="breadcrumbs"><span class="crumb"><a href="/" class="pink nuxt-link-active">ofDocs</a><span class="chevron right"></span></span><span class="crumb"><a href="/documentation/" class="pink nuxt-link-active">documentation </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/documentation/addons/" class="pink nuxt-link-active">addons </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/documentation/addons/ofxNetwork/" class="pink nuxt-link-active">ofxNetwork </a><!----><span class="chevron right"></span></span><span class="crumb"><!----><span class="link selector"><span class="name">ofxTCPServer</span><span class="chevron bottom"></span><select><option value="/documentation/addons/ofxNetwork/InetAddr">InetAddr</option><option value="/documentation/addons/ofxNetwork/ofxNetworkUtils_functions">ofxNetworkUtils (functions)</option><option value="/documentation/addons/ofxNetwork/ofxTCPClient">ofxTCPClient</option><option value="/documentation/addons/ofxNetwork/ofxTCPManager">ofxTCPManager</option><option value="/documentation/addons/ofxNetwork/ofxTCPServer">ofxTCPServer</option><option value="/documentation/addons/ofxNetwork/ofxTCPSettings">ofxTCPSettings</option><option value="/documentation/addons/ofxNetwork/ofxUDPManager">ofxUDPManager</option><option value="/documentation/addons/ofxNetwork/ofxUDPSettings">ofxUDPSettings</option></select></span><!----></span></span></div></div></div><div class="editable-wrapper"><div class="header inner"><h1 class="page-title questrial"><span class="f7"><!----><span>ofxTCPServer</span></span><span class="f3"></span></h1><div class="actions"><a href="/ofdocs/contribute/" class="button"><i class="ico">edit</i><span>Edit</span></a></div></div><div class="rendered"><div id="documentation-page" static="true"><div id="offset-page"><div id="doc-body" class="markdown"><div class="inner"><div id="description"><div class="full-description"><div class="html"><p>The ofxTCPServer creates a TCP server that will serve up TCP data to any client that can reach it. To set it up you create an instance of an ofxTCPServer and call setup() passing the port number that you want your server to listen on:</p>
<pre><code class="language-{.cpp}">TCP<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Clients connect to the server and get assigned a unique ID that allows you to send or receive data from them.</p>
<p>That unique ID is important because when a client disconnects, its ID isn't recycled, the 100th client to connect will be 100, even if there are only currently 2 clients connected.</p>
<p>You can check to see how many clients are connected to your server using the getNumClients() method, but to loop through the clients, you'll want to do something like the following:</p>
<pre><code class="language-{.cpp}">
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> TCP<span class="token punctuation">.</span><span class="token function">getLastID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// getLastID is UID of all clients</span>
<span class="token punctuation">{</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span> TCP<span class="token punctuation">.</span><span class="token function">isClientConnected</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// check and see if it's still around</span>
		  <span class="token comment" spellcheck="true">// maybe the client is sending something</span>
		  string str <span class="token operator">=</span> TCP<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		  TCP<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"You sent: "</span><span class="token operator">+</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>There are two send() methods for ASCII string data that both get a message delimiter attached to them (by default [/TCP]):</p>
<p>send(int clientID, string message) - to send to a specific client
sendToAll(string message) - to send to all clients</p>
<p>and there are two methods for sending raw ASCII data, i.e. without the message delimiter attached to them:</p>
<p>sendRawMsg(int clientID, const char * rawMsg, const int numBytes) - to send to a specific client
sendRawMsgToAll(const char * rawMsg, const int numBytes) - to send to a specific client</p>
<p>And finally two methods for sending raw non-ASCII data like bitmaps, sounds, or other binary data formats:</p>
<p>sendRawBytes(int clientID, const char * rawBytes, const int numBytes) - to send to a specific client
sendRawBytesToAll(const char * rawBytes, const int numBytes) - to send to a specific client</p>
<p>There are a few things to note:</p>
<ol>
<li>TCP is connection based which means it can be slower for things like video streams or lots of blobs of data, but more reliable than UDP. <a href="http://www.diffen.com/difference/TCP_vs_UDP">A not too technical description of the differences</a></li>
<li>TCP is not HTTP. You'll probably find that tools like browsers send a lot more information that you're initially expecting, but you can easily pull out the parts of their request that you might need from the strings.</li>
<li>Just because your ofxTCPServer is up and running does not mean that those ports on your computer will be open or that your IP will be visible. That's all configuration work to be done before your server can talk to the outside world.</li>
</ol>
<p>The ofxTCPServer is threaded by default,</p>
<h1></h1>
</div></div></div><div id="methods"><hr><section name="close" id="close" class="mb2"><div class="method mb2"><h3 class="f3 title">close( <!----> )</h3><code><span class="token keyword">bool  </span><span class="token function">close</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Close the server down and disconnect all clients.</p>
</div></div><hr></section><section name="disconnectAllClients" id="disconnectAllClients" class="mb2"><div class="method mb2"><h3 class="f3 title">disconnectAllClients( <!----> )</h3><code><span class="token keyword">bool  </span><span class="token function">disconnectAllClients</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="disconnectClient" id="disconnectClient" class="mb2"><div class="method mb2"><h3 class="f3 title">disconnectClient( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">disconnectClient</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Disconnect a particular client.</p>
</div></div><hr></section><section name="getClient" id="getClient" class="mb2"><div class="method mb2"><h3 class="f3 title">getClient( <code class="pink">...</code> )</h3><code><span class="token keyword">ofxTCPClient &  </span><span class="token function">getClient</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="getClientIP" id="getClientIP" class="mb2"><div class="method mb2"><h3 class="f3 title">getClientIP( <code class="pink">...</code> )</h3><code><span class="token keyword">string  </span><span class="token function">getClientIP</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Returns the ID that the client is connected from. This is useful for tracking clients that connect and disconnect.</p>
</div></div><hr></section><section name="getClientPort" id="getClientPort" class="mb2"><div class="method mb2"><h3 class="f3 title">getClientPort( <code class="pink">...</code> )</h3><code><span class="token keyword">int  </span><span class="token function">getClientPort</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Gets the port that the client is currently connected on.</p>
</div></div><hr></section><section name="getLastID" id="getLastID" class="mb2"><div class="method mb2"><h3 class="f3 title">getLastID( <!----> )</h3><code><span class="token keyword">int  </span><span class="token function">getLastID</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Returns the last UID assigned to a client. As this counts upwards, it's the best way to loop through all clients:</p>
<pre><code class="language-{.cpp}">
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> TCP<span class="token punctuation">.</span><span class="token function">getLastID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// getLastID is UID of all clients</span>
<span class="token punctuation">{</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span> TCP<span class="token punctuation">.</span><span class="token function">isClientConnected</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// check and see if it's still around</span>
		  <span class="token comment" spellcheck="true">// maybe the client is sending something</span>
		  string str <span class="token operator">=</span> TCP<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		  TCP<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"You sent: "</span><span class="token operator">+</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div></div><hr></section><section name="getNumClients" id="getNumClients" class="mb2"><div class="method mb2"><h3 class="f3 title">getNumClients( <!----> )</h3><code><span class="token keyword">int  </span><span class="token function">getNumClients</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Returns the number of connected clients, helpful for monitoring loads on a server but not for sending messages.</p>
</div></div><hr></section><section name="getNumReceivedBytes" id="getNumReceivedBytes" class="mb2"><div class="method mb2"><h3 class="f3 title">getNumReceivedBytes( <code class="pink">...</code> )</h3><code><span class="token keyword">int  </span><span class="token function">getNumReceivedBytes</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Returns the total bytes sent by a client.</p>
</div></div><hr></section><section name="getPort" id="getPort" class="mb2"><div class="method mb2"><h3 class="f3 title">getPort( <!----> )</h3><code><span class="token keyword">int  </span><span class="token function">getPort</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Returns the port that the server is currently serving on.</p>
</div></div><hr></section><section name="isClientConnected" id="isClientConnected" class="mb2"><div class="method mb2"><h3 class="f3 title">isClientConnected( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">isClientConnected</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Returns whether a client ID correlates to a connected client:</p>
<pre><code class="language-{.cpp}">
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> TCP<span class="token punctuation">.</span><span class="token function">getLastID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// getLastID is UID of all clients</span>
<span class="token punctuation">{</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span> TCP<span class="token punctuation">.</span><span class="token function">isClientConnected</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// check and see if it's still around</span>
		  <span class="token comment" spellcheck="true">// maybe the client is sending something</span>
		  string str <span class="token operator">=</span> TCP<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		  TCP<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"You sent: "</span><span class="token operator">+</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div></div><hr></section><section name="isClientSetup" id="isClientSetup" class="mb2"><div class="method mb2"><h3 class="f3 title">isClientSetup( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">isClientSetup</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="isConnected" id="isConnected" class="mb2"><div class="method mb2"><h3 class="f3 title">isConnected( <!----> )</h3><code><span class="token keyword">bool  </span><span class="token function">isConnected</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="ofxTCPServer" id="ofxTCPServer" class="mb2"><div class="method mb2"><h3 class="f3 title">ofxTCPServer( <code class="pink">...</code> )</h3><code><!----><span class="token function">ofxTCPServer</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">const</span> ofxTCPServer <span class="token operator">&</span>mom</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="ofxTCPServer" id="ofxTCPServer" class="mb2"><div class="method mb2"><h3 class="f3 title">ofxTCPServer( <!----> )</h3><code><!----><span class="token function">ofxTCPServer</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Constructor. You need to call setup() before your server itself is ready to receive connections.</p>
</div></div><hr></section><section name="operator=" id="operator=" class="mb2"><div class="method mb2"><h3 class="f3 title">operator=( <code class="pink">...</code> )</h3><code><span class="token keyword">ofxTCPServer &  </span><span class="token function">operator=</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">const</span> ofxTCPServer <span class="token operator">&</span>mom</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="peekReceiveRawBytes" id="peekReceiveRawBytes" class="mb2"><div class="method mb2"><h3 class="f3 title">peekReceiveRawBytes( <code class="pink">...</code> )</h3><code><span class="token keyword">int  </span><span class="token function">peekReceiveRawBytes</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>receiveBytes<span class="token punctuation">,</span> <span class="token keyword">int</span> numBytes</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="receive" id="receive" class="mb2"><div class="method mb2"><h3 class="f3 title">receive( <code class="pink">...</code> )</h3><code><span class="token keyword">string  </span><span class="token function">receive</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Receives raw bytes, such as an bitmap or audio data from a client indicated with the clientID:</p>
<pre><code class="language-{.cpp}">
<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> server<span class="token punctuation">.</span><span class="token function">getLastID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span><span class="token function">isClientConnected</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    string received <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>clientID<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// will end with delimiter, so make sure client is sending it</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div></div><hr></section><section name="receiveRawBytes" id="receiveRawBytes" class="mb2"><div class="method mb2"><h3 class="f3 title">receiveRawBytes( <code class="pink">...</code> )</h3><code><span class="token keyword">int  </span><span class="token function">receiveRawBytes</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>receiveBytes<span class="token punctuation">,</span> <span class="token keyword">int</span> numBytes</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Receives raw bytes, such as an bitmap or audio data from a client indicated with the clientID:</p>
<pre><code class="language-{.cpp}">
<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> server<span class="token punctuation">.</span><span class="token function">getLastID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span><span class="token function">isClientConnected</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> received <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">receiveRawBytes</span><span class="token punctuation">(</span>clientID<span class="token punctuation">,</span> <span class="token operator">*</span>receiveBytes<span class="token punctuation">,</span> numBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div></div><hr></section><section name="receiveRawMsg" id="receiveRawMsg" class="mb2"><div class="method mb2"><h3 class="f3 title">receiveRawMsg( <code class="pink">...</code> )</h3><code><span class="token keyword">int  </span><span class="token function">receiveRawMsg</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>receiveBytes<span class="token punctuation">,</span> <span class="token keyword">int</span> numBytes</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="send" id="send" class="mb2"><div class="method mb2"><h3 class="f3 title">send( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">send</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID<span class="token punctuation">,</span> string message</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Sends a string delimited with the delimiter value to a selected client.</p>
</div></div><hr></section><section name="sendRawBytes" id="sendRawBytes" class="mb2"><div class="method mb2"><h3 class="f3 title">sendRawBytes( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">sendRawBytes</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>rawBytes<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> numBytes</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Sends raw bytes to a selected client. See sendRawBytesToAll()</p>
</div></div><hr></section><section name="sendRawBytesToAll" id="sendRawBytesToAll" class="mb2"><div class="method mb2"><h3 class="f3 title">sendRawBytesToAll( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">sendRawBytesToAll</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>rawBytes<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> numBytes</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Sends raw bytes to all connected clients, handy for sending an image or other binary data to a client. For instance:</p>
<pre><code class="language-{.cpp}">        ofImage img<span class="token punctuation">;</span>
        img<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">"tmp.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> imageBytesToSend <span class="token operator">=</span> <span class="token number">7800</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> totalBytesSent <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> messageSize <span class="token operator">=</span> <span class="token number">256</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span> imageBytesToSend </code></pre>
</div></div><hr></section><section name="sendRawMsg" id="sendRawMsg" class="mb2"><div class="method mb2"><h3 class="f3 title">sendRawMsg( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">sendRawMsg</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> clientID<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>rawMsg<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> numBytes</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="sendRawMsgToAll" id="sendRawMsgToAll" class="mb2"><div class="method mb2"><h3 class="f3 title">sendRawMsgToAll( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">sendRawMsgToAll</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>rawMsg<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">int</span> numBytes</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="sendToAll" id="sendToAll" class="mb2"><div class="method mb2"><h3 class="f3 title">sendToAll( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">sendToAll</span><span class="token punctuation">(</span><code class="token boolean">string message</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>Sends a string delimited with the delimiter value to all connected clients.</p>
</div></div><hr></section><section name="setMessageDelimiter" id="setMessageDelimiter" class="mb2"><div class="method mb2"><h3 class="f3 title">setMessageDelimiter( <code class="pink">...</code> )</h3><code><span class="token keyword">void  </span><span class="token function">setMessageDelimiter</span><span class="token punctuation">(</span><code class="token boolean">string delim</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>This sets the message delimiter that your server will use when sending and receiving messages from clients. By default it's [\TCP] though you can have it be any value as long as it's consistent on both the client and server sides.</p>
</div></div><hr></section><section name="setVerbose" id="setVerbose" class="mb2"><div class="method mb2"><h3 class="f3 title">setVerbose( <code class="pink">...</code> )</h3><code><span class="token keyword">void  </span><span class="token function">setVerbose</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">bool</span> _verbose</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="setup" id="setup" class="mb2"><div class="method mb2"><h3 class="f3 title">setup( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">setup</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">const</span> ofxTCPSettings <span class="token operator">&</span>settings</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="setup" id="setup" class="mb2"><div class="method mb2"><h3 class="f3 title">setup( <code class="pink">...</code> )</h3><code><span class="token keyword">bool  </span><span class="token function">setup</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> _port<span class="token punctuation">,</span> <span class="token keyword">bool</span> blocking<span class="token operator">=</span><span class="token boolean">false</span></code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"><p>The port is the port that your server will serve up data on. It shouldn't be a commonly used port like 22 or 80, go with a higher number less likely to be used.
The blocking parameter signals whether the client connections will be allowed to block on the servers thread as they send a message. This becomes important when you're dealing with very large messages coming from clients.</p>
</div></div><hr></section><section name="threadedFunction" id="threadedFunction" class="mb2"><div class="method mb2"><h3 class="f3 title">threadedFunction( <!----> )</h3><code><span class="token keyword">void  </span><span class="token function">threadedFunction</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="waitConnectedClient" id="waitConnectedClient" class="mb2"><div class="method mb2"><h3 class="f3 title">waitConnectedClient( <!----> )</h3><code><span class="token keyword">void  </span><span class="token function">waitConnectedClient</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="waitConnectedClient" id="waitConnectedClient" class="mb2"><div class="method mb2"><h3 class="f3 title">waitConnectedClient( <code class="pink">...</code> )</h3><code><span class="token keyword">void  </span><span class="token function">waitConnectedClient</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">int</span> ms</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="~ofxTCPServer" id="~ofxTCPServer" class="mb2"><div class="method mb2"><h3 class="f3 title">~ofxTCPServer( <!----> )</h3><code><!----><span class="token function">~ofxTCPServer</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section></div></div></div></div><div id="side-menu"><div id="params"><h4 class="f3">Variables</h4><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">ofxTCPClient </span><span>TCPConnections</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">ofxTCPManager </span><span>TCPServer</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">bool </span><span>bClientBlocking</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">bool </span><span>connected</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">int </span><span>idCount</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">ofMutex </span><span>mConnectionsLock</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">string </span><span>messageDelimiter</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">int </span><span>port</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">condition_variable </span><span>serverReady</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">string </span><span>str</span><span class="token comment"></span></div><div class="desc"></div></div></code></div><div id="methods-list"><h4 class="f3">Methods</h4><div class="anchor"><code><a href="#close" class="pink"><span>close</span><!----></a></code></div><div class="anchor"><code><a href="#disconnectAllClients"><span>disconnectAllClients</span><!----></a></code></div><div class="anchor"><code><a href="#disconnectClient" class="pink"><span>disconnectClient</span><!----></a></code></div><div class="anchor"><code><a href="#getClient"><span>getClient</span><!----></a></code></div><div class="anchor"><code><a href="#getClientIP" class="pink"><span>getClientIP</span><!----></a></code></div><div class="anchor"><code><a href="#getClientPort" class="pink"><span>getClientPort</span><!----></a></code></div><div class="anchor"><code><a href="#getLastID" class="pink"><span>getLastID</span><!----></a></code></div><div class="anchor"><code><a href="#getNumClients" class="pink"><span>getNumClients</span><!----></a></code></div><div class="anchor"><code><a href="#getNumReceivedBytes" class="pink"><span>getNumReceivedBytes</span><!----></a></code></div><div class="anchor"><code><a href="#getPort" class="pink"><span>getPort</span><!----></a></code></div><div class="anchor"><code><a href="#isClientConnected" class="pink"><span>isClientConnected</span><!----></a></code></div><div class="anchor"><code><a href="#isClientSetup"><span>isClientSetup</span><!----></a></code></div><div class="anchor"><code><a href="#isConnected"><span>isConnected</span><!----></a></code></div><div class="anchor"><code><a href="#ofxTCPServer"><span>ofxTCPServer</span><span>(2)</span></a></code></div><div class="anchor"><code><a href="#operator="><span>operator=</span><!----></a></code></div><div class="anchor"><code><a href="#peekReceiveRawBytes"><span>peekReceiveRawBytes</span><!----></a></code></div><div class="anchor"><code><a href="#receive" class="pink"><span>receive</span><!----></a></code></div><div class="anchor"><code><a href="#receiveRawBytes" class="pink"><span>receiveRawBytes</span><!----></a></code></div><div class="anchor"><code><a href="#receiveRawMsg"><span>receiveRawMsg</span><!----></a></code></div><div class="anchor"><code><a href="#send" class="pink"><span>send</span><!----></a></code></div><div class="anchor"><code><a href="#sendRawBytes" class="pink"><span>sendRawBytes</span><!----></a></code></div><div class="anchor"><code><a href="#sendRawBytesToAll" class="pink"><span>sendRawBytesToAll</span><!----></a></code></div><div class="anchor"><code><a href="#sendRawMsg"><span>sendRawMsg</span><!----></a></code></div><div class="anchor"><code><a href="#sendRawMsgToAll"><span>sendRawMsgToAll</span><!----></a></code></div><div class="anchor"><code><a href="#sendToAll" class="pink"><span>sendToAll</span><!----></a></code></div><div class="anchor"><code><a href="#setMessageDelimiter" class="pink"><span>setMessageDelimiter</span><!----></a></code></div><div class="anchor"><code><a href="#setVerbose"><span>setVerbose</span><!----></a></code></div><div class="anchor"><code><a href="#setup"><span>setup</span><span>(2)</span></a></code></div><div class="anchor"><code><a href="#threadedFunction"><span>threadedFunction</span><!----></a></code></div><div class="anchor"><code><a href="#waitConnectedClient"><span>waitConnectedClient</span><span>(2)</span></a></code></div><div class="anchor"><code><a href="#~ofxTCPServer"><span>~ofxTCPServer</span><!----></a></code></div></div><div id="see-also" filename="ofxTCPServer.markdown" absolute="/Users/Gilbert/Code/openFrameworks/ofSite/documentation/addons/ofxNetwork/ofxTCPServer.markdown" route="/documentation/addons/ofxNetwork/ofxTCPServer.markdown" dir="../ofSite/documentation/addons/ofxNetwork" ext="markdown" type="page" parent="2074" breadcrumbs="2074,1993,1968" siblings="" translations="[object Object]" class="see-also"><h4 class="f3">See also</h4><div class="also"><a href="/addons/ofxNetwork/src/ofxTCPServer_h"><span class="origin">addons</span><span class="name">ofxTCPServer.h</span></a></div><div class="also"><a href="/addons/ofxNetwork/src/ofxTCPServer_cpp"><span class="origin">addons</span><span class="name">ofxTCPServer.cpp</span></a></div></div></div></div></div><textarea rows="0" class="markdown-editor" style="display:none">#class ofxTCPServer


&lt;!--
_visible: True_
_advanced: False_
_istemplated: False_
_extends: ofThread_
-->

##InlineDescription






##Description

The ofxTCPServer creates a TCP server that will serve up TCP data to any client that can reach it. To set it up you create an instance of an ofxTCPServer and call setup() passing the port number that you want your server to listen on:

~~~~{.cpp}
TCP.setup(8080);
~~~~

Clients connect to the server and get assigned a unique ID that allows you to send or receive data from them.

That unique ID is important because when a client disconnects, its ID isn't recycled, the 100th client to connect will be 100, even if there are only currently 2 clients connected.

You can check to see how many clients are connected to your server using the getNumClients() method, but to loop through the clients, you'll want to do something like the following:

~~~~{.cpp}

for(int i = 0; i &lt; TCP.getLastID(); i++) // getLastID is UID of all clients
{

		if( TCP.isClientConnected(i) ) { // check and see if it's still around
		  // maybe the client is sending something
		  string str = TCP.receive(i);
		  TCP.send(i, "You sent: "+str);
		}
}
~~~~

There are two send() methods for ASCII string data that both get a message delimiter attached to them (by default [/TCP]):

send(int clientID, string message) - to send to a specific client
sendToAll(string message) - to send to all clients

and there are two methods for sending raw ASCII data, i.e. without the message delimiter attached to them:

sendRawMsg(int clientID, const char * rawMsg, const int numBytes) - to send to a specific client
sendRawMsgToAll(const char * rawMsg, const int numBytes) - to send to a specific client

And finally two methods for sending raw non-ASCII data like bitmaps, sounds, or other binary data formats:

sendRawBytes(int clientID, const char * rawBytes, const int numBytes) - to send to a specific client
sendRawBytesToAll(const char * rawBytes, const int numBytes) - to send to a specific client

There are a few things to note: 
1) TCP is connection based which means it can be slower for things like video streams or lots of blobs of data, but more reliable than UDP. [A not too technical description of the differences](http://www.diffen.com/difference/TCP_vs_UDP)
2) TCP is not HTTP. You'll probably find that tools like browsers send a lot more information that you're initially expecting, but you can easily pull out the parts of their request that you might need from the strings.
3) Just because your ofxTCPServer is up and running does not mean that those ports on your computer will be open or that your IP will be visible. That's all configuration work to be done before your server can talk to the outside world.

The ofxTCPServer is threaded by default, 





##Methods



###bool close()

&lt;!--
_syntax: close()_
_name: close_
_returns: bool_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Close the server down and disconnect all clients.





&lt;!----------------------------------------------------------------------------->

###bool disconnectAllClients()

&lt;!--
_syntax: disconnectAllClients()_
_name: disconnectAllClients_
_returns: bool_
_returns_description: _
_parameters: _
_access: public_
_version_started: 0.10.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool disconnectClient(clientID)

&lt;!--
_syntax: disconnectClient(clientID)_
_name: disconnectClient_
_returns: bool_
_returns_description: _
_parameters: int clientID_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Disconnect a particular client.





&lt;!----------------------------------------------------------------------------->

###ofxTCPClient & getClient(clientID)

&lt;!--
_syntax: getClient(clientID)_
_name: getClient_
_returns: ofxTCPClient &_
_returns_description: _
_parameters: int clientID_
_access: private_
_version_started: 0.8.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###string getClientIP(clientID)

&lt;!--
_syntax: getClientIP(clientID)_
_name: getClientIP_
_returns: string_
_returns_description: _
_parameters: int clientID_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Returns the ID that the client is connected from. This is useful for tracking clients that connect and disconnect.





&lt;!----------------------------------------------------------------------------->

###int getClientPort(clientID)

&lt;!--
_syntax: getClientPort(clientID)_
_name: getClientPort_
_returns: int_
_returns_description: _
_parameters: int clientID_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Gets the port that the client is currently connected on.





&lt;!----------------------------------------------------------------------------->

###int getLastID()

&lt;!--
_syntax: getLastID()_
_name: getLastID_
_returns: int_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Returns the last UID assigned to a client. As this counts upwards, it's the best way to loop through all clients:

~~~~{.cpp}

for(int i = 0; i &lt; TCP.getLastID(); i++) // getLastID is UID of all clients
{

		if( TCP.isClientConnected(i) ) { // check and see if it's still around
		  // maybe the client is sending something
		  string str = TCP.receive(i);
		  TCP.send(i, "You sent: "+str);
		}
}
~~~~





&lt;!----------------------------------------------------------------------------->

###int getNumClients()

&lt;!--
_syntax: getNumClients()_
_name: getNumClients_
_returns: int_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Returns the number of connected clients, helpful for monitoring loads on a server but not for sending messages.





&lt;!----------------------------------------------------------------------------->

###int getNumReceivedBytes(clientID)

&lt;!--
_syntax: getNumReceivedBytes(clientID)_
_name: getNumReceivedBytes_
_returns: int_
_returns_description: _
_parameters: int clientID_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Returns the total bytes sent by a client.





&lt;!----------------------------------------------------------------------------->

###int getPort()

&lt;!--
_syntax: getPort()_
_name: getPort_
_returns: int_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Returns the port that the server is currently serving on.





&lt;!----------------------------------------------------------------------------->

###bool isClientConnected(clientID)

&lt;!--
_syntax: isClientConnected(clientID)_
_name: isClientConnected_
_returns: bool_
_returns_description: _
_parameters: int clientID_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Returns whether a client ID correlates to a connected client:

~~~~{.cpp}

for(int i = 0; i &lt; TCP.getLastID(); i++) // getLastID is UID of all clients
{

		if( TCP.isClientConnected(i) ) { // check and see if it's still around
		  // maybe the client is sending something
		  string str = TCP.receive(i);
		  TCP.send(i, "You sent: "+str);
		}
}
~~~~





&lt;!----------------------------------------------------------------------------->

###bool isClientSetup(clientID)

&lt;!--
_syntax: isClientSetup(clientID)_
_name: isClientSetup_
_returns: bool_
_returns_description: _
_parameters: int clientID_
_access: private_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool isConnected()

&lt;!--
_syntax: isConnected()_
_name: isConnected_
_returns: bool_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

### ofxTCPServer(&mom)

&lt;!--
_syntax: ofxTCPServer(&mom)_
_name: ofxTCPServer_
_returns: _
_returns_description: _
_parameters: const ofxTCPServer &mom_
_access: public_
_version_started: 0.8.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

### ofxTCPServer()

&lt;!--
_syntax: ofxTCPServer()_
_name: ofxTCPServer_
_returns: _
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Constructor. You need to call setup() before your server itself is ready to receive connections.





&lt;!----------------------------------------------------------------------------->

###ofxTCPServer & operator=(&mom)

&lt;!--
_syntax: operator=(&mom)_
_name: operator=_
_returns: ofxTCPServer &_
_returns_description: _
_parameters: const ofxTCPServer &mom_
_access: public_
_version_started: 0.8.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###int peekReceiveRawBytes(clientID, *receiveBytes, numBytes)

&lt;!--
_syntax: peekReceiveRawBytes(clientID, *receiveBytes, numBytes)_
_name: peekReceiveRawBytes_
_returns: int_
_returns_description: _
_parameters: int clientID, char *receiveBytes, int numBytes_
_access: public_
_version_started: 0.9.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###string receive(clientID)

&lt;!--
_syntax: receive(clientID)_
_name: receive_
_returns: string_
_returns_description: _
_parameters: int clientID_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Receives raw bytes, such as an bitmap or audio data from a client indicated with the clientID:

~~~~{.cpp}

for ( int i = 0; i &lt; server.getLastID(); i++ ) {
  if(server.isClientConnected(i)) {
    string received = server.receive(clientID); // will end with delimiter, so make sure client is sending it
    }
}
~~~~





&lt;!----------------------------------------------------------------------------->

###int receiveRawBytes(clientID, *receiveBytes, numBytes)

&lt;!--
_syntax: receiveRawBytes(clientID, *receiveBytes, numBytes)_
_name: receiveRawBytes_
_returns: int_
_returns_description: _
_parameters: int clientID, char *receiveBytes, int numBytes_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Receives raw bytes, such as an bitmap or audio data from a client indicated with the clientID:

~~~~{.cpp}

for ( int i = 0; i &lt; server.getLastID(); i++ ) {
  if(server.isClientConnected(i)) {
    int received = server.receiveRawBytes(clientID, *receiveBytes, numBytes);
    }
}
~~~~





&lt;!----------------------------------------------------------------------------->

###int receiveRawMsg(clientID, *receiveBytes, numBytes)

&lt;!--
_syntax: receiveRawMsg(clientID, *receiveBytes, numBytes)_
_name: receiveRawMsg_
_returns: int_
_returns_description: _
_parameters: int clientID, char *receiveBytes, int numBytes_
_access: public_
_version_started: 0.8.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool send(clientID, message)

&lt;!--
_syntax: send(clientID, message)_
_name: send_
_returns: bool_
_returns_description: _
_parameters: int clientID, string message_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Sends a string delimited with the delimiter value to a selected client.





&lt;!----------------------------------------------------------------------------->

###bool sendRawBytes(clientID, *rawBytes, numBytes)

&lt;!--
_syntax: sendRawBytes(clientID, *rawBytes, numBytes)_
_name: sendRawBytes_
_returns: bool_
_returns_description: _
_parameters: int clientID, const char *rawBytes, const int numBytes_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Sends raw bytes to a selected client. See sendRawBytesToAll()





&lt;!----------------------------------------------------------------------------->

###bool sendRawBytesToAll(*rawBytes, numBytes)

&lt;!--
_syntax: sendRawBytesToAll(*rawBytes, numBytes)_
_name: sendRawBytesToAll_
_returns: bool_
_returns_description: _
_parameters: const char *rawBytes, const int numBytes_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Sends raw bytes to all connected clients, handy for sending an image or other binary data to a client. For instance:

~~~~{.cpp}
        ofImage img;
        img.loadImage("tmp.jpg");
        int imageBytesToSend = 7800;
        int totalBytesSent = 0;
        int messageSize = 256;
        while( imageBytesToSend > 1 )
        {
            
            if(imageBytesToSend > messageSize) {
                TCP.sendRawBytesToAll((char*) &img.getPixels()[totalBytesSent], messageSize);
                imageBytesToSend -= messageSize;
                totalBytesSent += messageSize;
            } else {
                TCP.sendRawBytesToAll( (char*) &img.getPixels()[totalBytesSent], imageBytesToSend);
                totalBytesSent += imageBytesToSend;
                imageBytesToSend = 0;
            }
        }
~~~~

On the ofxTCPClient side this would look like:

~~~~{.cpp}

        bool dataRecd = false;
        unsigned char buffer[7800];
        int recd = 7800;
        int totalReceived = 0;
        int messageSize = 256;
        while(recd > 0) {
            
            if(recd > messageSize) {
                tcpClient.receiveRawBytes( (char*) &buffer[totalReceived], messageSize);
                recd -= messageSize;
                totalReceived += messageSize;
            } else {
                tcpClient.receiveRawBytes( (char*) &buffer[totalReceived], recd);
                totalReceived += recd;
                recd = 0;
                dataRecd = true;
            }
        }
        
        if(dataRecd) {
            img.setFromPixels( &buffer[0], 50, 52, OF_IMAGE_COLOR);
        }

~~~~

This example is a bit silly because it assumes that you know the exact size of an image, but extending this with different messages to send sizes and types beforehand isn't too difficult. 





&lt;!----------------------------------------------------------------------------->

###bool sendRawMsg(clientID, *rawMsg, numBytes)

&lt;!--
_syntax: sendRawMsg(clientID, *rawMsg, numBytes)_
_name: sendRawMsg_
_returns: bool_
_returns_description: _
_parameters: int clientID, const char *rawMsg, const int numBytes_
_access: public_
_version_started: 0.8.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool sendRawMsgToAll(*rawMsg, numBytes)

&lt;!--
_syntax: sendRawMsgToAll(*rawMsg, numBytes)_
_name: sendRawMsgToAll_
_returns: bool_
_returns_description: _
_parameters: const char *rawMsg, const int numBytes_
_access: public_
_version_started: 0.8.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool sendToAll(message)

&lt;!--
_syntax: sendToAll(message)_
_name: sendToAll_
_returns: bool_
_returns_description: _
_parameters: string message_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

Sends a string delimited with the delimiter value to all connected clients.





&lt;!----------------------------------------------------------------------------->

###void setMessageDelimiter(delim)

&lt;!--
_syntax: setMessageDelimiter(delim)_
_name: setMessageDelimiter_
_returns: void_
_returns_description: _
_parameters: string delim_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

This sets the message delimiter that your server will use when sending and receiving messages from clients. By default it's [\TCP] though you can have it be any value as long as it's consistent on both the client and server sides.





&lt;!----------------------------------------------------------------------------->

###void setVerbose(_verbose)

&lt;!--
_syntax: setVerbose(_verbose)_
_name: setVerbose_
_returns: void_
_returns_description: _
_parameters: bool _verbose_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool setup(&settings)

&lt;!--
_syntax: setup(&settings)_
_name: setup_
_returns: bool_
_returns_description: _
_parameters: const ofxTCPSettings &settings_
_access: public_
_version_started: 0.10.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool setup(_port, blocking = false)

&lt;!--
_syntax: setup(_port, blocking = false)_
_name: setup_
_returns: bool_
_returns_description: _
_parameters: int _port, bool blocking=false_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _

The port is the port that your server will serve up data on. It shouldn't be a commonly used port like 22 or 80, go with a higher number less likely to be used.
The blocking parameter signals whether the client connections will be allowed to block on the servers thread as they send a message. This becomes important when you're dealing with very large messages coming from clients.





&lt;!----------------------------------------------------------------------------->

###void threadedFunction()

&lt;!--
_syntax: threadedFunction()_
_name: threadedFunction_
_returns: void_
_returns_description: _
_parameters: _
_access: private_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###void waitConnectedClient()

&lt;!--
_syntax: waitConnectedClient()_
_name: waitConnectedClient_
_returns: void_
_returns_description: _
_parameters: _
_access: public_
_version_started: 0.10.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###void waitConnectedClient(ms)

&lt;!--
_syntax: waitConnectedClient(ms)_
_name: waitConnectedClient_
_returns: void_
_returns_description: _
_parameters: int ms_
_access: public_
_version_started: 0.10.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

### ~ofxTCPServer()

&lt;!--
_syntax: ~ofxTCPServer()_
_name: ~ofxTCPServer_
_returns: _
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

##Variables



###ofxTCPClient TCPConnections

&lt;!--
_name: TCPConnections_
_type: ofxTCPClient_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###ofxTCPManager TCPServer

&lt;!--
_name: TCPServer_
_type: ofxTCPManager_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool bClientBlocking

&lt;!--
_name: bClientBlocking_
_type: bool_
_access: protected_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool connected

&lt;!--
_name: connected_
_type: bool_
_access: protected_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###int idCount

&lt;!--
_name: idCount_
_type: int_
_access: protected_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###ofMutex  mConnectionsLock

&lt;!--
_name: mConnectionsLock_
_type: ofMutex _
_access: private_
_version_started: 0.8.0_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###string messageDelimiter

&lt;!--
_name: messageDelimiter_
_type: string_
_access: protected_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###int port

&lt;!--
_name: port_
_type: int_
_access: protected_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###condition_variable serverReady

&lt;!--
_name: serverReady_
_type: condition_variable_
_access: private_
_version_started: 0.10.0_
_version_deprecated: _
_summary: _
_visible: True_
_constant: False_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###string str

&lt;!--
_name: str_
_type: string_
_access: protected_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

</textarea></div></div></div></div></div></div><script defer src="/_nuxt/payloads/1586012716389/documentation/addons/ofxNetwork/ofxTCPServer/payload.js"></script><script src="/_nuxt/5f71eaca0bd2f1a0f939.js" defer></script><script src="/_nuxt/35a90d914f539af1362f.js" defer></script><script src="/_nuxt/906a3ca0fb13ed3c6651.js" defer></script><script src="/_nuxt/b673915e8a08acf593e8.js" defer></script><script src="/_nuxt/bf355f21967a23c26c07.js" defer></script>
  </body>
</html>
