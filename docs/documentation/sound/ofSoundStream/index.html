<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>ofSoundStream | documentation | ofDocs</title><meta data-n-head="ssr" data-hid="description" name="description" content="openFrameworks documentation and examples browser"><meta data-n-head="ssr" data-hid="keyword" name="keyword" content=""><meta data-n-head="ssr" property="og:description" content="openFrameworks documentation and examples browser" vmid="og:description"><meta data-n-head="ssr" property="og:title" content="ofSoundStream | documentation | ofDocs" vmid="og:title"><meta data-n-head="ssr" property="og:image" content="/files/images/ofw-logo.png" vmid="og:image"><link rel="preload" href="/_nuxt/1222c887b819d0202cfa.js" as="script"><link rel="preload" href="/_nuxt/e2974c46edd15e353a99.js" as="script"><link rel="preload" href="/_nuxt/fe12c0cb7395fa1032f4.css" as="style"><link rel="preload" href="/_nuxt/f8d94d1c92ade1d8a6da.js" as="script"><link rel="preload" href="/_nuxt/f3151c6e69ccf58ccdfd.css" as="style"><link rel="preload" href="/_nuxt/c01572c3f985d7f6c287.js" as="script"><link rel="preload" href="/_nuxt/21c4d0f9583096394838.css" as="style"><link rel="preload" href="/_nuxt/adc32956be059d7527f6.js" as="script"><link rel="stylesheet" href="/_nuxt/fe12c0cb7395fa1032f4.css"><link rel="stylesheet" href="/_nuxt/f3151c6e69ccf58ccdfd.css"><link rel="stylesheet" href="/_nuxt/21c4d0f9583096394838.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="app" class="unknown"><div id="menu"><h1 class="of"><div class="inner"><span><a href="/" class="nuxt-link-active"><div class="txt"><span class="docs f7 questrial">ofDocs </span><span class="version">0.11.0</span></div></a></span></div></h1><div id="search"><div class="inner"><div class="field text"><div class="field-inner"><svg viewbox="0 0 36 36" x="0px" y="0px" enable-background="new 0 0 36 36" xml:space="preserve"><path d="M35.525,31.228l-8.88-8.882c1.444-2.238,2.298-4.895,2.298-7.752c0-7.909-6.438-14.343-14.346-14.343						c-7.911,0-14.343,6.434-14.343,14.343c0,7.911,6.433,14.344,14.343,14.344c2.856,0,5.513-0.849,7.752-2.294l8.88,8.88						c0.295,0.297,0.782,0.297,1.076,0l3.22-3.221C35.824,32.008,35.824,31.523,35.525,31.228z M4.81,14.593						c0-5.396,4.391-9.788,9.788-9.788c5.398,0,9.787,4.392,9.787,9.788c0,5.398-4.389,9.789-9.787,9.789						C9.2,24.382,4.81,19.991,4.81,14.593z"></path></svg><!----><div class="text-wrapper"><input id="search_field" name="search_field" placeholder="Search (Alt+F)" autocomplete="off" tabindex="0"></div><!----><!----></div></div></div><div id="results" class="mt1"></div></div><div id="lists" class="menu-inner mt1"><div class="inner"><div class="item documentation"><a href="/documentation/" title="/documentation/" class="nuxt-link-active"><i class="ico" style="display:none"></i><span>documentation</span><span style="display:none">documentation</span></a><div class="list"><div class="item 3d"><a href="/documentation/3d/" title="/documentation/3d/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>3d</span></a><!----></div><div class="item addons"><a href="/documentation/addons/" title="/documentation/addons/"><i class="ico" style="display:none">extension</i><span style="display:none"></span><span>addons</span></a><!----></div><div class="item application"><a href="/documentation/application/" title="/documentation/application/"><i class="ico" style="display:none">web</i><span style="display:none"></span><span>application</span></a><!----></div><div class="item communication"><a href="/documentation/communication/" title="/documentation/communication/"><i class="ico" style="display:none">language</i><span style="display:none"></span><span>communication</span></a><!----></div><div class="item events"><a href="/documentation/events/" title="/documentation/events/"><i class="ico" style="display:none">question_answer</i><span style="display:none"></span><span>events</span></a><!----></div><div class="item gl"><a href="/documentation/gl/" title="/documentation/gl/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>gl</span></a><!----></div><div class="item glm"><a href="/documentation/glm/" title="/documentation/glm/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>glm</span></a><!----></div><div class="item graphics"><a href="/documentation/graphics/" title="/documentation/graphics/"><i class="ico" style="display:none">category</i><span style="display:none"></span><span>graphics</span></a><!----></div><div class="item math"><a href="/documentation/math/" title="/documentation/math/"><i class="ico" style="display:none">border_clear</i><span style="display:none"></span><span>math</span></a><!----></div><div class="item sound"><a href="/documentation/sound/" title="/documentation/sound/" class="nuxt-link-active"><i class="ico" style="display:none">volume_up</i><span style="display:none"></span><span>sound</span></a><div class="list"><div class="item ofFmodSoundPlayer_functions"><a href="/documentation/sound/ofFmodSoundPlayer_functions" title="/documentation/sound/ofFmodSoundPlayer_functions.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFmodSoundPlayer_functions</span></a><!----></div><div class="item ofFmodSoundPlayer"><a href="/documentation/sound/ofFmodSoundPlayer" title="/documentation/sound/ofFmodSoundPlayer.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofFmodSoundPlayer</span></a><!----></div><div class="item ofOpenALSoundPlayer_functions"><a href="/documentation/sound/ofOpenALSoundPlayer_functions" title="/documentation/sound/ofOpenALSoundPlayer_functions.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofOpenALSoundPlayer_functions</span></a><!----></div><div class="item ofOpenALSoundPlayer"><a href="/documentation/sound/ofOpenALSoundPlayer" title="/documentation/sound/ofOpenALSoundPlayer.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofOpenALSoundPlayer</span></a><!----></div><div class="item ofPASoundStream"><a href="/documentation/sound/ofPASoundStream" title="/documentation/sound/ofPASoundStream.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofPASoundStream</span></a><!----></div><div class="item ofRtAudioSoundStream"><a href="/documentation/sound/ofRtAudioSoundStream" title="/documentation/sound/ofRtAudioSoundStream.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofRtAudioSoundStream</span></a><!----></div><div class="item ofSoundBuffer"><a href="/documentation/sound/ofSoundBuffer" title="/documentation/sound/ofSoundBuffer.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundBuffer</span></a><!----></div><div class="item ofSoundDevice"><a href="/documentation/sound/ofSoundDevice" title="/documentation/sound/ofSoundDevice.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundDevice</span></a><!----></div><div class="item ofSoundPlayer_functions"><a href="/documentation/sound/ofSoundPlayer_functions" title="/documentation/sound/ofSoundPlayer_functions.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundPlayer_functions</span></a><!----></div><div class="item ofSoundPlayer"><a href="/documentation/sound/ofSoundPlayer" title="/documentation/sound/ofSoundPlayer.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundPlayer</span></a><!----></div><div class="item ofSoundStream_functions"><a href="/documentation/sound/ofSoundStream_functions" title="/documentation/sound/ofSoundStream_functions.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundStream_functions</span></a><div class="list"></div></div><div class="item ofSoundStream"><a href="/documentation/sound/ofSoundStream" title="/documentation/sound/ofSoundStream.markdown" class="nuxt-link-exact-active nuxt-link-active"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundStream</span></a><div class="list"></div></div><div class="item ofSoundStreamSettings"><a href="/documentation/sound/ofSoundStreamSettings" title="/documentation/sound/ofSoundStreamSettings.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundStreamSettings</span></a><div class="list"></div></div><div class="item ofSoundUtils_functions"><a href="/documentation/sound/ofSoundUtils_functions" title="/documentation/sound/ofSoundUtils_functions.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofSoundUtils_functions</span></a><!----></div><div class="item ofxiPhoneSoundStream"><a href="/documentation/sound/ofxiPhoneSoundStream" title="/documentation/sound/ofxiPhoneSoundStream.markdown"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxiPhoneSoundStream</span></a><!----></div></div></div><div class="item types"><a href="/documentation/types/" title="/documentation/types/"><i class="ico" style="display:none">ring_volume</i><span style="display:none"></span><span>types</span></a><!----></div><div class="item utils"><a href="/documentation/utils/" title="/documentation/utils/"><i class="ico" style="display:none">build</i><span style="display:none"></span><span>utils</span></a><!----></div><div class="item video"><a href="/documentation/video/" title="/documentation/video/"><i class="ico" style="display:none">videocam</i><span style="display:none"></span><span>video</span></a><!----></div></div></div><div class="item examples"><a href="/examples/" title="/examples/"><i class="ico" style="display:none"></i><span>examples</span><span style="display:none">examples</span></a><!----></div><div class="item openframeworks"><a href="/openframeworks/" title="/openframeworks/"><i class="ico" style="display:none"></i><span>openFrameworks</span><span style="display:none">openframeworks</span></a><!----></div><div class="item addons"><a href="/addons/" title="/addons/"><i class="ico" style="display:none">extension</i><span>addons</span><span style="display:none">addons</span></a><!----></div><div class="item guides"><a href="/guides/" title="/guides/"><i class="ico" style="display:none"></i><span>guides</span><span style="display:none">guides</span></a><!----></div></div></div></div><div id="document"><div id="renderer" class="main"><div absolute="/Users/Gilbert/Code/openFrameworks/ofSite/documentation/sound/ofSoundStream.markdown" route="/documentation/sound/ofSoundStream.markdown" dir="../ofSite/documentation/sound" ext="markdown" type="page" id="2152" parent="2139" siblings="" translations="[object Object]" class="doc-header"><div class="doc-header-inner"><div class="inner"><div class="mt2 mb2"><span class="breadcrumbs"><span class="crumb"><a href="/" class="pink nuxt-link-active">ofDocs</a><span class="chevron right"></span></span><span class="crumb"><a href="/documentation/" class="pink nuxt-link-active">documentation </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/documentation/sound/" class="pink nuxt-link-active">sound </a><!----><span class="chevron right"></span></span><span class="crumb"><!----><span class="link selector"><span>ofSoundStream </span><span class="chevron bottom"></span><select><option value="/documentation/sound/ofFmodSoundPlayer_functions">ofFmodSoundPlayer_functions</option><option value="/documentation/sound/ofFmodSoundPlayer">ofFmodSoundPlayer</option><option value="/documentation/sound/ofOpenALSoundPlayer_functions">ofOpenALSoundPlayer_functions</option><option value="/documentation/sound/ofOpenALSoundPlayer">ofOpenALSoundPlayer</option><option value="/documentation/sound/ofPASoundStream">ofPASoundStream</option><option value="/documentation/sound/ofRtAudioSoundStream">ofRtAudioSoundStream</option><option value="/documentation/sound/ofSoundBuffer">ofSoundBuffer</option><option value="/documentation/sound/ofSoundDevice">ofSoundDevice</option><option value="/documentation/sound/ofSoundPlayer_functions">ofSoundPlayer_functions</option><option value="/documentation/sound/ofSoundPlayer">ofSoundPlayer</option><option value="/documentation/sound/ofSoundStream_functions">ofSoundStream_functions</option><option value="/documentation/sound/ofSoundStream">ofSoundStream</option><option value="/documentation/sound/ofSoundStreamSettings">ofSoundStreamSettings</option><option value="/documentation/sound/ofSoundUtils_functions">ofSoundUtils_functions</option><option value="/documentation/sound/ofxiPhoneSoundStream">ofxiPhoneSoundStream</option></select></span><!----></span></span></div></div></div></div><div class="editable-wrapper"><div class="header inner"><h1 class="page-title mb4 questrial"><span class="f7"><!----><span>ofSoundStream </span></span><span class="f3"></span></h1><div class="actions"><a href="/about/contribute/" class="button"><i class="ico">edit</i><span>Edit</span></a></div></div><div class="rendered"><div id="documentation-page" static="true"><div id="offset-page"><div id="doc-body" class="markdown"><div class="inner"><div id="description"><div class="full-description"><div class="html"><p>ofSoundStream is used for more low-level access to the sound buffer and uses the RtAudio library developed at McGill University by Gary P. Scavone. RtAudio provides an API that lets you control and read data from the audio hardware of your computer. You can manipulate sound with openFrameworks using two approaches. The first option is to directly manipulate the sound data sent from the sound card by using the ofSoundStream class that is included as a part of the core oF distribution.
The ofBaseApp class defines two callback methods that let you work with sound: audioIn() is called when the system receives any sound, and audioOut() is called before the system sends sound to the sound card. Both of these callbacks require that the ofSoundStreamSetup() method is called before they will be activated. This tells the RtAudio library to start up, begin processing audio from the system microphone (or line in), and send data to the system sound card:
ofSoundStreamSetup(int nOutputs, int nInputs, int sampleRate, int bufferSize, int nBuffers)
The ofSoundStreamSetup() method has five parameters:
nOutput
Is the number of output channels that your computer supports. Usually this will be two: left and right. If you have a surround sound setup, it might be four or five.
nInputs - Is the number of input channels that your system uses.
sampleRate - Is usually 44,100 kHz, or CD quality, though you may want to make it higher or lower depending on the needs of your application.
bufferSize - Is the size of the buffer that your system supports. At the time of writing this book, on any operating system, it’s probably 256 values.
nBuffers - Is the number of buffers that your system will create and swap out. The more buffers, the faster your computer will write information into the buffer, but the more memory it will take up. You should probably use two for each channel that you’re using. Here’s an example call:</p>
<p>ofSoundStreamSetup(2, 0, 44100, 256, 4);</p>
<p>The previous snippet will send two channels of stereo sound to the audioIn() method each time the underlying RtAudio library sends information from the sound card. This should be called in the setup method of your openFrameworks application. Now, look at the first of two callback methods. The audioIn() method is called whenever the system microphone detects sound:
void audioIn(float * input, int bufferSize, int nChannels) input
Is a pointer to the array of data.
bufferSize - Is the size of the buffer, the number of floating-point values in the input array.
nChannels - Is the number of sound channels represented in the sound data.</p>
<p>The input parameter is always an array of floating-point numbers with the length given in the bufferSize variable. This sounds a little tricky to work with, but as you can see, by using a for loop with a length determined by bufferSize, it isn’t that difficult:</p>
<p>float samples[bufferSize];
for (int i = 0; i &lt; bufferSize; i++) {
// increment the sample counter
samples[sampleCounter] = input[i]; }</p>
<p>Note that this callback won’t be triggered unless you call ofSoundStreamSetup() with one or two channels set as the input, like so:</p>
<p>ofSoundStreamSetup(0, 2, 44100, 256, 4);</p>
<p>Next, the audioOut() method is called when the system needs one buffer worth of audio to send to the sound card. The method sends the array of floating-point information that represents the buffer of audio data, the size of the buffer, and the number of channels:
void audioOut() (float * output, int bufferSize, int nChannels)
To have the audioOut() callback triggered by the system, you would need to call ofSoundStreamSetup() with one or two channels in the output. If you want to alter the data before it’s sent to the sound buffer, you must do it within this method.</p>
<h1></h1>
</div></div></div><div id="methods"><hr><section name="close" id="close" class="mb2"><div class="method mb2"><h3 class="f3 title">close(<!---->)</h3><code><span class="token keyword">void  </span><span class="token function">close</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>stops the stream and cleans up its resources.</p>
</div><div class="desc"></div></div><hr></section><section name="getBufferSize" id="getBufferSize" class="mb2"><div class="method mb2"><h3 class="f3 title">getBufferSize(<!---->)</h3><code><span class="token keyword">int  </span><span class="token function">getBufferSize</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Queries the stream's buffer size.
\return the current buffer size of the stream.</p>
</div><div class="desc"></div></div><hr></section><section name="getNumInputChannels" id="getNumInputChannels" class="mb2"><div class="method mb2"><h3 class="f3 title">getNumInputChannels(<!---->)</h3><code><span class="token keyword">int  </span><span class="token function">getNumInputChannels</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Queries the stream's number of input channels.
\return the number of input channels (e.g. 2 for stereo).</p>
</div><div class="desc"></div></div><hr></section><section name="getNumOutputChannels" id="getNumOutputChannels" class="mb2"><div class="method mb2"><h3 class="f3 title">getNumOutputChannels(<!---->)</h3><code><span class="token keyword">int  </span><span class="token function">getNumOutputChannels</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Queries the stream's number of output channels.
\return the number of output channels (e.g. 2 for stereo).</p>
</div><div class="desc"></div></div><hr></section><section name="getSampleRate" id="getSampleRate" class="mb2"><div class="method mb2"><h3 class="f3 title">getSampleRate(<!---->)</h3><code><span class="token keyword">int  </span><span class="token function">getSampleRate</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Queries the stream's sample rate
\return the current sample rate of the stream
\note The returned sample rate may differ from the requested sample rate.</p>
</div><div class="desc"></div></div><hr></section><section name="getTickCount" id="getTickCount" class="mb2"><div class="method mb2"><h3 class="f3 title">getTickCount(<!---->)</h3><code><span class="token keyword">uint64_t  </span><span class="token function">getTickCount</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Queries the number of "ticks" passed since the stream started.</p>
<p>This is a representation of how many buffers have passed through the
stream since it started. This can be converted to seconds with the
following formula:</p>
<p>secondsOfPlayback = (tickCount * bufferSize) / sampleRate</p>
<p>\return number of buffers passed through the stream since it started.</p>
</div><div class="desc"></div></div><hr></section><section name="ofSoundStream" id="ofSoundStream" class="mb2"><div class="method mb2"><h3 class="f3 title">ofSoundStream(<!---->)</h3><code><!----><span class="token function">ofSoundStream</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="printDeviceList" id="printDeviceList" class="mb2"><div class="method mb2"><h3 class="f3 title">printDeviceList(<!---->)</h3><code><span class="token keyword">void  </span><span class="token function">printDeviceList</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Prints a list of available audio devices to the console</p>
</div><div class="desc"></div></div><hr></section><section name="setInput" id="setInput" class="mb2"><div class="method mb2"><h3 class="f3 title">setInput(<code class="pink">…</code>)</h3><code><span class="token keyword">void  </span><span class="token function">setInput</span><span class="token punctuation">(</span><code class="token boolean">ofBaseSoundInput <span class="token operator">&</span>soundInput</code><span class="token punctuation">)</span></code><div class="short"><p>Sets the object which will have audioIn() called when the device receives audio.</p>
</div><div class="desc"></div></div><hr></section><section name="setInput" id="setInput" class="mb2"><div class="method mb2"><h3 class="f3 title">setInput(<code class="pink">…</code>)</h3><code><span class="token keyword">void  </span><span class="token function">setInput</span><span class="token punctuation">(</span><code class="token boolean">ofBaseSoundInput <span class="token operator">&</span>soundInput</code><span class="token punctuation">)</span></code><div class="short"><p>Sets the object which will have audioIn() called when the device receives audio.</p>
</div><div class="desc"></div></div><hr></section><section name="setOutput" id="setOutput" class="mb2"><div class="method mb2"><h3 class="f3 title">setOutput(<code class="pink">…</code>)</h3><code><span class="token keyword">void  </span><span class="token function">setOutput</span><span class="token punctuation">(</span><code class="token boolean">ofBaseSoundOutput <span class="token operator">&</span>soundOutput</code><span class="token punctuation">)</span></code><div class="short"><p>Sets the object which will have audioOut() called when the device requests audio.</p>
</div><div class="desc"></div></div><hr></section><section name="setOutput" id="setOutput" class="mb2"><div class="method mb2"><h3 class="f3 title">setOutput(<code class="pink">…</code>)</h3><code><span class="token keyword">void  </span><span class="token function">setOutput</span><span class="token punctuation">(</span><code class="token boolean">ofBaseSoundOutput <span class="token operator">&</span>soundOutput</code><span class="token punctuation">)</span></code><div class="short"><p>Sets the object which will have audioOut() called when the device requests audio.</p>
</div><div class="desc"></div></div><hr></section><section name="setup" id="setup" class="mb2"><div class="method mb2"><h3 class="f3 title">setup(<code class="pink">…</code>)</h3><code><span class="token keyword">bool  </span><span class="token function">setup</span><span class="token punctuation">(</span><code class="token boolean"><span class="token keyword">const</span> ofSoundStreamSettings <span class="token operator">&</span>settings</code><span class="token punctuation">)</span></code><div class="short"></div><div class="desc"></div></div><hr></section><section name="start" id="start" class="mb2"><div class="method mb2"><h3 class="f3 title">start(<!---->)</h3><code><span class="token keyword">void  </span><span class="token function">start</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Starts a stream (note that setup() will start the stream on its own).</p>
</div><div class="desc"></div></div><hr></section><section name="stop" id="stop" class="mb2"><div class="method mb2"><h3 class="f3 title">stop(<!---->)</h3><code><span class="token keyword">void  </span><span class="token function">stop</span><span class="token punctuation">(</span><!----><span class="token punctuation">)</span></code><div class="short"><p>Stops the stream.</p>
</div><div class="desc"></div></div><hr></section></div></div></div></div><div id="side-menu" class="markdown"><div id="params"><h4>Variables</h4><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">ofPtr </span><span>soundStream</span><span class="token comment"></span></div><div class="desc"></div></div></code><code><div class="functions"></div><div class="variable"><div class="title"><span class="token keyword">int </span><span>tmpDeviceId</span><span class="token comment"></span></div><div class="desc"></div></div></code><hr></div><div id="methods-list"><h4>Methods</h4><div class="anchor"><code><a href="#close" class="pink">close</a></code></div><div class="anchor"><code><a href="#getBufferSize" class="pink">getBufferSize</a></code></div><div class="anchor"><code><a href="#getNumInputChannels" class="pink">getNumInputChannels</a></code></div><div class="anchor"><code><a href="#getNumOutputChannels" class="pink">getNumOutputChannels</a></code></div><div class="anchor"><code><a href="#getSampleRate" class="pink">getSampleRate</a></code></div><div class="anchor"><code><a href="#getTickCount" class="pink">getTickCount</a></code></div><div class="anchor"><code><a href="#ofSoundStream">ofSoundStream</a></code></div><div class="anchor"><code><a href="#printDeviceList" class="pink">printDeviceList</a></code></div><div class="anchor"><code><a href="#setInput" class="pink">setInput</a></code></div><div class="anchor"><code><a href="#setInput" class="pink">setInput</a></code></div><div class="anchor"><code><a href="#setOutput" class="pink">setOutput</a></code></div><div class="anchor"><code><a href="#setOutput" class="pink">setOutput</a></code></div><div class="anchor"><code><a href="#setup">setup</a></code></div><div class="anchor"><code><a href="#start" class="pink">start</a></code></div><div class="anchor"><code><a href="#stop" class="pink">stop</a></code></div></div><div id="see-also" filename="ofSoundStream.markdown" absolute="/Users/Gilbert/Code/openFrameworks/ofSite/documentation/sound/ofSoundStream.markdown" route="/documentation/sound/ofSoundStream.markdown" dir="../ofSite/documentation/sound" ext="markdown" type="page" parent="2139" breadcrumbs="2139,1718" siblings="" translations="[object Object]" class="see-also"><h4>See also</h4><div class="also"><a href="/documentation/sound/ofSoundStreamSettings"><span class="origin">documentation</span><span class="name">ofSoundStreamSettings</span></a></div><div class="also"><a href="/documentation/sound/ofSoundStream_functions"><span class="origin">documentation</span><span class="name">ofSoundStream_functions</span></a></div><div class="also"><a href="/openframeworks/sound/ofSoundStream_h"><span class="origin">openframeworks</span><span class="name">ofSoundStream.h</span></a></div><div class="also"><a href="/openframeworks/sound/ofSoundStream_cpp"><span class="origin">openframeworks</span><span class="name">ofSoundStream.cpp</span></a></div></div></div></div></div><textarea rows="0" class="markdown-editor" style="display:none">#class ofSoundStream


&lt;!--
_visible: True_
_advanced: False_
_istemplated: False_
_extends: _
-->

##InlineDescription


Gives access to audio input and output devices

ofSoundStream controls access to your computer's audio input and output
devices. For example, you could use an ofSoundStream to get live input from
a microphone, or generate sound in realtime for your computer's speakers.

A typical openFrameworks app will use just one ofSoundStream, and you might
not even need to use this class directly at all if you don't need to query
things like the sample rate or buffer size. In order to start receiving or
generating audio, your ofApp should implement either ofBaseApp::audioIn() or
ofBaseApp::audioOut() respectively, and then call ofSoundStreamSetup(). You
can find examples of this in either the audioInputExample or the
audioOutputExample.

Starting a stream with 0 input or output channels will prevent audioIn() or
audioOut() from being called, respectively.

Some platforms (iOS, for example) will expose additional platform-specific
sound stream functionality. See the platform-specific examples for demos.


**Warning**: Be aware that audioIn() and audioOut() will be called on a different
thread from your app's update() / draw() thread.





##Description

ofSoundStream is used for more low-level access to the sound buffer and uses the RtAudio library developed at McGill University by Gary P. Scavone. RtAudio provides an API that lets you control and read data from the audio hardware of your computer. You can manipulate sound with openFrameworks using two approaches. The first option is to directly manipulate the sound data sent from the sound card by using the ofSoundStream class that is included as a part of the core oF distribution. 
The ofBaseApp class defines two callback methods that let you work with sound: audioIn() is called when the system receives any sound, and audioOut() is called before the system sends sound to the sound card. Both of these callbacks require that the ofSoundStreamSetup() method is called before they will be activated. This tells the RtAudio library to start up, begin processing audio from the system microphone (or line in), and send data to the system sound card:
ofSoundStreamSetup(int nOutputs, int nInputs, int sampleRate, int bufferSize, int nBuffers)
The ofSoundStreamSetup() method has five parameters:
nOutput
Is the number of output channels that your computer supports. Usually this will be two: left and right. If you have a surround sound setup, it might be four or five.
nInputs - Is the number of input channels that your system uses.
sampleRate - Is usually 44,100 kHz, or CD quality, though you may want to make it higher or lower depending on the needs of your application.
bufferSize - Is the size of the buffer that your system supports. At the time of writing this book, on any operating system, it’s probably 256 values.
nBuffers - Is the number of buffers that your system will create and swap out. The more buffers, the faster your computer will write information into the buffer, but the more memory it will take up. You should probably use two for each channel that you’re using. Here’s an example call:

ofSoundStreamSetup(2, 0, 44100, 256, 4);

The previous snippet will send two channels of stereo sound to the audioIn() method each time the underlying RtAudio library sends information from the sound card. This should be called in the setup method of your openFrameworks application. Now, look at the first of two callback methods. The audioIn() method is called whenever the system microphone detects sound:
void audioIn(float * input, int bufferSize, int nChannels) input
Is a pointer to the array of data.
bufferSize - Is the size of the buffer, the number of floating-point values in the input array.
nChannels - Is the number of sound channels represented in the sound data.

The input parameter is always an array of floating-point numbers with the length given in the bufferSize variable. This sounds a little tricky to work with, but as you can see, by using a for loop with a length determined by bufferSize, it isn’t that difficult:

float samples[bufferSize];
for (int i = 0; i &lt; bufferSize; i++) {
// increment the sample counter
samples[sampleCounter] = input[i]; }

Note that this callback won’t be triggered unless you call ofSoundStreamSetup() with one or two channels set as the input, like so:

ofSoundStreamSetup(0, 2, 44100, 256, 4);

Next, the audioOut() method is called when the system needs one buffer worth of audio to send to the sound card. The method sends the array of floating-point information that represents the buffer of audio data, the size of the buffer, and the number of channels:
void audioOut() (float * output, int bufferSize, int nChannels)
To have the audioOut() callback triggered by the system, you would need to call ofSoundStreamSetup() with one or two channels in the output. If you want to alter the data before it’s sent to the sound buffer, you must do it within this method.





##Methods



###void close()

&lt;!--
_syntax: close()_
_name: close_
_returns: void_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

stops the stream and cleans up its resources.





_description: _







&lt;!----------------------------------------------------------------------------->

###int getBufferSize()

&lt;!--
_syntax: getBufferSize()_
_name: getBufferSize_
_returns: int_
_returns_description: _
_parameters: _
_access: public_
_version_started: 0073_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Queries the stream's buffer size.
\return the current buffer size of the stream.





_description: _







&lt;!----------------------------------------------------------------------------->

###vector&lt; ofSoundDevice > getDeviceList(api = DEFAULT)

&lt;!--
_syntax: getDeviceList(api = DEFAULT)_
_name: getDeviceList_
_returns: vector&lt; ofSoundDevice >_
_returns_description: _
_parameters: ofSoundDevice::Api api=DEFAULT_
_access: public_
_version_started: 0.9.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Retrieves a list of available audio devices





_description: _







&lt;!----------------------------------------------------------------------------->

###vector&lt; ofSoundDevice > getMatchingDevices(&name, inChannels, outChannels, api = DEFAULT)

&lt;!--
_syntax: getMatchingDevices(&name, inChannels, outChannels, api = DEFAULT)_
_name: getMatchingDevices_
_returns: vector&lt; ofSoundDevice >_
_returns_description: _
_parameters: const string &name, unsigned int inChannels, unsigned int outChannels, ofSoundDevice::Api api=DEFAULT_
_access: public_
_version_started: 0.9.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Get all devices which match the arguments (name can be a partial match)





_description: _







&lt;!----------------------------------------------------------------------------->

###int getNumInputChannels()

&lt;!--
_syntax: getNumInputChannels()_
_name: getNumInputChannels_
_returns: int_
_returns_description: _
_parameters: _
_access: public_
_version_started: 0073_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Queries the stream's number of input channels.
\return the number of input channels (e.g. 2 for stereo).





_description: _







&lt;!----------------------------------------------------------------------------->

###int getNumOutputChannels()

&lt;!--
_syntax: getNumOutputChannels()_
_name: getNumOutputChannels_
_returns: int_
_returns_description: _
_parameters: _
_access: public_
_version_started: 0073_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Queries the stream's number of output channels.
\return the number of output channels (e.g. 2 for stereo).





_description: _







&lt;!----------------------------------------------------------------------------->

###int getSampleRate()

&lt;!--
_syntax: getSampleRate()_
_name: getSampleRate_
_returns: int_
_returns_description: _
_parameters: _
_access: public_
_version_started: 0073_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Queries the stream's sample rate
\return the current sample rate of the stream
\note The returned sample rate may differ from the requested sample rate.





_description: _







&lt;!----------------------------------------------------------------------------->

###shared_ptr&lt; ofBaseSoundStream > getSoundStream()

&lt;!--
_syntax: getSoundStream()_
_name: getSoundStream_
_returns: shared_ptr&lt; ofBaseSoundStream >_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###uint64_t getTickCount()

&lt;!--
_syntax: getTickCount()_
_name: getTickCount_
_returns: uint64_t_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Queries the number of "ticks" passed since the stream started.

This is a representation of how many buffers have passed through the
stream since it started. This can be converted to seconds with the
following formula:

   secondsOfPlayback = (tickCount * bufferSize) / sampleRate

\return number of buffers passed through the stream since it started.





_description: _







&lt;!----------------------------------------------------------------------------->

### ofSoundStream()

&lt;!--
_syntax: ofSoundStream()_
_name: ofSoundStream_
_returns: _
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###void printDeviceList()

&lt;!--
_syntax: printDeviceList()_
_name: printDeviceList_
_returns: void_
_returns_description: _
_parameters: _
_access: public_
_version_started: 0.9.0_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Prints a list of available audio devices to the console





_description: _







&lt;!----------------------------------------------------------------------------->

###void setInput(&soundInput)

&lt;!--
_syntax: setInput(&soundInput)_
_name: setInput_
_returns: void_
_returns_description: _
_parameters: ofBaseSoundInput &soundInput_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Sets the object which will have audioIn() called when the device receives audio.





_description: _







&lt;!----------------------------------------------------------------------------->

###void setInput(&soundInput)

&lt;!--
_syntax: setInput(&soundInput)_
_name: setInput_
_returns: void_
_returns_description: _
_parameters: ofBaseSoundInput &soundInput_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Sets the object which will have audioIn() called when the device receives audio.





_description: _







&lt;!----------------------------------------------------------------------------->

###void setOutput(&soundOutput)

&lt;!--
_syntax: setOutput(&soundOutput)_
_name: setOutput_
_returns: void_
_returns_description: _
_parameters: ofBaseSoundOutput &soundOutput_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Sets the object which will have audioOut() called when the device requests audio.





_description: _







&lt;!----------------------------------------------------------------------------->

###void setOutput(&soundOutput)

&lt;!--
_syntax: setOutput(&soundOutput)_
_name: setOutput_
_returns: void_
_returns_description: _
_parameters: ofBaseSoundOutput &soundOutput_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Sets the object which will have audioOut() called when the device requests audio.





_description: _







&lt;!----------------------------------------------------------------------------->

###void setSoundStream(soundStreamPtr)

&lt;!--
_syntax: setSoundStream(soundStreamPtr)_
_name: setSoundStream_
_returns: void_
_returns_description: _
_parameters: shared_ptr&lt; ofBaseSoundStream > soundStreamPtr_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###bool setup(&settings)

&lt;!--
_syntax: setup(&settings)_
_name: setup_
_returns: bool_
_returns_description: _
_parameters: const ofSoundStreamSettings &settings_
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###void start()

&lt;!--
_syntax: start()_
_name: start_
_returns: void_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Starts a stream (note that setup() will start the stream on its own).





_description: _







&lt;!----------------------------------------------------------------------------->

###void stop()

&lt;!--
_syntax: stop()_
_name: stop_
_returns: void_
_returns_description: _
_parameters: _
_access: public_
_version_started: 007_
_version_deprecated: _
_summary: _
_constant: False_
_static: False_
_visible: True_
_advanced: False_
-->

_inlined_description: _

Stops the stream.





_description: _







&lt;!----------------------------------------------------------------------------->

##Variables



###ofPtr soundStream

&lt;!--
_name: soundStream_
_type: ofPtr_
_access: protected_
_version_started: 007_
_version_deprecated: _
_summary: _
_visible: True_
_constant: True_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

###int tmpDeviceId

&lt;!--
_name: tmpDeviceId_
_type: int_
_access: protected_
_version_started: 0.10.0_
_version_deprecated: _
_summary: _
_visible: True_
_constant: False_
_advanced: False_
-->

_inlined_description: _







_description: _







&lt;!----------------------------------------------------------------------------->

</textarea></div></div></div></div></div></div><script defer src="/_nuxt/payloads/1583940179515/documentation/sound/ofSoundStream/payload.js"></script><script src="/_nuxt/1222c887b819d0202cfa.js" defer></script><script src="/_nuxt/adc32956be059d7527f6.js" defer></script><script src="/_nuxt/e2974c46edd15e353a99.js" defer></script><script src="/_nuxt/f8d94d1c92ade1d8a6da.js" defer></script><script src="/_nuxt/c01572c3f985d7f6c287.js" defer></script>
  </body>
</html>
