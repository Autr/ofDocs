<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>ofxKinect.h | addons | ofDocs</title><meta data-n-head="ssr" data-hid="description" name="description" content="openFrameworks documentation and examples browser"><meta data-n-head="ssr" data-hid="keyword" name="keyword" content=""><meta data-n-head="ssr" property="og:description" content="openFrameworks documentation and examples browser" vmid="og:description"><meta data-n-head="ssr" property="og:title" content="ofxKinect.h | addons | ofDocs" vmid="og:title"><meta data-n-head="ssr" property="og:image" content="/files/images/ofw-logo.png" vmid="og:image"><link rel="preload" href="/_nuxt/1222c887b819d0202cfa.js" as="script"><link rel="preload" href="/_nuxt/e2974c46edd15e353a99.js" as="script"><link rel="preload" href="/_nuxt/fe12c0cb7395fa1032f4.css" as="style"><link rel="preload" href="/_nuxt/f8d94d1c92ade1d8a6da.js" as="script"><link rel="preload" href="/_nuxt/f3151c6e69ccf58ccdfd.css" as="style"><link rel="preload" href="/_nuxt/c01572c3f985d7f6c287.js" as="script"><link rel="preload" href="/_nuxt/21c4d0f9583096394838.css" as="style"><link rel="preload" href="/_nuxt/adc32956be059d7527f6.js" as="script"><link rel="stylesheet" href="/_nuxt/fe12c0cb7395fa1032f4.css"><link rel="stylesheet" href="/_nuxt/f3151c6e69ccf58ccdfd.css"><link rel="stylesheet" href="/_nuxt/21c4d0f9583096394838.css">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="app" class="unknown"><div id="menu"><h1 class="of"><div class="inner"><span><a href="/" class="nuxt-link-active"><div class="txt"><span class="docs f7 questrial">ofDocs </span><span class="version">0.11.0</span></div></a></span></div></h1><div id="search"><div class="inner"><div class="field text"><div class="field-inner"><svg viewbox="0 0 36 36" x="0px" y="0px" enable-background="new 0 0 36 36" xml:space="preserve"><path d="M35.525,31.228l-8.88-8.882c1.444-2.238,2.298-4.895,2.298-7.752c0-7.909-6.438-14.343-14.346-14.343						c-7.911,0-14.343,6.434-14.343,14.343c0,7.911,6.433,14.344,14.343,14.344c2.856,0,5.513-0.849,7.752-2.294l8.88,8.88						c0.295,0.297,0.782,0.297,1.076,0l3.22-3.221C35.824,32.008,35.824,31.523,35.525,31.228z M4.81,14.593						c0-5.396,4.391-9.788,9.788-9.788c5.398,0,9.787,4.392,9.787,9.788c0,5.398-4.389,9.789-9.787,9.789						C9.2,24.382,4.81,19.991,4.81,14.593z"></path></svg><!----><div class="text-wrapper"><input id="search_field" name="search_field" placeholder="Search (Alt+F)" autocomplete="off" tabindex="0"></div><!----><!----></div></div></div><div id="results" class="mt1"></div></div><div id="lists" class="menu-inner mt1"><div class="inner"><div class="item documentation"><a href="/documentation/" title="/documentation/"><i class="ico" style="display:none"></i><span>documentation</span><span style="display:none">documentation</span></a><!----></div><div class="item examples"><a href="/examples/" title="/examples/"><i class="ico" style="display:none"></i><span>examples</span><span style="display:none">examples</span></a><!----></div><div class="item openframeworks"><a href="/openframeworks/" title="/openframeworks/"><i class="ico" style="display:none"></i><span>openFrameworks</span><span style="display:none">openframeworks</span></a><!----></div><div class="item addons"><a href="/addons/" title="/addons/" class="nuxt-link-active"><i class="ico" style="display:none">extension</i><span>addons</span><span style="display:none">addons</span></a><div class="list"><div class="item ofxAccelerometer"><a href="/addons/ofxAccelerometer/" title="/addons/ofxAccelerometer/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxAccelerometer</span></a><!----></div><div class="item ofxAndroid"><a href="/addons/ofxAndroid/" title="/addons/ofxAndroid/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxAndroid</span></a><!----></div><div class="item ofxAssimpModelLoader"><a href="/addons/ofxAssimpModelLoader/" title="/addons/ofxAssimpModelLoader/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxAssimpModelLoader</span></a><!----></div><div class="item ofxEmscripten"><a href="/addons/ofxEmscripten/" title="/addons/ofxEmscripten/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxEmscripten</span></a><!----></div><div class="item ofxGui"><a href="/addons/ofxGui/" title="/addons/ofxGui/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxGui</span></a><!----></div><div class="item ofxiOS"><a href="/addons/ofxiOS/" title="/addons/ofxiOS/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxiOS</span></a><!----></div><div class="item ofxKinect"><a href="/addons/ofxKinect/" title="/addons/ofxKinect/" class="nuxt-link-active"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxKinect</span></a><div class="list"></div></div><div class="item ofxNetwork"><a href="/addons/ofxNetwork/" title="/addons/ofxNetwork/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxNetwork</span></a><!----></div><div class="item ofxOpenCv"><a href="/addons/ofxOpenCv/" title="/addons/ofxOpenCv/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxOpenCv</span></a><!----></div><div class="item ofxOsc"><a href="/addons/ofxOsc/" title="/addons/ofxOsc/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxOsc</span></a><!----></div><div class="item ofxPoco"><a href="/addons/ofxPoco/" title="/addons/ofxPoco/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxPoco</span></a><!----></div><div class="item ofxThreadedImageLoader"><a href="/addons/ofxThreadedImageLoader/" title="/addons/ofxThreadedImageLoader/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxThreadedImageLoader</span></a><!----></div><div class="item ofxUnitTests"><a href="/addons/ofxUnitTests/" title="/addons/ofxUnitTests/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxUnitTests</span></a><!----></div><div class="item ofxVectorGraphics"><a href="/addons/ofxVectorGraphics/" title="/addons/ofxVectorGraphics/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxVectorGraphics</span></a><!----></div><div class="item ofxXmlSettings"><a href="/addons/ofxXmlSettings/" title="/addons/ofxXmlSettings/"><i class="ico" style="display:none"></i><span style="display:none"></span><span>ofxXmlSettings</span></a><!----></div></div></div><div class="item guides"><a href="/guides/" title="/guides/"><i class="ico" style="display:none"></i><span>guides</span><span style="display:none">guides</span></a><!----></div></div></div></div><div id="document"><div id="renderer" class="main"><div absolute="/Users/Gilbert/Code/openFrameworks/addons/ofxKinect/src/ofxKinect.h" route="/addons/ofxKinect/src/ofxKinect.h" dir="../addons/ofxKinect/src" ext="h" type="source" id="122" parent="119" siblings="" translations="[object Object]" class="doc-header"><div class="doc-header-inner"><div class="inner"><div class="mt2 mb2"><span class="breadcrumbs"><span class="crumb"><a href="/" class="pink nuxt-link-active">ofDocs</a><span class="chevron right"></span></span><span class="crumb"><a href="/addons/" class="pink nuxt-link-active">addons </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/addons/ofxKinect/" class="pink nuxt-link-active">ofxKinect </a><!----><span class="chevron right"></span></span><span class="crumb"><a href="/addons/ofxKinect/src/" class="pink nuxt-link-active">src </a><!----><span class="chevron right"></span></span><span class="crumb"><!----><span class="link selector"><span>ofxKinect.h </span><span class="chevron bottom"></span><select><option value="/addons/ofxKinect/src/ofxBase3DVideo_h">ofxBase3DVideo.h</option><option value="/addons/ofxKinect/src/ofxKinect_cpp">ofxKinect.cpp</option><option value="/addons/ofxKinect/src/ofxKinect_h">ofxKinect.h</option></select></span><!----></span></span></div></div></div></div><div id="code-page" static="true" class="markdown"><div id="side-menu"><div id="code-sources"><h4>Sources</h4><div class="srcsiblings"><div class="other"><span class="src">src </span><a href="/addons/ofxKinect/src/ofxBase3DVideo_h">ofxBase3DVideo.h </a></div><div class="other"><span class="src">src </span><a href="/addons/ofxKinect/src/ofxKinect_cpp">ofxKinect.cpp </a></div><div class="other"><span class="src">src </span><a href="/addons/ofxKinect/src/ofxKinect_h" class="nuxt-link-exact-active nuxt-link-active">ofxKinect.h </a></div></div></div><div id="see-also" filename="ofxKinect" absolute="/Users/Gilbert/Code/openFrameworks/addons/ofxKinect" dir="../addons" route="/addons/ofxKinect/" ext="" type="folder" children="118,119" parent="36" breadcrumbs="36" class="see-also"><h4>See also</h4><div class="also"><a href="/documentation/addons/ofxKinect/ofxKinectContext"><span class="origin">documentation</span><span class="name">ofxKinectContext</span></a></div><div class="also"><a href="/documentation/addons/ofxKinect/ofxKinect"><span class="origin">documentation</span><span class="name">ofxKinect</span></a></div><div class="also"><a href="/documentation/addons/ofxKinect/"><span class="origin">documentation</span><span class="name">ofxKinect</span></a></div><div class="also"><a href="/addons/ofxKinect/src/ofxKinect_h" class="nuxt-link-exact-active nuxt-link-active"><span class="origin">addons</span><span class="name">ofxKinect.h</span></a></div><div class="also"><a href="/addons/ofxKinect/src/ofxKinect_cpp"><span class="origin">addons</span><span class="name">ofxKinect.cpp</span></a></div></div></div><div id="code-render"><div class="inner"><pre><code><span class="token comment" spellcheck="true">/*==============================================================================

    Copyright (c) 2010, 2011 ofxKinect Team

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.
    
    ----------------------------------------------------------------------------
    
    This project uses libfreenect, copyrighted by the Open Kinect Project using
    the Apache License v2. See the file "APACHE20" in libs/libfreenect.
    
    See http://www.openkinect.org & https://github.com/OpenKinect/libfreenect 
    for documentation
    
==============================================================================*/</span>
<span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ofMain.h"</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"libfreenect.h"</span></span>

<span class="token macro property">#<span class="token directive keyword">if</span> defined(_MSC_VER) || defined(_WIN32) || defined(WIN32) || defined(__MINGW32__)</span>
    <span class="token comment" spellcheck="true">// do windows stuff</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
    <span class="token comment" spellcheck="true">// mac and linux need this</span>
    <span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;libusb.h></span></span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>


<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ofxBase3DVideo.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">ofxKinectContext</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \class ofxKinect</span>
<span class="token comment" spellcheck="true">///</span>
<span class="token comment" spellcheck="true">/// wrapper for a freenect kinect device</span>
<span class="token comment" spellcheck="true">///</span>
<span class="token comment" spellcheck="true">/// references:</span>
<span class="token comment" spellcheck="true">/// - http://openkinect.org/wiki/Main_Page</span>
<span class="token comment" spellcheck="true">/// - https://github.com/OpenKinect/libfreenect/blob/master/include/libfreenect.h</span>
<span class="token comment" spellcheck="true">///</span>
<span class="token keyword">class</span> <span class="token class-name">ofxKinect</span> <span class="token operator">:</span> <span class="token keyword">public</span> ofxBase3DVideo<span class="token punctuation">,</span> <span class="token keyword">protected</span> ofThread <span class="token punctuation">{</span>

<span class="token keyword">public</span><span class="token operator">:</span>

	<span class="token function">ofxKinect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">ofxKinect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Main</span>

	<span class="token comment" spellcheck="true">/// initialize resources, must be called before open()</span>
	<span class="token comment" spellcheck="true">/// infrared controls whether the video image is rgb or IR</span>
	<span class="token comment" spellcheck="true">/// set video to false to disable video image grabbing (saves bandwidth)</span>
	<span class="token comment" spellcheck="true">/// set texture to false if you don't need to use the internal textures</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// naturally, if you disable the video image the video pixels and</span>
	<span class="token comment" spellcheck="true">/// RGB color will be 0</span>
	<span class="token keyword">bool</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">bool</span> infrared<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> video<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> texture<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// clear resources, do not call this while ofxKinect is running!</span>
	<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// calibrates the depth image to align with the rgb image, disabled by default</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// call this before open(), has no effect while the connection is running</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// note: this calculation uses some cpu, leave off if not needed</span>
	<span class="token keyword">void</span> <span class="token function">setRegistration</span><span class="token punctuation">(</span><span class="token keyword">bool</span> bUseRegistration<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// open the connection and start grabbing images</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// set the deviceIndex to choose a kinect, see numAvailableDevices()</span>
	<span class="token comment" spellcheck="true">/// if you don't set the index (ie index=-1), the first available kinect will be used</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// note: this has changed so that a deviceIndex of 0 will also open the same device, regardless of the order in which it was plugged in</span>
	<span class="token keyword">bool</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">int</span> deviceIndex<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// open using a kinect unique serial number</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// NOTE: currently, libfreenect returns a serial number with all 0s for</span>
	<span class="token comment" spellcheck="true">/// kinect models > 1414, so this will only work with the original xbox kinect</span>
	<span class="token keyword">bool</span> <span class="token function">open</span><span class="token punctuation">(</span>string serial<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// close the connection and stop grabbing images</span>
	<span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// is the connection currently open?</span>
	<span class="token keyword">bool</span> <span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token function">isInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// is the current frame new?</span>
	<span class="token keyword">bool</span> <span class="token function">isFrameNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token function">isFrameNewVideo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token function">isFrameNewDepth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token keyword">bool</span> <span class="token function">setPixelFormat</span><span class="token punctuation">(</span>ofPixelFormat pixelFormat<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ofPixelFormat <span class="token function">getPixelFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// updates the pixel buffers and textures</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// make sure to call this to update to the latest incoming frames</span>
	<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Depth Data</span>

	<span class="token comment" spellcheck="true">/// get the calulated distance for a depth point</span>
	<span class="token keyword">float</span> <span class="token function">getDistanceAt</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> <span class="token function">getDistanceAt</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofPoint <span class="token operator">&</span> p<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// calculates the coordinate in the world for the depth point (perspective calculation)</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// center of image is (0.0)</span>
	ofVec3f <span class="token function">getWorldCoordinateAt</span><span class="token punctuation">(</span><span class="token keyword">int</span> cx<span class="token punctuation">,</span> <span class="token keyword">int</span> cy<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	ofVec3f <span class="token function">getWorldCoordinateAt</span><span class="token punctuation">(</span><span class="token keyword">float</span> cx<span class="token punctuation">,</span> <span class="token keyword">float</span> cy<span class="token punctuation">,</span> <span class="token keyword">float</span> wz<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Intrinsic IR Sensor Parameters</span>

	<span class="token comment" spellcheck="true">/// these values are used when depth registration is enabled to align the</span>
	<span class="token comment" spellcheck="true">/// depth image to the rgb image, see http://www.ros.org/wiki/kinect_calibration/technical</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// they could also be useful for real world accurate point clouds ... weee!</span>
	
	<span class="token comment" spellcheck="true">/// get the distance between the IR sensor and IR emitter in cm</span>
	<span class="token keyword">float</span> <span class="token function">getSensorEmitterDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the distance between the IR sensor and the RGB camera in cm</span>
	<span class="token keyword">float</span> <span class="token function">getSensorCameraDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the size of a single pixel on the zero plane in mm</span>
	<span class="token keyword">float</span> <span class="token function">getZeroPlanePixelSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the focal length of the IR sensor in mm</span>
	<span class="token keyword">float</span> <span class="token function">getZeroPlaneDistance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section RGB Data</span>

	<span class="token comment" spellcheck="true">/// get the RGB value for a depth point</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// see setRegistration() for calibrated depth->RGB points</span>
	ofColor <span class="token function">getColorAt</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	ofColor <span class="token function">getColorAt</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofPoint <span class="token operator">&</span> p<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Pixel Data</span>

	<span class="token comment" spellcheck="true">/// get the video pixels reference</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// see setRegistration() for a calibrated depth->RGB image</span>
	ofPixels <span class="token operator">&</span> <span class="token function">getPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> ofPixels <span class="token operator">&</span> <span class="token function">getPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the pixels of the most recent depth frame</span>
	ofPixels <span class="token operator">&</span> <span class="token function">getDepthPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       	<span class="token comment" spellcheck="true">///&lt; grayscale values</span>
	<span class="token keyword">const</span> ofPixels <span class="token operator">&</span> <span class="token function">getDepthPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>       	<span class="token comment" spellcheck="true">///&lt; grayscale values</span>
	ofShortPixels <span class="token operator">&</span> <span class="token function">getRawDepthPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; raw 11 bit values</span>
	<span class="token keyword">const</span> ofShortPixels <span class="token operator">&</span> <span class="token function">getRawDepthPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; raw 11 bit values</span>

	<span class="token comment" spellcheck="true">/// get the distance in millimeters to a given point as a float array</span>
	ofFloatPixels <span class="token operator">&</span> <span class="token function">getDistancePixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> ofFloatPixels <span class="token operator">&</span> <span class="token function">getDistancePixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the video (ir or rgb) texture</span>
	ofTexture<span class="token operator">&</span> <span class="token function">getTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> ofTexture<span class="token operator">&</span> <span class="token function">getTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token function">OF_DEPRECATED_MSG</span><span class="token punctuation">(</span><span class="token string">"Use getTexture() instead"</span><span class="token punctuation">,</span> ofTexture<span class="token operator">&</span> <span class="token function">getTextureReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">OF_DEPRECATED_MSG</span><span class="token punctuation">(</span><span class="token string">"Use getTexture() instead"</span><span class="token punctuation">,</span> <span class="token keyword">const</span> ofTexture<span class="token operator">&</span> <span class="token function">getTextureReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the grayscale depth texture</span>
	ofTexture<span class="token operator">&</span> <span class="token function">getDepthTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> ofTexture<span class="token operator">&</span> <span class="token function">getDepthTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token function">OF_DEPRECATED_MSG</span><span class="token punctuation">(</span><span class="token string">"Use getDepthTexture() instead"</span><span class="token punctuation">,</span> ofTexture<span class="token operator">&</span> <span class="token function">getDepthTextureReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">OF_DEPRECATED_MSG</span><span class="token punctuation">(</span><span class="token string">"Use getDepthTexture() instead"</span><span class="token punctuation">,</span> <span class="token keyword">const</span> ofTexture<span class="token operator">&</span> <span class="token function">getDepthTextureReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Grayscale Depth Value</span>

	<span class="token comment" spellcheck="true">/// set the near value of the pixels in the grayscale depth image to white</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// bEnabled = true:  pixels closer to the camera are brighter (default)</span>
	<span class="token comment" spellcheck="true">/// bEnabled = false: pixels closer to the camera are darker</span>
	<span class="token keyword">void</span> <span class="token function">enableDepthNearValueWhite</span><span class="token punctuation">(</span><span class="token keyword">bool</span> bEnabled<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token function">isDepthNearValueWhite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// set the clipping planes for the depth calculations in millimeters</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// these are used for the depth value (12bit) -> grayscale (1 byte) conversion</span>
	<span class="token comment" spellcheck="true">/// ie setting a short range will give you greater sensitivity from 0-255</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// default is 50cm - 4m</span>
	<span class="token comment" spellcheck="true">/// note: you won't get any data &lt; 50cm and distances > 4m start to get noisy</span>
	<span class="token keyword">void</span> <span class="token function">setDepthClipping</span><span class="token punctuation">(</span><span class="token keyword">float</span> nearClip<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token keyword">float</span> farClip<span class="token operator">=</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> <span class="token function">getNearClipping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> <span class="token function">getFarClipping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Query Capabilities</span>

	<span class="token comment" spellcheck="true">/// check for device capabilites ...</span>
	<span class="token comment" spellcheck="true">/// motor, led, or accelerometer control isn't currently supported </span>
	<span class="token comment" spellcheck="true">/// by libfreenect with newer Kinect models (> 1414)</span>
	<span class="token keyword">bool</span> <span class="token function">hasAccelControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token function">hasCamTiltControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token function">hasLedControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Accelerometer Data</span>

	<span class="token comment" spellcheck="true">/// get the XYZ accelerometer values</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// ... yes, the kinect has an accelerometer</span>
	
	<span class="token comment" spellcheck="true">/// raw axis values</span>
	ofPoint <span class="token function">getRawAccel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// axis-based gravity adjusted accelerometer values</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// from libfreeenect:</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// as laid out via the accelerometer data sheet, which is available at</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// http://www.kionix.com/Product%20Sheets/KXSD9%20Product%20Brief.pdf</span>
	<span class="token comment" spellcheck="true">///</span>
	ofPoint <span class="token function">getMksAccel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/// get the current pitch (x axis) & roll (z axis) of the kinect in degrees</span>
    <span class="token comment" spellcheck="true">///</span>
    <span class="token comment" spellcheck="true">/// useful to correct the 3d scene based on the camera inclination</span>
    <span class="token comment" spellcheck="true">///</span>
	<span class="token keyword">float</span> <span class="token function">getAccelPitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> <span class="token function">getAccelRoll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Camera Tilt Motor</span>

	<span class="token comment" spellcheck="true">/// set tilt angle of the camera in degrees</span>
	<span class="token comment" spellcheck="true">/// 0 is flat, the range is -30 to 30</span>
	<span class="token keyword">bool</span> <span class="token function">setCameraTiltAngle</span><span class="token punctuation">(</span><span class="token keyword">float</span> angleInDegrees<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the current angle</span>
	<span class="token keyword">float</span> <span class="token function">getCurrentCameraTiltAngle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the target angle (if the camera is currently moving)</span>
	<span class="token keyword">float</span> <span class="token function">getTargetCameraTiltAngle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        
<span class="token comment" spellcheck="true">/// \section LED</span>
    
	<span class="token keyword">enum</span> LedMode <span class="token punctuation">{</span>
		LED_DEFAULT <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// yellow when not running, green when running</span>
		LED_OFF <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
		LED_GREEN <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
		LED_RED <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
		LED_YELLOW <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
		LED_BLINK_GREEN <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
		LED_BLINK_YELLOW_RED <span class="token operator">=</span> <span class="token number">6</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
    <span class="token comment" spellcheck="true">/// set the current led color and/or blink mode,</span>
	<span class="token comment" spellcheck="true">/// only applied while the kinect is open</span>
    <span class="token keyword">void</span> <span class="token function">setLed</span><span class="token punctuation">(</span>ofxKinect<span class="token operator">::</span>LedMode mode<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Draw</span>

	<span class="token comment" spellcheck="true">/// enable/disable frame loading into textures on update()</span>
	<span class="token keyword">void</span> <span class="token function">setUseTexture</span><span class="token punctuation">(</span><span class="token keyword">bool</span> bUse<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token function">isUsingTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// draw the video texture</span>
	<span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span> w<span class="token punctuation">,</span> <span class="token keyword">float</span> h<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofPoint<span class="token operator">&</span> point<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofRectangle<span class="token operator">&</span> rect<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// draw the grayscale depth texture</span>
	<span class="token keyword">void</span> <span class="token function">drawDepth</span><span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">,</span> <span class="token keyword">float</span> w<span class="token punctuation">,</span> <span class="token keyword">float</span> h<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">drawDepth</span><span class="token punctuation">(</span><span class="token keyword">float</span> x<span class="token punctuation">,</span> <span class="token keyword">float</span> y<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">drawDepth</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofPoint<span class="token operator">&</span> point<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">drawDepth</span><span class="token punctuation">(</span><span class="token keyword">const</span> ofRectangle<span class="token operator">&</span> rect<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Util</span>

	<span class="token comment" spellcheck="true">/// get the device id</span>
	<span class="token comment" spellcheck="true">/// returns -1 if not connected</span>
	<span class="token keyword">int</span> <span class="token function">getDeviceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the unique serial number</span>
	<span class="token comment" spellcheck="true">/// returns an empty string "" if not connected</span>
	<span class="token comment" spellcheck="true">///</span>
	<span class="token comment" spellcheck="true">/// NOTE: currently, libfreenect returns a serial number with all 0s for</span>
	<span class="token comment" spellcheck="true">/// kinect models > 1414, so this will only work with the original xbox kinect</span>
	string <span class="token function">getSerial</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// static kinect image size</span>
	<span class="token keyword">const</span> <span class="token keyword">static</span> <span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token number">640</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">static</span> <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token number">480</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Static global kinect context functions</span>

	<span class="token comment" spellcheck="true">/// print the device list</span>
	<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">listDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the total number of devices</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">numTotalDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the number of available devices (not connected)</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">numAvailableDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the number of currently connected devices</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">numConnectedDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// is a device already connected?</span>
	<span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token function">isDeviceConnected</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">bool</span> <span class="token function">isDeviceConnected</span><span class="token punctuation">(</span>string serial<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the id of the next available device,</span>
	<span class="token comment" spellcheck="true">/// returns -1 if nothing found</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextAvailableId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the serial number of the next available device,</span>
	<span class="token comment" spellcheck="true">/// returns an empty string "" if nothing found</span>
	<span class="token keyword">static</span> string <span class="token function">nextAvailableSerial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// set the time to wait when not getting data before attempting to re-open device.</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setReconnectWaitTime</span><span class="token punctuation">(</span><span class="token keyword">float</span> waitTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>

	<span class="token keyword">int</span> deviceId<span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; -1 when not connected</span>
	string serial<span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; unique serial number, "" when not connected</span>
	
	<span class="token keyword">bool</span> bUseTexture<span class="token punctuation">;</span>
	ofTexture depthTex<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">///&lt; the depth texture</span>
	ofTexture videoTex<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">///&lt; the RGB texture</span>
	<span class="token keyword">bool</span> bGrabberInited<span class="token punctuation">;</span>

	ofPixels videoPixels<span class="token punctuation">;</span>
	ofPixels depthPixels<span class="token punctuation">;</span>
	ofShortPixels depthPixelsRaw<span class="token punctuation">;</span>
	ofFloatPixels distancePixels<span class="token punctuation">;</span>

	ofPoint rawAccel<span class="token punctuation">;</span>
	ofPoint mksAccel<span class="token punctuation">;</span>

	<span class="token keyword">float</span> targetTiltAngleDeg<span class="token punctuation">;</span>
	<span class="token keyword">float</span> currentTiltAngleDeg<span class="token punctuation">;</span>
	<span class="token keyword">bool</span> bTiltNeedsApplying<span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> currentLed<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> bLedNeedsApplying<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> bHasMotorControl<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// cam tilt motor</span>
	<span class="token comment" spellcheck="true">//bool bHasAccelContol; // for future use</span>
	<span class="token comment" spellcheck="true">//bool bHasLedControl; // for future use</span>
	
	<span class="token comment" spellcheck="true">// for auto connect tries</span>
	<span class="token keyword">float</span> timeSinceOpen<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">float</span> reconnectWaitTime<span class="token punctuation">;</span>
	<span class="token keyword">int</span> lastDeviceIndex<span class="token punctuation">;</span>
	<span class="token keyword">bool</span> bGotDataDepth<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> bGotDataVideo<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> bFirstUpdate<span class="token punctuation">;</span>
	<span class="token keyword">int</span> tryCount<span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>

	<span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">ofxKinectContext</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// global statics shared between kinect instances</span>
	<span class="token keyword">static</span> ofxKinectContext kinectContext<span class="token punctuation">;</span>

	freenect_device<span class="token operator">*</span> kinectDevice<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">///&lt; kinect device handle</span>

	ofShortPixels depthPixelsRawIntra<span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; depth back</span>
	ofPixels videoPixelsIntra<span class="token punctuation">;</span>			<span class="token comment" spellcheck="true">///&lt; rgb back</span>
	ofShortPixels depthPixelsRawBack<span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; depth back</span>
	ofPixels videoPixelsBack<span class="token punctuation">;</span>			<span class="token comment" spellcheck="true">///&lt; rgb back</span>

	vector<span class="token operator">&lt;</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">></span> depthLookupTable<span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">updateDepthLookupTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">updateDepthPixels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">bool</span> bIsFrameNewVideo<span class="token punctuation">,</span> bIsFrameNewDepth<span class="token punctuation">;</span>
	<span class="token keyword">bool</span> bNeedsUpdateVideo<span class="token punctuation">,</span> bNeedsUpdateDepth<span class="token punctuation">;</span>
	<span class="token keyword">bool</span> bGrabVideo<span class="token punctuation">;</span>
	<span class="token keyword">bool</span> bUseRegistration<span class="token punctuation">;</span>
	<span class="token keyword">bool</span> bNearWhite<span class="token punctuation">;</span>

	<span class="token keyword">float</span> nearClipping<span class="token punctuation">,</span> farClipping<span class="token punctuation">;</span>

	<span class="token keyword">bool</span> bIsVideoInfrared<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">///&lt; is the video image infrared or RGB?</span>
	<span class="token keyword">int</span> videoBytesPerPixel<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">///&lt; how many bytes per pixel in the video image</span>
	ofPixelFormat pixelFormat<span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// libfreenect callbacks</span>
	<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">grabDepthFrame</span><span class="token punctuation">(</span>freenect_device<span class="token operator">*</span> dev<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> depth<span class="token punctuation">,</span> uint32_t timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">grabVideoFrame</span><span class="token punctuation">(</span>freenect_device<span class="token operator">*</span> dev<span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span> video<span class="token punctuation">,</span> uint32_t timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// thread function</span>
	<span class="token keyword">void</span> <span class="token function">threadedFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \class ofxKinectContext</span>
<span class="token comment" spellcheck="true">///</span>
<span class="token comment" spellcheck="true">/// wrapper for the freenect context</span>
<span class="token comment" spellcheck="true">///</span>
<span class="token comment" spellcheck="true">/// do not use this directly</span>
<span class="token comment" spellcheck="true">///</span>
<span class="token keyword">class</span> <span class="token class-name">ofxKinectContext</span> <span class="token punctuation">{</span>

<span class="token keyword">public</span><span class="token operator">:</span>

	<span class="token function">ofxKinectContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">~</span><span class="token function">ofxKinectContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Main</span>

	<span class="token comment" spellcheck="true">/// init the freenect context</span>
	<span class="token keyword">bool</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// clear the freenect context</span>
	<span class="token comment" spellcheck="true">/// closes all currently connected devices</span>
	<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// is the context inited?</span>
	<span class="token keyword">bool</span> <span class="token function">isInited</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// open a kinect device</span>
	<span class="token comment" spellcheck="true">/// an id of -1 will open the first available</span>
	<span class="token keyword">bool</span> <span class="token function">open</span><span class="token punctuation">(</span>ofxKinect<span class="token operator">&</span> kinect<span class="token punctuation">,</span> <span class="token keyword">int</span> id<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// open a kinect device by it's unique serial number</span>
	<span class="token keyword">bool</span> <span class="token function">open</span><span class="token punctuation">(</span>ofxKinect<span class="token operator">&</span> kinect<span class="token punctuation">,</span> string serial<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// close a kinect device</span>
	<span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span>ofxKinect<span class="token operator">&</span> kinect<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// closes all currently connected kinects</span>
	<span class="token keyword">void</span> <span class="token function">closeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/// \section Util</span>
	
	<span class="token comment" spellcheck="true">/// (re)build the list of devices</span>
	<span class="token keyword">void</span> <span class="token function">buildDeviceList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// print the device list</span>
	<span class="token keyword">void</span> <span class="token function">listDevices</span><span class="token punctuation">(</span><span class="token keyword">bool</span> verbose<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the total number of devices</span>
	<span class="token keyword">int</span> <span class="token function">numTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the number of available devices (not connected)</span>
	<span class="token keyword">int</span> <span class="token function">numAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the number of currently connected devices</span>
	<span class="token keyword">int</span> <span class="token function">numConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the kinect object from a device pointer</span>
	<span class="token comment" spellcheck="true">/// returns NULL if not found</span>
	ofxKinect<span class="token operator">*</span> <span class="token function">getKinect</span><span class="token punctuation">(</span>freenect_device<span class="token operator">*</span> dev<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the deviceList index from an id</span>
	<span class="token comment" spellcheck="true">/// returns -1 if not found</span>
	<span class="token keyword">int</span> <span class="token function">getDeviceIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the deviceList index from an id</span>
	<span class="token comment" spellcheck="true">/// returns -1 if not found</span>
	<span class="token keyword">int</span> <span class="token function">getDeviceIndex</span><span class="token punctuation">(</span>string serial<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the deviceList id from an index</span>
	<span class="token comment" spellcheck="true">/// returns -1 if not found</span>
        <span class="token keyword">int</span> <span class="token function">getDeviceId</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the deviceList id from a serial</span>
	<span class="token comment" spellcheck="true">/// returns -1 if not found</span>
        <span class="token keyword">int</span> <span class="token function">getDeviceId</span><span class="token punctuation">(</span>string serial<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// is a device with this id already connected?</span>
	<span class="token keyword">bool</span> <span class="token function">isConnected</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// is a device with this serial already connected?</span>
	<span class="token keyword">bool</span> <span class="token function">isConnected</span><span class="token punctuation">(</span>string serial<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the id of the next available device,</span>
	<span class="token comment" spellcheck="true">/// returns -1 if nothing found</span>
	<span class="token keyword">int</span> <span class="token function">nextAvailableId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment" spellcheck="true">/// get the serial number of the next available device,</span>
	<span class="token comment" spellcheck="true">/// returns an empty string "" if nothing found</span>
	string <span class="token function">nextAvailableSerial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment" spellcheck="true">/// get the raw pointer</span>
	freenect_context<span class="token operator">*</span> <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> kinectContext<span class="token punctuation">;</span><span class="token punctuation">}</span>

	<span class="token comment" spellcheck="true">// for auto-enumeration</span>
    <span class="token keyword">struct</span> KinectPair<span class="token punctuation">{</span>
		string serial<span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; unique serial number</span>
		<span class="token keyword">int</span> id<span class="token punctuation">;</span>			<span class="token comment" spellcheck="true">///&lt; freenect bus id</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
	
<span class="token keyword">private</span><span class="token operator">:</span>
    
	<span class="token keyword">bool</span> bInited<span class="token punctuation">;</span>						<span class="token comment" spellcheck="true">///&lt; has the context been initialized?</span>
	freenect_context<span class="token operator">*</span> kinectContext<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">///&lt; kinect context handle</span>
	std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>KinectPair<span class="token operator">></span> deviceList<span class="token punctuation">;</span>	<span class="token comment" spellcheck="true">///&lt; list of available devices, sorted by serial lexicographically</span>
	std<span class="token operator">::</span>map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span>ofxKinect<span class="token operator">*</span><span class="token operator">></span> kinects<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">///&lt; the connected kinects</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div></div></div></div></div></div></div><script defer src="/_nuxt/payloads/1583940179515/addons/ofxKinect/src/ofxKinect_h/payload.js"></script><script src="/_nuxt/1222c887b819d0202cfa.js" defer></script><script src="/_nuxt/adc32956be059d7527f6.js" defer></script><script src="/_nuxt/e2974c46edd15e353a99.js" defer></script><script src="/_nuxt/f8d94d1c92ade1d8a6da.js" defer></script><script src="/_nuxt/c01572c3f985d7f6c287.js" defer></script>
  </body>
</html>
